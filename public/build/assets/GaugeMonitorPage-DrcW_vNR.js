import{g as RI,c as Ae,r as ca,j as Re,a as NI,b as PI}from"./app-ZDAgCa-D.js";var yv={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L2={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ae=function(e,t){if(!e)throw As(t)},As=function(e){return new Error("Firebase Database ("+L2.SDK_VERSION+") INTERNAL ASSERT FAILED: "+e)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $2=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=i&63|128):(i&64512)===55296&&r+1<e.length&&(e.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(e.charCodeAt(++r)&1023),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=i&63|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=i&63|128)}return t},kI=function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const o=e[n++];t[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){const o=e[n++],a=e[n++],u=e[n++],c=((i&7)<<18|(o&63)<<12|(a&63)<<6|u&63)-65536;t[r++]=String.fromCharCode(55296+(c>>10)),t[r++]=String.fromCharCode(56320+(c&1023))}else{const o=e[n++],a=e[n++];t[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|a&63)}}return t.join("")},Vp={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const o=e[i],a=i+1<e.length,u=a?e[i+1]:0,c=i+2<e.length,f=c?e[i+2]:0,h=o>>2,g=(o&3)<<4|u>>4;let d=(u&15)<<2|f>>6,_=f&63;c||(_=64,a||(d=64)),r.push(n[h],n[g],n[d],n[_])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray($2(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):kI(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const o=n[e.charAt(i++)],u=i<e.length?n[e.charAt(i)]:0;++i;const f=i<e.length?n[e.charAt(i)]:64;++i;const g=i<e.length?n[e.charAt(i)]:64;if(++i,o==null||u==null||f==null||g==null)throw new DI;const d=o<<2|u>>4;if(r.push(d),f!==64){const _=u<<4&240|f>>2;if(r.push(_),g!==64){const y=f<<6&192|g;r.push(y)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class DI extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const F2=function(e){const t=$2(e);return Vp.encodeByteArray(t,!0)},ec=function(e){return F2(e).replace(/\./g,"")},A0=function(e){try{return Vp.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OI(e){return B2(void 0,e)}function B2(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:const n=t;return new Date(n.getTime());case Object:e===void 0&&(e={});break;case Array:e=[];break;default:return t}for(const n in t)!t.hasOwnProperty(n)||!LI(n)||(e[n]=B2(e[n],t[n]));return e}function LI(e){return e!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $I(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FI=()=>$I().__FIREBASE_DEFAULTS__,BI=()=>{if(typeof process>"u"||typeof yv>"u")return;const e=yv.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},UI=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&A0(e[1]);return t&&JSON.parse(t)},U2=()=>{try{return FI()||BI()||UI()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},WI=e=>{var t,n;return(n=(t=U2())===null||t===void 0?void 0:t.emulatorHosts)===null||n===void 0?void 0:n[e]},zI=e=>{const t=WI(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),r]:[t.substring(0,n),r]},W2=()=>{var e;return(e=U2())===null||e===void 0?void 0:e.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hp{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GI(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=t||"demo-project",i=e.iat||0,o=e.sub||e.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},e);return[ec(JSON.stringify(n)),ec(JSON.stringify(a)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VI(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function z2(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(VI())}function HI(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function G2(){return L2.NODE_ADMIN===!0}function qI(){try{return typeof indexedDB=="object"}catch{return!1}}function YI(){return new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var o;t(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(n){t(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KI="FirebaseError";class uu extends Error{constructor(t,n,r){super(n),this.code=t,this.customData=r,this.name=KI,Object.setPrototypeOf(this,uu.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,V2.prototype.create)}}class V2{constructor(t,n,r){this.service=t,this.serviceName=n,this.errors=r}create(t,...n){const r=n[0]||{},i=`${this.service}/${t}`,o=this.errors[t],a=o?XI(o,r):"Error",u=`${this.serviceName}: ${a} (${i}).`;return new uu(i,u,r)}}function XI(e,t){return e.replace(jI,(n,r)=>{const i=t[r];return i!=null?String(i):`<${r}?>`})}const jI=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oa(e){return JSON.parse(e)}function Nt(e){return JSON.stringify(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H2=function(e){let t={},n={},r={},i="";try{const o=e.split(".");t=Oa(A0(o[0])||""),n=Oa(A0(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch{}return{header:t,claims:n,data:r,signature:i}},QI=function(e){const t=H2(e),n=t.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},JI=function(e){const t=H2(e).claims;return typeof t=="object"&&t.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yr(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function ss(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]}function bv(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function tc(e,t,n){const r={};for(const i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=t.call(n,e[i],i,e));return r}function M0(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const o=e[i],a=t[i];if(wv(o)&&wv(a)){if(!M0(o,a))return!1}else if(o!==a)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function wv(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZI(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(i=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eR{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(t,n){n||(n=0);const r=this.W_;if(typeof t=="string")for(let g=0;g<16;g++)r[g]=t.charCodeAt(n)<<24|t.charCodeAt(n+1)<<16|t.charCodeAt(n+2)<<8|t.charCodeAt(n+3),n+=4;else for(let g=0;g<16;g++)r[g]=t[n]<<24|t[n+1]<<16|t[n+2]<<8|t[n+3],n+=4;for(let g=16;g<80;g++){const d=r[g-3]^r[g-8]^r[g-14]^r[g-16];r[g]=(d<<1|d>>>31)&4294967295}let i=this.chain_[0],o=this.chain_[1],a=this.chain_[2],u=this.chain_[3],c=this.chain_[4],f,h;for(let g=0;g<80;g++){g<40?g<20?(f=u^o&(a^u),h=1518500249):(f=o^a^u,h=1859775393):g<60?(f=o&a|u&(o|a),h=2400959708):(f=o^a^u,h=3395469782);const d=(i<<5|i>>>27)+f+c+h+r[g]&4294967295;c=u,u=a,a=(o<<30|o>>>2)&4294967295,o=i,i=d}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+o&4294967295,this.chain_[2]=this.chain_[2]+a&4294967295,this.chain_[3]=this.chain_[3]+u&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(t,n){if(t==null)return;n===void 0&&(n=t.length);const r=n-this.blockSize;let i=0;const o=this.buf_;let a=this.inbuf_;for(;i<n;){if(a===0)for(;i<=r;)this.compress_(t,i),i+=this.blockSize;if(typeof t=="string"){for(;i<n;)if(o[a]=t.charCodeAt(i),++a,++i,a===this.blockSize){this.compress_(o),a=0;break}}else for(;i<n;)if(o[a]=t[i],++a,++i,a===this.blockSize){this.compress_(o),a=0;break}}this.inbuf_=a,this.total_+=n}digest(){const t=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let i=0;i<5;i++)for(let o=24;o>=0;o-=8)t[r]=this.chain_[i]>>o&255,++r;return t}}function q2(e,t){return`${e} failed: ${t} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tR=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);if(i>=55296&&i<=56319){const o=i-55296;r++,ae(r<e.length,"Surrogate pair missing trail surrogate.");const a=e.charCodeAt(r)-56320;i=65536+(o<<10)+a}i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=i&63|128):i<65536?(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=i&63|128):(t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=i&63|128)}return t},uf=function(e){let t=0;for(let n=0;n<e.length;n++){const r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lf(e){return e&&e._delegate?e._delegate:e}class La{constructor(t,n,r){this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oi="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nR{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const r=new Hp;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){var n;const r=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),i=(n=t==null?void 0:t.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(iR(t))try{this.getOrInitializeService({instanceIdentifier:Oi})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(t=Oi){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Oi){return this.instances.has(t)}getOptions(t=Oi){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[o,a]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(o);r===u&&a.resolve(i)}return i}onInit(t,n){var r;const i=this.normalizeInstanceIdentifier(n),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(t),this.onInitCallbacks.set(i,o);const a=this.instances.get(i);return a&&t(a,i),()=>{o.delete(t)}}invokeOnInitCallbacks(t,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:rR(t),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}return r||null}normalizeInstanceIdentifier(t=Oi){return this.component?this.component.multipleInstances?t:Oi:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function rR(e){return e===Oi?void 0:e}function iR(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oR{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new nR(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var rt;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(rt||(rt={}));const sR={debug:rt.DEBUG,verbose:rt.VERBOSE,info:rt.INFO,warn:rt.WARN,error:rt.ERROR,silent:rt.SILENT},aR=rt.INFO,uR={[rt.DEBUG]:"log",[rt.VERBOSE]:"log",[rt.INFO]:"info",[rt.WARN]:"warn",[rt.ERROR]:"error"},lR=(e,t,...n)=>{if(t<e.logLevel)return;const r=new Date().toISOString(),i=uR[t];if(i)console[i](`[${r}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class Y2{constructor(t){this.name=t,this._logLevel=aR,this._logHandler=lR,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in rt))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?sR[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,rt.DEBUG,...t),this._logHandler(this,rt.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,rt.VERBOSE,...t),this._logHandler(this,rt.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,rt.INFO,...t),this._logHandler(this,rt.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,rt.WARN,...t),this._logHandler(this,rt.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,rt.ERROR,...t),this._logHandler(this,rt.ERROR,...t)}}const cR=(e,t)=>t.some(n=>e instanceof n);let xv,Tv;function fR(){return xv||(xv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function hR(){return Tv||(Tv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const K2=new WeakMap,I0=new WeakMap,X2=new WeakMap,Id=new WeakMap,qp=new WeakMap;function dR(e){const t=new Promise((n,r)=>{const i=()=>{e.removeEventListener("success",o),e.removeEventListener("error",a)},o=()=>{n(li(e.result)),i()},a=()=>{r(e.error),i()};e.addEventListener("success",o),e.addEventListener("error",a)});return t.then(n=>{n instanceof IDBCursor&&K2.set(n,e)}).catch(()=>{}),qp.set(t,e),t}function pR(e){if(I0.has(e))return;const t=new Promise((n,r)=>{const i=()=>{e.removeEventListener("complete",o),e.removeEventListener("error",a),e.removeEventListener("abort",a)},o=()=>{n(),i()},a=()=>{r(e.error||new DOMException("AbortError","AbortError")),i()};e.addEventListener("complete",o),e.addEventListener("error",a),e.addEventListener("abort",a)});I0.set(e,t)}let R0={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return I0.get(e);if(t==="objectStoreNames")return e.objectStoreNames||X2.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return li(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function gR(e){R0=e(R0)}function _R(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const r=e.call(Rd(this),t,...n);return X2.set(r,t.sort?t.sort():[t]),li(r)}:hR().includes(e)?function(...t){return e.apply(Rd(this),t),li(K2.get(this))}:function(...t){return li(e.apply(Rd(this),t))}}function mR(e){return typeof e=="function"?_R(e):(e instanceof IDBTransaction&&pR(e),cR(e,fR())?new Proxy(e,R0):e)}function li(e){if(e instanceof IDBRequest)return dR(e);if(Id.has(e))return Id.get(e);const t=mR(e);return t!==e&&(Id.set(e,t),qp.set(t,e)),t}const Rd=e=>qp.get(e);function vR(e,t,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){const a=indexedDB.open(e,t),u=li(a);return r&&a.addEventListener("upgradeneeded",c=>{r(li(a.result),c.oldVersion,c.newVersion,li(a.transaction),c)}),n&&a.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),u.then(c=>{o&&c.addEventListener("close",()=>o()),i&&c.addEventListener("versionchange",f=>i(f.oldVersion,f.newVersion,f))}).catch(()=>{}),u}const yR=["get","getKey","getAll","getAllKeys","count"],bR=["put","add","delete","clear"],Nd=new Map;function Cv(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(Nd.get(t))return Nd.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=bR.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||yR.includes(n)))return;const o=async function(a,...u){const c=this.transaction(a,i?"readwrite":"readonly");let f=c.store;return r&&(f=f.index(u.shift())),(await Promise.all([f[n](...u),i&&c.done]))[0]};return Nd.set(t,o),o}gR(e=>({...e,get:(t,n,r)=>Cv(t,n)||e.get(t,n,r),has:(t,n)=>!!Cv(t,n)||e.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wR{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(xR(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function xR(e){const t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}const N0="@firebase/app",Ev="0.10.5";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qi=new Y2("@firebase/app"),TR="@firebase/app-compat",CR="@firebase/analytics-compat",ER="@firebase/analytics",SR="@firebase/app-check-compat",AR="@firebase/app-check",MR="@firebase/auth",IR="@firebase/auth-compat",RR="@firebase/database",NR="@firebase/database-compat",PR="@firebase/functions",kR="@firebase/functions-compat",DR="@firebase/installations",OR="@firebase/installations-compat",LR="@firebase/messaging",$R="@firebase/messaging-compat",FR="@firebase/performance",BR="@firebase/performance-compat",UR="@firebase/remote-config",WR="@firebase/remote-config-compat",zR="@firebase/storage",GR="@firebase/storage-compat",VR="@firebase/firestore",HR="@firebase/vertexai-preview",qR="@firebase/firestore-compat",YR="firebase",KR="10.12.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P0="[DEFAULT]",XR={[N0]:"fire-core",[TR]:"fire-core-compat",[ER]:"fire-analytics",[CR]:"fire-analytics-compat",[AR]:"fire-app-check",[SR]:"fire-app-check-compat",[MR]:"fire-auth",[IR]:"fire-auth-compat",[RR]:"fire-rtdb",[NR]:"fire-rtdb-compat",[PR]:"fire-fn",[kR]:"fire-fn-compat",[DR]:"fire-iid",[OR]:"fire-iid-compat",[LR]:"fire-fcm",[$R]:"fire-fcm-compat",[FR]:"fire-perf",[BR]:"fire-perf-compat",[UR]:"fire-rc",[WR]:"fire-rc-compat",[zR]:"fire-gcs",[GR]:"fire-gcs-compat",[VR]:"fire-fst",[qR]:"fire-fst-compat",[HR]:"fire-vertex","fire-js":"fire-js",[YR]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nc=new Map,jR=new Map,k0=new Map;function Sv(e,t){try{e.container.addComponent(t)}catch(n){qi.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function rc(e){const t=e.name;if(k0.has(t))return qi.debug(`There were multiple attempts to register component ${t}.`),!1;k0.set(t,e);for(const n of nc.values())Sv(n,e);for(const n of jR.values())Sv(n,e);return!0}function QR(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JR={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ci=new V2("app","Firebase",JR);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZR{constructor(t,n,r){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new La("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw ci.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e7=KR;function D0(e,t={}){let n=e;typeof t!="object"&&(t={name:t});const r=Object.assign({name:P0,automaticDataCollectionEnabled:!1},t),i=r.name;if(typeof i!="string"||!i)throw ci.create("bad-app-name",{appName:String(i)});if(n||(n=W2()),!n)throw ci.create("no-options");const o=nc.get(i);if(o){if(M0(n,o.options)&&M0(r,o.config))return o;throw ci.create("duplicate-app",{appName:i})}const a=new oR(i);for(const c of k0.values())a.addComponent(c);const u=new ZR(n,r,a);return nc.set(i,u),u}function t7(e=P0){const t=nc.get(e);if(!t&&e===P0&&W2())return D0();if(!t)throw ci.create("no-app",{appName:e});return t}function Qo(e,t,n){var r;let i=(r=XR[e])!==null&&r!==void 0?r:e;n&&(i+=`-${n}`);const o=i.match(/\s|\//),a=t.match(/\s|\//);if(o||a){const u=[`Unable to register library "${i}" with version "${t}":`];o&&u.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&a&&u.push("and"),a&&u.push(`version name "${t}" contains illegal characters (whitespace or "/")`),qi.warn(u.join(" "));return}rc(new La(`${i}-version`,()=>({library:i,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n7="firebase-heartbeat-database",r7=1,$a="firebase-heartbeat-store";let Pd=null;function j2(){return Pd||(Pd=vR(n7,r7,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore($a)}catch(n){console.warn(n)}}}}).catch(e=>{throw ci.create("idb-open",{originalErrorMessage:e.message})})),Pd}async function i7(e){try{const n=(await j2()).transaction($a),r=await n.objectStore($a).get(Q2(e));return await n.done,r}catch(t){if(t instanceof uu)qi.warn(t.message);else{const n=ci.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});qi.warn(n.message)}}}async function Av(e,t){try{const r=(await j2()).transaction($a,"readwrite");await r.objectStore($a).put(t,Q2(e)),await r.done}catch(n){if(n instanceof uu)qi.warn(n.message);else{const r=ci.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});qi.warn(r.message)}}}function Q2(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o7=1024,s7=30*24*60*60*1e3;class a7{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new l7(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var t,n;const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=Mv();if(!(((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(a=>a.date===o)))return this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(a=>{const u=new Date(a.date).valueOf();return Date.now()-u<=s7}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var t;if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Mv(),{heartbeatsToSend:r,unsentEntries:i}=u7(this._heartbeatsCache.heartbeats),o=ec(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}}function Mv(){return new Date().toISOString().substring(0,10)}function u7(e,t=o7){const n=[];let r=e.slice();for(const i of e){const o=n.find(a=>a.agent===i.agent);if(o){if(o.dates.push(i.date),Iv(n)>t){o.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Iv(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class l7{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return qI()?YI().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await i7(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Av(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Av(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...t.heartbeats]})}else return}}function Iv(e){return ec(JSON.stringify({version:2,heartbeats:e})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c7(e){rc(new La("platform-logger",t=>new wR(t),"PRIVATE")),rc(new La("heartbeat",t=>new a7(t),"PRIVATE")),Qo(N0,Ev,e),Qo(N0,Ev,"esm2017"),Qo("fire-js","")}c7("");var Rv={};const Nv="@firebase/database",Pv="1.0.5";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let J2="";function f7(e){J2=e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h7{constructor(t){this.domStorage_=t,this.prefix_="firebase:"}set(t,n){n==null?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),Nt(n))}get(t){const n=this.domStorage_.getItem(this.prefixedName_(t));return n==null?null:Oa(n)}remove(t){this.domStorage_.removeItem(this.prefixedName_(t))}prefixedName_(t){return this.prefix_+t}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d7{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(t,n){n==null?delete this.cache_[t]:this.cache_[t]=n}get(t){return Yr(this.cache_,t)?this.cache_[t]:null}remove(t){delete this.cache_[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z2=function(e){try{if(typeof window<"u"&&typeof window[e]<"u"){const t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new h7(t)}}catch{}return new d7},Ui=Z2("localStorage"),p7=Z2("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jo=new Y2("@firebase/database"),g7=function(){let e=1;return function(){return e++}}(),ew=function(e){const t=tR(e),n=new eR;n.update(t);const r=n.digest();return Vp.encodeByteArray(r)},lu=function(...e){let t="";for(let n=0;n<e.length;n++){const r=e[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?t+=lu.apply(null,r):typeof r=="object"?t+=Nt(r):t+=r,t+=" "}return t};let Ta=null,kv=!0;const _7=function(e,t){ae(!t,"Can't turn on custom loggers persistently."),Jo.logLevel=rt.VERBOSE,Ta=Jo.log.bind(Jo)},qt=function(...e){if(kv===!0&&(kv=!1,Ta===null&&p7.get("logging_enabled")===!0&&_7()),Ta){const t=lu.apply(null,e);Ta(t)}},cu=function(e){return function(...t){qt(e,...t)}},O0=function(...e){const t="FIREBASE INTERNAL ERROR: "+lu(...e);Jo.error(t)},Vr=function(...e){const t=`FIREBASE FATAL ERROR: ${lu(...e)}`;throw Jo.error(t),new Error(t)},Pn=function(...e){const t="FIREBASE WARNING: "+lu(...e);Jo.warn(t)},m7=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Pn("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},tw=function(e){return typeof e=="number"&&(e!==e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},v7=function(e){if(document.readyState==="complete")e();else{let t=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}t||(t=!0,e())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},as="[MIN_NAME]",Yi="[MAX_NAME]",Ms=function(e,t){if(e===t)return 0;if(e===as||t===Yi)return-1;if(t===as||e===Yi)return 1;{const n=Dv(e),r=Dv(t);return n!==null?r!==null?n-r===0?e.length-t.length:n-r:-1:r!==null?1:e<t?-1:1}},y7=function(e,t){return e===t?0:e<t?-1:1},Js=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+Nt(t))},Yp=function(e){if(typeof e!="object"||e===null)return Nt(e);const t=[];for(const r in e)t.push(r);t.sort();let n="{";for(let r=0;r<t.length;r++)r!==0&&(n+=","),n+=Nt(t[r]),n+=":",n+=Yp(e[t[r]]);return n+="}",n},nw=function(e,t){const n=e.length;if(n<=t)return[e];const r=[];for(let i=0;i<n;i+=t)i+t>n?r.push(e.substring(i,n)):r.push(e.substring(i,i+t));return r};function xn(e,t){for(const n in e)e.hasOwnProperty(n)&&t(n,e[n])}const rw=function(e){ae(!tw(e),"Invalid JSON number");const t=11,n=52,r=(1<<t-1)-1;let i,o,a,u,c;e===0?(o=0,a=0,i=1/e===-1/0?1:0):(i=e<0,e=Math.abs(e),e>=Math.pow(2,1-r)?(u=Math.min(Math.floor(Math.log(e)/Math.LN2),r),o=u+r,a=Math.round(e*Math.pow(2,n-u)-Math.pow(2,n))):(o=0,a=Math.round(e/Math.pow(2,1-r-n))));const f=[];for(c=n;c;c-=1)f.push(a%2?1:0),a=Math.floor(a/2);for(c=t;c;c-=1)f.push(o%2?1:0),o=Math.floor(o/2);f.push(i?1:0),f.reverse();const h=f.join("");let g="";for(c=0;c<64;c+=8){let d=parseInt(h.substr(c,8),2).toString(16);d.length===1&&(d="0"+d),g=g+d}return g.toLowerCase()},b7=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},w7=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function x7(e,t){let n="Unknown Error";e==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":e==="permission_denied"?n="Client doesn't have permission to access the desired data.":e==="unavailable"&&(n="The service is unavailable");const r=new Error(e+" at "+t._path.toString()+": "+n);return r.code=e.toUpperCase(),r}const T7=new RegExp("^-?(0*)\\d{1,10}$"),C7=-2147483648,E7=2147483647,Dv=function(e){if(T7.test(e)){const t=Number(e);if(t>=C7&&t<=E7)return t}return null},fu=function(e){try{e()}catch(t){setTimeout(()=>{const n=t.stack||"";throw Pn("Exception was thrown by user callback.",n),t},Math.floor(0))}},S7=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Ca=function(e,t){const n=setTimeout(e,t);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A7{constructor(t,n){this.appName_=t,this.appCheckProvider=n,this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(r=>this.appCheck=r)}getToken(t){return this.appCheck?this.appCheck.getToken(t):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(t).then(n,r):n(null)},0)})}addTokenChangeListener(t){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(r=>r.addTokenListener(t))}notifyForInvalidToken(){Pn(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M7{constructor(t,n,r){this.appName_=t,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(t){return this.auth_?this.auth_.getToken(t).catch(n=>n&&n.code==="auth/token-not-initialized"?(qt("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(t).then(n,r):n(null)},0)})}addTokenChangeListener(t){this.auth_?this.auth_.addAuthTokenListener(t):this.authProvider_.get().then(n=>n.addAuthTokenListener(t))}removeTokenChangeListener(t){this.authProvider_.get().then(n=>n.removeAuthTokenListener(t))}notifyForInvalidToken(){let t='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?t+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?t+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':t+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Pn(t)}}class Wl{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}Wl.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kp="5",iw="v",ow="s",sw="r",aw="f",uw=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,lw="ls",cw="p",L0="ac",fw="websocket",hw="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dw{constructor(t,n,r,i,o=!1,a="",u=!1,c=!1){this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=o,this.persistenceKey=a,this.includeNamespaceInQueryParams=u,this.isUsingEmulator=c,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Ui.get("host:"+t)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&Ui.set("host:"+this._host,this.internalHost))}toString(){let t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t}toURLString(){const t=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${t}${this.host}/${n}`}}function I7(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams}function pw(e,t,n){ae(typeof t=="string","typeof type must == string"),ae(typeof n=="object","typeof params must == object");let r;if(t===fw)r=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else if(t===hw)r=(e.secure?"https://":"http://")+e.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+t);I7(e)&&(n.ns=e.namespace);const i=[];return xn(n,(o,a)=>{i.push(o+"="+a)}),r+i.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R7{constructor(){this.counters_={}}incrementCounter(t,n=1){Yr(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=n}get(){return OI(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kd={},Dd={};function Xp(e){const t=e.toString();return kd[t]||(kd[t]=new R7),kd[t]}function N7(e,t){const n=e.toString();return Dd[n]||(Dd[n]=t()),Dd[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P7{constructor(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(t,n){this.closeAfterResponse=t,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(t,n){for(this.pendingResponses[t]=n;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&fu(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ov="start",k7="close",D7="pLPCommand",O7="pRTLPCB",gw="id",_w="pw",mw="ser",L7="cb",$7="seg",F7="ts",B7="d",U7="dframe",vw=1870,yw=30,W7=vw-yw,z7=25e3,G7=3e4;class Yo{constructor(t,n,r,i,o,a,u){this.connId=t,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=o,this.transportSessionId=a,this.lastSessionId=u,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=cu(t),this.stats_=Xp(n),this.urlFn=c=>(this.appCheckToken&&(c[L0]=this.appCheckToken),pw(n,hw,c))}open(t,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new P7(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(G7)),v7(()=>{if(this.isClosed_)return;this.scriptTagHolder=new jp((...o)=>{const[a,u,c,f,h]=o;if(this.incrementIncomingBytes_(o),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,a===Ov)this.id=u,this.password=c;else if(a===k7)u?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(u,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+a)},(...o)=>{const[a,u]=o;this.incrementIncomingBytes_(o),this.myPacketOrderer.handleResponse(a,u)},()=>{this.onClosed_()},this.urlFn);const r={};r[Ov]="t",r[mw]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[L7]=this.scriptTagHolder.uniqueCallbackIdentifier),r[iw]=Kp,this.transportSessionId&&(r[ow]=this.transportSessionId),this.lastSessionId&&(r[lw]=this.lastSessionId),this.applicationId&&(r[cw]=this.applicationId),this.appCheckToken&&(r[L0]=this.appCheckToken),typeof location<"u"&&location.hostname&&uw.test(location.hostname)&&(r[sw]=aw);const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Yo.forceAllow_=!0}static forceDisallow(){Yo.forceDisallow_=!0}static isAvailable(){return Yo.forceAllow_?!0:!Yo.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!b7()&&!w7()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(t){const n=Nt(t);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=F2(n),i=nw(r,W7);for(let o=0;o<i.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[o]),this.curSegmentNum++}addDisconnectPingFrame(t,n){this.myDisconnFrame=document.createElement("iframe");const r={};r[U7]="t",r[gw]=t,r[_w]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(t){const n=Nt(t).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class jp{constructor(t,n,r,i){this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=g7(),window[D7+this.uniqueCallbackIdentifier]=t,window[O7+this.uniqueCallbackIdentifier]=n,this.myIFrame=jp.createIFrame_();let o="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(o='<script>document.domain="'+document.domain+'";<\/script>');const a="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(a),this.myIFrame.doc.close()}catch(u){qt("frame writing exception"),u.stack&&qt(u.stack),qt(u)}}}static createIFrame_(){const t=document.createElement("iframe");if(t.style.display="none",document.body){document.body.appendChild(t);try{t.contentWindow.document||qt("No IE domain setting required")}catch{const r=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const t=this.onDisconnect;t&&(this.onDisconnect=null,t())}startLongPoll(t,n){for(this.myID=t,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const t={};t[gw]=this.myID,t[_w]=this.myPW,t[mw]=this.currentSerial;let n=this.urlFn(t),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+yw+r.length<=vw;){const a=this.pendingSegs.shift();r=r+"&"+$7+i+"="+a.seg+"&"+F7+i+"="+a.ts+"&"+B7+i+"="+a.d,i++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(t,n,r){this.pendingSegs.push({seg:t,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(t,n){this.outstandingRequests.add(n);const r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},i=setTimeout(r,Math.floor(z7)),o=()=>{clearTimeout(i),r()};this.addTag(t,o)}addTag(t,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=t,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||i==="loaded"||i==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{qt("Long-poll script failed to load: "+t),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V7=16384,H7=45e3;let ic=null;typeof MozWebSocket<"u"?ic=MozWebSocket:typeof WebSocket<"u"&&(ic=WebSocket);class Jn{constructor(t,n,r,i,o,a,u){this.connId=t,this.applicationId=r,this.appCheckToken=i,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=cu(this.connId),this.stats_=Xp(n),this.connURL=Jn.connectionURL_(n,a,u,i,r),this.nodeAdmin=n.nodeAdmin}static connectionURL_(t,n,r,i,o){const a={};return a[iw]=Kp,typeof location<"u"&&location.hostname&&uw.test(location.hostname)&&(a[sw]=aw),n&&(a[ow]=n),r&&(a[lw]=r),i&&(a[L0]=i),o&&(a[cw]=o),pw(t,fw,a)}open(t,n){this.onDisconnect=n,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Ui.set("previous_websocket_failure",!0);try{let r;G2(),this.mySock=new ic(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const i=r.message||r.data;i&&this.log_(i),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const i=r.message||r.data;i&&this.log_(i),this.onClosed_()}}start(){}static forceDisallow(){Jn.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(n);r&&r.length>1&&parseFloat(r[1])<4.4&&(t=!0)}return!t&&ic!==null&&!Jn.forceDisallow_}static previouslyFailed(){return Ui.isInMemoryStorage||Ui.get("previous_websocket_failure")===!0}markConnectionHealthy(){Ui.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const r=Oa(n);this.onMessage(r)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if(ae(this.frames===null,"We already have a frame buffer"),t.length<=6){const n=Number(t);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(this.mySock===null)return;const n=t.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const r=this.extractFrameCount_(n);r!==null&&this.appendFrame_(r)}}send(t){this.resetKeepAlive();const n=Nt(t);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=nw(n,V7);r.length>1&&this.sendString_(String(r.length));for(let i=0;i<r.length;i++)this.sendString_(r[i])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(H7))}sendString_(t){try{this.mySock.send(t)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}Jn.responsesRequiredToBeHealthy=2;Jn.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fa{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[Yo,Jn]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){const n=Jn&&Jn.isAvailable();let r=n&&!Jn.previouslyFailed();if(t.webSocketOnly&&(n||Pn("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[Jn];else{const i=this.transports_=[];for(const o of Fa.ALL_TRANSPORTS)o&&o.isAvailable()&&i.push(o);Fa.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}Fa.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q7=6e4,Y7=5e3,K7=10*1024,X7=100*1024,Od="t",Lv="d",j7="s",$v="r",Q7="e",Fv="o",Bv="a",Uv="n",Wv="p",J7="h";class Z7{constructor(t,n,r,i,o,a,u,c,f,h){this.id=t,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=o,this.onMessage_=a,this.onReady_=u,this.onDisconnect_=c,this.onKill_=f,this.lastSessionId=h,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=cu("c:"+this.id+":"),this.transportManager_=new Fa(n),this.log_("Connection created"),this.start_()}start_(){const t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));const i=t.healthyTimeout||0;i>0&&(this.healthyTimeout_=Ca(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>X7?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>K7?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(t){return n=>{t===this.conn_?this.onConnectionLost_(n):t===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(t){return n=>{this.state_!==2&&(t===this.rx_?this.onPrimaryMessageReceived_(n):t===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(t){const n={t:"d",d:t};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(t){if(Od in t){const n=t[Od];n===Bv?this.upgradeIfSecondaryHealthy_():n===$v?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===Fv&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(t){const n=Js("t",t),r=Js("d",t);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:Wv,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:Bv,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:Uv,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(t){const n=Js("t",t),r=Js("d",t);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(t){this.onPrimaryResponse_(),this.onMessage_(t)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(t){const n=Js(Od,t);if(Lv in t){const r=t[Lv];if(n===J7){const i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if(n===Uv){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===j7?this.onConnectionShutdown_(r):n===$v?this.onReset_(r):n===Q7?O0("Server Error: "+r):n===Fv?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):O0("Unknown control packet command: "+n)}}onHandshake_(t){const n=t.ts,r=t.v,i=t.h;this.sessionId=t.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),Kp!==r&&Pn("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)}startUpgrade_(t){this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),Ca(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(q7))}onReset_(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(t,n){this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Ca(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(Y7))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:Wv,d:{}}}))}onSecondaryConnectionLost_(){const t=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===t||this.rx_===t)&&this.close()}onConnectionLost_(t){this.conn_=null,!t&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Ui.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(t){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(t)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bw{put(t,n,r,i){}merge(t,n,r,i){}refreshAuthToken(t){}refreshAppCheckToken(t){}onDisconnectPut(t,n,r){}onDisconnectMerge(t,n,r){}onDisconnectCancel(t,n){}reportStats(t){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ww{constructor(t){this.allowedEvents_=t,this.listeners_={},ae(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}trigger(t,...n){if(Array.isArray(this.listeners_[t])){const r=[...this.listeners_[t]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,n)}}on(t,n,r){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:n,context:r});const i=this.getInitialEvent(t);i&&n.apply(r,i)}off(t,n,r){this.validateEventType_(t);const i=this.listeners_[t]||[];for(let o=0;o<i.length;o++)if(i[o].callback===n&&(!r||r===i[o].context)){i.splice(o,1);return}}validateEventType_(t){ae(this.allowedEvents_.find(n=>n===t),"Unknown event: "+t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oc extends ww{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!z2()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new oc}getInitialEvent(t){return ae(t==="online","Unknown event type: "+t),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zv=32,Gv=768;let et=class{constructor(t,n){if(n===void 0){this.pieces_=t.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=n}toString(){let t="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(t+="/"+this.pieces_[n]);return t||"/"}};function Ke(){return new et("")}function We(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function di(e){return e.pieces_.length-e.pieceNum_}function it(e){let t=e.pieceNum_;return t<e.pieces_.length&&t++,new et(e.pieces_,t)}function xw(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function eN(e){let t="";for(let n=e.pieceNum_;n<e.pieces_.length;n++)e.pieces_[n]!==""&&(t+="/"+encodeURIComponent(String(e.pieces_[n])));return t||"/"}function Tw(e,t=0){return e.pieces_.slice(e.pieceNum_+t)}function Cw(e){if(e.pieceNum_>=e.pieces_.length)return null;const t=[];for(let n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new et(t,0)}function Ct(e,t){const n=[];for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);if(t instanceof et)for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);else{const r=t.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&n.push(r[i])}return new et(n,0)}function ze(e){return e.pieceNum_>=e.pieces_.length}function bn(e,t){const n=We(e),r=We(t);if(n===null)return t;if(n===r)return bn(it(e),it(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function Qp(e,t){if(di(e)!==di(t))return!1;for(let n=e.pieceNum_,r=t.pieceNum_;n<=e.pieces_.length;n++,r++)if(e.pieces_[n]!==t.pieces_[r])return!1;return!0}function tr(e,t){let n=e.pieceNum_,r=t.pieceNum_;if(di(e)>di(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[r])return!1;++n,++r}return!0}class tN{constructor(t,n){this.errorPrefix_=n,this.parts_=Tw(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=uf(this.parts_[r]);Ew(this)}}function nN(e,t){e.parts_.length>0&&(e.byteLength_+=1),e.parts_.push(t),e.byteLength_+=uf(t),Ew(e)}function rN(e){const t=e.parts_.pop();e.byteLength_-=uf(t),e.parts_.length>0&&(e.byteLength_-=1)}function Ew(e){if(e.byteLength_>Gv)throw new Error(e.errorPrefix_+"has a key path longer than "+Gv+" bytes ("+e.byteLength_+").");if(e.parts_.length>zv)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+zv+") or object contains a cycle "+Li(e))}function Li(e){return e.parts_.length===0?"":"in property '"+e.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jp extends ww{constructor(){super(["visible"]);let t,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",t="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",t="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",t="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",t="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const r=!document[t];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new Jp}getInitialEvent(t){return ae(t==="visible","Unknown event type: "+t),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zs=1e3,iN=60*5*1e3,Vv=30*1e3,oN=1.3,sN=3e4,aN="server_kill",Hv=3;class zr extends bw{constructor(t,n,r,i,o,a,u,c){if(super(),this.repoInfo_=t,this.applicationId_=n,this.onDataUpdate_=r,this.onConnectStatus_=i,this.onServerInfoUpdate_=o,this.authTokenProvider_=a,this.appCheckTokenProvider_=u,this.authOverride_=c,this.id=zr.nextPersistentConnectionId_++,this.log_=cu("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Zs,this.maxReconnectDelay_=iN,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,c&&!G2())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Jp.getInstance().on("visible",this.onVisible_,this),t.host.indexOf("fblocal")===-1&&oc.getInstance().on("online",this.onOnline_,this)}sendRequest(t,n,r){const i=++this.requestNumber_,o={r:i,a:t,b:n};this.log_(Nt(o)),ae(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),r&&(this.requestCBHash_[i]=r)}get(t){this.initConnection_();const n=new Hp,i={action:"g",request:{p:t._path.toString(),q:t._queryObject},onComplete:a=>{const u=a.d;a.s==="ok"?n.resolve(u):n.reject(u)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;const o=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(o),n.promise}listen(t,n,r,i){this.initConnection_();const o=t._queryIdentifier,a=t._path.toString();this.log_("Listen called for "+a+" "+o),this.listens.has(a)||this.listens.set(a,new Map),ae(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),ae(!this.listens.get(a).has(o),"listen() called twice for same path/queryId.");const u={onComplete:i,hashFn:n,query:t,tag:r};this.listens.get(a).set(o,u),this.connected_&&this.sendListen_(u)}sendGet_(t){const n=this.outstandingGets_[t];this.sendRequest("g",n.request,r=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})}sendListen_(t){const n=t.query,r=n._path.toString(),i=n._queryIdentifier;this.log_("Listen on "+r+" for "+i);const o={p:r},a="q";t.tag&&(o.q=n._queryObject,o.t=t.tag),o.h=t.hashFn(),this.sendRequest(a,o,u=>{const c=u.d,f=u.s;zr.warnOnListenWarnings_(c,n),(this.listens.get(r)&&this.listens.get(r).get(i))===t&&(this.log_("listen response",u),f!=="ok"&&this.removeListen_(r,i),t.onComplete&&t.onComplete(f,c))})}static warnOnListenWarnings_(t,n){if(t&&typeof t=="object"&&Yr(t,"w")){const r=ss(t,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const i='".indexOn": "'+n._queryParams.getIndex().toString()+'"',o=n._path.toString();Pn(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${i} at ${o} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&t.length===40||JI(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=Vv)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,n=QI(t)?"auth":"gauth",r={cred:t};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(n,r,i=>{const o=i.s,a=i.d||"error";this.authToken_===t&&(o==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(o,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const n=t.s,r=t.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,r)})}unlisten(t,n){const r=t._path.toString(),i=t._queryIdentifier;this.log_("Unlisten called for "+r+" "+i),ae(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,i)&&this.connected_&&this.sendUnlisten_(r,i,t._queryObject,n)}sendUnlisten_(t,n,r,i){this.log_("Unlisten on "+t+" for "+n);const o={p:t},a="n";i&&(o.q=r,o.t=i),this.sendRequest(a,o)}onDisconnectPut(t,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,n,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:n,onComplete:r})}onDisconnectMerge(t,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,n,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:n,onComplete:r})}onDisconnectCancel(t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(t,n,r,i){const o={p:n,d:r};this.log_("onDisconnect "+t,o),this.sendRequest(t,o,a=>{i&&setTimeout(()=>{i(a.s,a.d)},Math.floor(0))})}put(t,n,r,i){this.putInternal("p",t,n,r,i)}merge(t,n,r,i){this.putInternal("m",t,n,r,i)}putInternal(t,n,r,i,o){this.initConnection_();const a={p:n,d:r};o!==void 0&&(a.h=o),this.outstandingPuts_.push({action:t,request:a,onComplete:i}),this.outstandingPutCount_++;const u=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(u):this.log_("Buffering put: "+n)}sendPut_(t){const n=this.outstandingPuts_[t].action,r=this.outstandingPuts_[t].request,i=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(n,r,o=>{this.log_(n+" response",o),delete this.outstandingPuts_[t],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),i&&i(o.s,o.d)})}reportStats(t){if(this.connected_){const n={c:t};this.log_("reportStats",n),this.sendRequest("s",n,r=>{if(r.s!=="ok"){const o=r.d;this.log_("reportStats","Error sending stats: "+o)}})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+Nt(t));const n=t.r,r=this.requestCBHash_[n];r&&(delete this.requestCBHash_[n],r(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,n){this.log_("handleServerMessage",t,n),t==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):t==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):t==="c"?this.onListenRevoked_(n.p,n.q):t==="ac"?this.onAuthRevoked_(n.s,n.d):t==="apc"?this.onAppCheckRevoked_(n.s,n.d):t==="sd"?this.onSecurityDebugPacket_(n):O0("Unrecognized action received from server: "+Nt(t)+`
Are you using the latest client?`)}onReady_(t,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(t),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){ae(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Zs,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=Zs,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>sN&&(this.reconnectDelay_=Zs),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const t=new Date().getTime()-this.lastConnectionAttemptTime_;let n=Math.max(0,this.reconnectDelay_-t);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*oN)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const t=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+zr.nextConnectionId_++,o=this.lastSessionId;let a=!1,u=null;const c=function(){u?u.close():(a=!0,r())},f=function(g){ae(u,"sendRequest call when we're not connected not allowed."),u.sendRequest(g)};this.realtime_={close:c,sendRequest:f};const h=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[g,d]=await Promise.all([this.authTokenProvider_.getToken(h),this.appCheckTokenProvider_.getToken(h)]);a?qt("getToken() completed but was canceled"):(qt("getToken() completed. Creating connection."),this.authToken_=g&&g.accessToken,this.appCheckToken_=d&&d.token,u=new Z7(i,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,n,r,_=>{Pn(_+" ("+this.repoInfo_.toString()+")"),this.interrupt(aN)},o))}catch(g){this.log_("Failed to get token: "+g),a||(this.repoInfo_.nodeAdmin&&Pn(g),c())}}}interrupt(t){qt("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){qt("Resuming connection for reason: "+t),delete this.interruptReasons_[t],bv(this.interruptReasons_)&&(this.reconnectDelay_=Zs,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const n=t-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const n=this.outstandingPuts_[t];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(t,n){let r;n?r=n.map(o=>Yp(o)).join("$"):r="default";const i=this.removeListen_(t,r);i&&i.onComplete&&i.onComplete("permission_denied")}removeListen_(t,n){const r=new et(t).toString();let i;if(this.listens.has(r)){const o=this.listens.get(r);i=o.get(n),o.delete(n),o.size===0&&this.listens.delete(r)}else i=void 0;return i}onAuthRevoked_(t,n){qt("Auth token revoked: "+t+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(t==="invalid_token"||t==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=Hv&&(this.reconnectDelay_=Vv,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,n){qt("App check token revoked: "+t+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(t==="invalid_token"||t==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=Hv&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const n of t.values())this.sendListen_(n);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let n="js";t["sdk."+n+"."+J2.replace(/\./g,"-")]=1,z2()?t["framework.cordova"]=1:HI()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=oc.getInstance().currentlyOnline();return bv(this.interruptReasons_)&&t}}zr.nextPersistentConnectionId_=0;zr.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Be{constructor(t,n){this.name=t,this.node=n}static Wrap(t,n){return new Be(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cf{getCompare(){return this.compare.bind(this)}indexedValueChanged(t,n){const r=new Be(as,t),i=new Be(as,n);return this.compare(r,i)!==0}minPost(){return Be.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ml;class Sw extends cf{static get __EMPTY_NODE(){return ml}static set __EMPTY_NODE(t){ml=t}compare(t,n){return Ms(t.name,n.name)}isDefinedOn(t){throw As("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(t,n){return!1}minPost(){return Be.MIN}maxPost(){return new Be(Yi,ml)}makePost(t,n){return ae(typeof t=="string","KeyIndex indexValue must always be a string."),new Be(t,ml)}toString(){return".key"}}const Zo=new Sw;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vl{constructor(t,n,r,i,o=null){this.isReverse_=i,this.resultGenerator_=o,this.nodeStack_=[];let a=1;for(;!t.isEmpty();)if(t=t,a=n?r(t.key,n):1,i&&(a*=-1),a<0)this.isReverse_?t=t.left:t=t.right;else if(a===0){this.nodeStack_.push(t);break}else this.nodeStack_.push(t),this.isReverse_?t=t.right:t=t.left}getNext(){if(this.nodeStack_.length===0)return null;let t=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(t.key,t.value):n={key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}}}class Rt{constructor(t,n,r,i,o){this.key=t,this.value=n,this.color=r??Rt.RED,this.left=i??wn.EMPTY_NODE,this.right=o??wn.EMPTY_NODE}copy(t,n,r,i,o){return new Rt(t??this.key,n??this.value,r??this.color,i??this.left,o??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,r){let i=this;const o=r(t,i.key);return o<0?i=i.copy(null,null,null,i.left.insert(t,n,r),null):o===0?i=i.copy(null,n,null,null,null):i=i.copy(null,null,null,null,i.right.insert(t,n,r)),i.fixUp_()}removeMin_(){if(this.left.isEmpty())return wn.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,n){let r,i;if(r=this,n(t,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(t,n),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),n(t,r.key)===0){if(r.right.isEmpty())return wn.EMPTY_NODE;i=r.right.min_(),r=r.copy(i.key,i.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(t,n))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,Rt.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,Rt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}Rt.RED=!0;Rt.BLACK=!1;class uN{copy(t,n,r,i,o){return this}insert(t,n,r){return new Rt(t,n,null)}remove(t,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class wn{constructor(t,n=wn.EMPTY_NODE){this.comparator_=t,this.root_=n}insert(t,n){return new wn(this.comparator_,this.root_.insert(t,n,this.comparator_).copy(null,null,Rt.BLACK,null,null))}remove(t){return new wn(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,Rt.BLACK,null,null))}get(t){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(t,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(t){let n,r=this.root_,i=null;for(;!r.isEmpty();)if(n=this.comparator_(t,r.key),n===0){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(i=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(t){return this.root_.inorderTraversal(t)}reverseTraversal(t){return this.root_.reverseTraversal(t)}getIterator(t){return new vl(this.root_,null,this.comparator_,!1,t)}getIteratorFrom(t,n){return new vl(this.root_,t,this.comparator_,!1,n)}getReverseIteratorFrom(t,n){return new vl(this.root_,t,this.comparator_,!0,n)}getReverseIterator(t){return new vl(this.root_,null,this.comparator_,!0,t)}}wn.EMPTY_NODE=new uN;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lN(e,t){return Ms(e.name,t.name)}function Zp(e,t){return Ms(e,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $0;function cN(e){$0=e}const Aw=function(e){return typeof e=="number"?"number:"+rw(e):"string:"+e},Mw=function(e){if(e.isLeafNode()){const t=e.val();ae(typeof t=="string"||typeof t=="number"||typeof t=="object"&&Yr(t,".sv"),"Priority must be a string or number.")}else ae(e===$0||e.isEmpty(),"priority of unexpected type.");ae(e===$0||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qv;class It{constructor(t,n=It.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=n,this.lazyHash_=null,ae(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),Mw(this.priorityNode_)}static set __childrenNodeConstructor(t){qv=t}static get __childrenNodeConstructor(){return qv}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new It(this.value_,t)}getImmediateChild(t){return t===".priority"?this.priorityNode_:It.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return ze(t)?this:We(t)===".priority"?this.priorityNode_:It.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,n){return null}updateImmediateChild(t,n){return t===".priority"?this.updatePriority(n):n.isEmpty()&&t!==".priority"?this:It.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,n).updatePriority(this.priorityNode_)}updateChild(t,n){const r=We(t);return r===null?n:n.isEmpty()&&r!==".priority"?this:(ae(r!==".priority"||di(t)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,It.__childrenNodeConstructor.EMPTY_NODE.updateChild(it(t),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,n){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+Aw(this.priorityNode_.val())+":");const n=typeof this.value_;t+=n+":",n==="number"?t+=rw(this.value_):t+=this.value_,this.lazyHash_=ew(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===It.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof It.__childrenNodeConstructor?-1:(ae(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const n=typeof t.value_,r=typeof this.value_,i=It.VALUE_TYPE_ORDER.indexOf(n),o=It.VALUE_TYPE_ORDER.indexOf(r);return ae(i>=0,"Unknown leaf type: "+n),ae(o>=0,"Unknown leaf type: "+r),i===o?r==="object"?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:o-i}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){const n=t;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}It.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Iw,Rw;function fN(e){Iw=e}function hN(e){Rw=e}class dN extends cf{compare(t,n){const r=t.node.getPriority(),i=n.node.getPriority(),o=r.compareTo(i);return o===0?Ms(t.name,n.name):o}isDefinedOn(t){return!t.getPriority().isEmpty()}indexedValueChanged(t,n){return!t.getPriority().equals(n.getPriority())}minPost(){return Be.MIN}maxPost(){return new Be(Yi,new It("[PRIORITY-POST]",Rw))}makePost(t,n){const r=Iw(t);return new Be(n,new It("[PRIORITY-POST]",r))}toString(){return".priority"}}const mt=new dN;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pN=Math.log(2);class gN{constructor(t){const n=o=>parseInt(Math.log(o)/pN,10),r=o=>parseInt(Array(o+1).join("1"),2);this.count=n(t+1),this.current_=this.count-1;const i=r(this.count);this.bits_=t+1&i}nextBitIsOne(){const t=!(this.bits_&1<<this.current_);return this.current_--,t}}const sc=function(e,t,n,r){e.sort(t);const i=function(c,f){const h=f-c;let g,d;if(h===0)return null;if(h===1)return g=e[c],d=n?n(g):g,new Rt(d,g.node,Rt.BLACK,null,null);{const _=parseInt(h/2,10)+c,y=i(c,_),w=i(_+1,f);return g=e[_],d=n?n(g):g,new Rt(d,g.node,Rt.BLACK,y,w)}},o=function(c){let f=null,h=null,g=e.length;const d=function(y,w){const m=g-y,b=g;g-=y;const C=i(m+1,b),T=e[m],x=n?n(T):T;_(new Rt(x,T.node,w,null,C))},_=function(y){f?(f.left=y,f=y):(h=y,f=y)};for(let y=0;y<c.count;++y){const w=c.nextBitIsOne(),m=Math.pow(2,c.count-(y+1));w?d(m,Rt.BLACK):(d(m,Rt.BLACK),d(m,Rt.RED))}return h},a=new gN(e.length),u=o(a);return new wn(r||t,u)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ld;const Do={};class Fr{constructor(t,n){this.indexes_=t,this.indexSet_=n}static get Default(){return ae(Do&&mt,"ChildrenNode.ts has not been loaded"),Ld=Ld||new Fr({".priority":Do},{".priority":mt}),Ld}get(t){const n=ss(this.indexes_,t);if(!n)throw new Error("No index defined for "+t);return n instanceof wn?n:null}hasIndex(t){return Yr(this.indexSet_,t.toString())}addIndex(t,n){ae(t!==Zo,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const o=n.getIterator(Be.Wrap);let a=o.getNext();for(;a;)i=i||t.isDefinedOn(a.node),r.push(a),a=o.getNext();let u;i?u=sc(r,t.getCompare()):u=Do;const c=t.toString(),f=Object.assign({},this.indexSet_);f[c]=t;const h=Object.assign({},this.indexes_);return h[c]=u,new Fr(h,f)}addToIndexes(t,n){const r=tc(this.indexes_,(i,o)=>{const a=ss(this.indexSet_,o);if(ae(a,"Missing index implementation for "+o),i===Do)if(a.isDefinedOn(t.node)){const u=[],c=n.getIterator(Be.Wrap);let f=c.getNext();for(;f;)f.name!==t.name&&u.push(f),f=c.getNext();return u.push(t),sc(u,a.getCompare())}else return Do;else{const u=n.get(t.name);let c=i;return u&&(c=c.remove(new Be(t.name,u))),c.insert(t,t.node)}});return new Fr(r,this.indexSet_)}removeFromIndexes(t,n){const r=tc(this.indexes_,i=>{if(i===Do)return i;{const o=n.get(t.name);return o?i.remove(new Be(t.name,o)):i}});return new Fr(r,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ea;class Se{constructor(t,n,r){this.children_=t,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&Mw(this.priorityNode_),this.children_.isEmpty()&&ae(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return ea||(ea=new Se(new wn(Zp),null,Fr.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||ea}updatePriority(t){return this.children_.isEmpty()?this:new Se(this.children_,t,this.indexMap_)}getImmediateChild(t){if(t===".priority")return this.getPriority();{const n=this.children_.get(t);return n===null?ea:n}}getChild(t){const n=We(t);return n===null?this:this.getImmediateChild(n).getChild(it(t))}hasChild(t){return this.children_.get(t)!==null}updateImmediateChild(t,n){if(ae(n,"We should always be passing snapshot nodes"),t===".priority")return this.updatePriority(n);{const r=new Be(t,n);let i,o;n.isEmpty()?(i=this.children_.remove(t),o=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(t,n),o=this.indexMap_.addToIndexes(r,this.children_));const a=i.isEmpty()?ea:this.priorityNode_;return new Se(i,a,o)}}updateChild(t,n){const r=We(t);if(r===null)return n;{ae(We(t)!==".priority"||di(t)===1,".priority must be the last token in a path");const i=this.getImmediateChild(r).updateChild(it(t),n);return this.updateImmediateChild(r,i)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const n={};let r=0,i=0,o=!0;if(this.forEachChild(mt,(a,u)=>{n[a]=u.val(t),r++,o&&Se.INTEGER_REGEXP_.test(a)?i=Math.max(i,Number(a)):o=!1}),!t&&o&&i<2*r){const a=[];for(const u in n)a[u]=n[u];return a}else return t&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let t="";this.getPriority().isEmpty()||(t+="priority:"+Aw(this.getPriority().val())+":"),this.forEachChild(mt,(n,r)=>{const i=r.hash();i!==""&&(t+=":"+n+":"+i)}),this.lazyHash_=t===""?"":ew(t)}return this.lazyHash_}getPredecessorChildName(t,n,r){const i=this.resolveIndex_(r);if(i){const o=i.getPredecessorKey(new Be(t,n));return o?o.name:null}else return this.children_.getPredecessorKey(t)}getFirstChildName(t){const n=this.resolveIndex_(t);if(n){const r=n.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(t){const n=this.getFirstChildName(t);return n?new Be(n,this.children_.get(n)):null}getLastChildName(t){const n=this.resolveIndex_(t);if(n){const r=n.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(t){const n=this.getLastChildName(t);return n?new Be(n,this.children_.get(n)):null}forEachChild(t,n){const r=this.resolveIndex_(t);return r?r.inorderTraversal(i=>n(i.name,i.node)):this.children_.inorderTraversal(n)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,n){const r=this.resolveIndex_(n);if(r)return r.getIteratorFrom(t,i=>i);{const i=this.children_.getIteratorFrom(t.name,Be.Wrap);let o=i.peek();for(;o!=null&&n.compare(o,t)<0;)i.getNext(),o=i.peek();return i}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,n){const r=this.resolveIndex_(n);if(r)return r.getReverseIteratorFrom(t,i=>i);{const i=this.children_.getReverseIteratorFrom(t.name,Be.Wrap);let o=i.peek();for(;o!=null&&n.compare(o,t)>0;)i.getNext(),o=i.peek();return i}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===hu?-1:0}withIndex(t){if(t===Zo||this.indexMap_.hasIndex(t))return this;{const n=this.indexMap_.addIndex(t,this.children_);return new Se(this.children_,this.priorityNode_,n)}}isIndexed(t){return t===Zo||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const n=t;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const r=this.getIterator(mt),i=n.getIterator(mt);let o=r.getNext(),a=i.getNext();for(;o&&a;){if(o.name!==a.name||!o.node.equals(a.node))return!1;o=r.getNext(),a=i.getNext()}return o===null&&a===null}else return!1;else return!1}}resolveIndex_(t){return t===Zo?null:this.indexMap_.get(t.toString())}}Se.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class _N extends Se{constructor(){super(new wn(Zp),Se.EMPTY_NODE,Fr.Default)}compareTo(t){return t===this?0:1}equals(t){return t===this}getPriority(){return this}getImmediateChild(t){return Se.EMPTY_NODE}isEmpty(){return!1}}const hu=new _N;Object.defineProperties(Be,{MIN:{value:new Be(as,Se.EMPTY_NODE)},MAX:{value:new Be(Yi,hu)}});Sw.__EMPTY_NODE=Se.EMPTY_NODE;It.__childrenNodeConstructor=Se;cN(hu);hN(hu);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mN=!0;function Yt(e,t=null){if(e===null)return Se.EMPTY_NODE;if(typeof e=="object"&&".priority"in e&&(t=e[".priority"]),ae(t===null||typeof t=="string"||typeof t=="number"||typeof t=="object"&&".sv"in t,"Invalid priority type found: "+typeof t),typeof e=="object"&&".value"in e&&e[".value"]!==null&&(e=e[".value"]),typeof e!="object"||".sv"in e){const n=e;return new It(n,Yt(t))}if(!(e instanceof Array)&&mN){const n=[];let r=!1;if(xn(e,(a,u)=>{if(a.substring(0,1)!=="."){const c=Yt(u);c.isEmpty()||(r=r||!c.getPriority().isEmpty(),n.push(new Be(a,c)))}}),n.length===0)return Se.EMPTY_NODE;const o=sc(n,lN,a=>a.name,Zp);if(r){const a=sc(n,mt.getCompare());return new Se(o,Yt(t),new Fr({".priority":a},{".priority":mt}))}else return new Se(o,Yt(t),Fr.Default)}else{let n=Se.EMPTY_NODE;return xn(e,(r,i)=>{if(Yr(e,r)&&r.substring(0,1)!=="."){const o=Yt(i);(o.isLeafNode()||!o.isEmpty())&&(n=n.updateImmediateChild(r,o))}}),n.updatePriority(Yt(t))}}fN(Yt);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vN extends cf{constructor(t){super(),this.indexPath_=t,ae(!ze(t)&&We(t)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(t){return t.getChild(this.indexPath_)}isDefinedOn(t){return!t.getChild(this.indexPath_).isEmpty()}compare(t,n){const r=this.extractChild(t.node),i=this.extractChild(n.node),o=r.compareTo(i);return o===0?Ms(t.name,n.name):o}makePost(t,n){const r=Yt(t),i=Se.EMPTY_NODE.updateChild(this.indexPath_,r);return new Be(n,i)}maxPost(){const t=Se.EMPTY_NODE.updateChild(this.indexPath_,hu);return new Be(Yi,t)}toString(){return Tw(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yN extends cf{compare(t,n){const r=t.node.compareTo(n.node);return r===0?Ms(t.name,n.name):r}isDefinedOn(t){return!0}indexedValueChanged(t,n){return!t.equals(n)}minPost(){return Be.MIN}maxPost(){return Be.MAX}makePost(t,n){const r=Yt(t);return new Be(n,r)}toString(){return".value"}}const bN=new yN;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nw(e){return{type:"value",snapshotNode:e}}function us(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function Ba(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function Ua(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}function wN(e,t){return{type:"child_moved",snapshotNode:t,childName:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eg{constructor(t){this.index_=t}updateChild(t,n,r,i,o,a){ae(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");const u=t.getImmediateChild(n);return u.getChild(i).equals(r.getChild(i))&&u.isEmpty()===r.isEmpty()||(a!=null&&(r.isEmpty()?t.hasChild(n)?a.trackChildChange(Ba(n,u)):ae(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):u.isEmpty()?a.trackChildChange(us(n,r)):a.trackChildChange(Ua(n,r,u))),t.isLeafNode()&&r.isEmpty())?t:t.updateImmediateChild(n,r).withIndex(this.index_)}updateFullNode(t,n,r){return r!=null&&(t.isLeafNode()||t.forEachChild(mt,(i,o)=>{n.hasChild(i)||r.trackChildChange(Ba(i,o))}),n.isLeafNode()||n.forEachChild(mt,(i,o)=>{if(t.hasChild(i)){const a=t.getImmediateChild(i);a.equals(o)||r.trackChildChange(Ua(i,o,a))}else r.trackChildChange(us(i,o))})),n.withIndex(this.index_)}updatePriority(t,n){return t.isEmpty()?Se.EMPTY_NODE:t.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wa{constructor(t){this.indexedFilter_=new eg(t.getIndex()),this.index_=t.getIndex(),this.startPost_=Wa.getStartPost_(t),this.endPost_=Wa.getEndPost_(t),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(t){const n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),t)<=0:this.index_.compare(this.getStartPost(),t)<0,r=this.endIsInclusive_?this.index_.compare(t,this.getEndPost())<=0:this.index_.compare(t,this.getEndPost())<0;return n&&r}updateChild(t,n,r,i,o,a){return this.matches(new Be(n,r))||(r=Se.EMPTY_NODE),this.indexedFilter_.updateChild(t,n,r,i,o,a)}updateFullNode(t,n,r){n.isLeafNode()&&(n=Se.EMPTY_NODE);let i=n.withIndex(this.index_);i=i.updatePriority(Se.EMPTY_NODE);const o=this;return n.forEachChild(mt,(a,u)=>{o.matches(new Be(a,u))||(i=i.updateImmediateChild(a,Se.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,i,r)}updatePriority(t,n){return t}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(t){if(t.hasStart()){const n=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),n)}else return t.getIndex().minPost()}static getEndPost_(t){if(t.hasEnd()){const n=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),n)}else return t.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xN{constructor(t){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=n=>{const r=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new Wa(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft(),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}updateChild(t,n,r,i,o,a){return this.rangedFilter_.matches(new Be(n,r))||(r=Se.EMPTY_NODE),t.getImmediateChild(n).equals(r)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,n,r,i,o,a):this.fullLimitUpdateChild_(t,n,r,o,a)}updateFullNode(t,n,r){let i;if(n.isLeafNode()||n.isEmpty())i=Se.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){i=Se.EMPTY_NODE.withIndex(this.index_);let o;this.reverse_?o=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):o=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let a=0;for(;o.hasNext()&&a<this.limit_;){const u=o.getNext();if(this.withinDirectionalStart(u))if(this.withinDirectionalEnd(u))i=i.updateImmediateChild(u.name,u.node),a++;else break;else continue}}else{i=n.withIndex(this.index_),i=i.updatePriority(Se.EMPTY_NODE);let o;this.reverse_?o=i.getReverseIterator(this.index_):o=i.getIterator(this.index_);let a=0;for(;o.hasNext();){const u=o.getNext();a<this.limit_&&this.withinDirectionalStart(u)&&this.withinDirectionalEnd(u)?a++:i=i.updateImmediateChild(u.name,Se.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,i,r)}updatePriority(t,n){return t}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(t,n,r,i,o){let a;if(this.reverse_){const g=this.index_.getCompare();a=(d,_)=>g(_,d)}else a=this.index_.getCompare();const u=t;ae(u.numChildren()===this.limit_,"");const c=new Be(n,r),f=this.reverse_?u.getFirstChild(this.index_):u.getLastChild(this.index_),h=this.rangedFilter_.matches(c);if(u.hasChild(n)){const g=u.getImmediateChild(n);let d=i.getChildAfterChild(this.index_,f,this.reverse_);for(;d!=null&&(d.name===n||u.hasChild(d.name));)d=i.getChildAfterChild(this.index_,d,this.reverse_);const _=d==null?1:a(d,c);if(h&&!r.isEmpty()&&_>=0)return o!=null&&o.trackChildChange(Ua(n,r,g)),u.updateImmediateChild(n,r);{o!=null&&o.trackChildChange(Ba(n,g));const w=u.updateImmediateChild(n,Se.EMPTY_NODE);return d!=null&&this.rangedFilter_.matches(d)?(o!=null&&o.trackChildChange(us(d.name,d.node)),w.updateImmediateChild(d.name,d.node)):w}}else return r.isEmpty()?t:h&&a(f,c)>=0?(o!=null&&(o.trackChildChange(Ba(f.name,f.node)),o.trackChildChange(us(n,r))),u.updateImmediateChild(n,r).updateImmediateChild(f.name,Se.EMPTY_NODE)):t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tg{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=mt}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return ae(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return ae(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:as}hasEnd(){return this.endSet_}getIndexEndValue(){return ae(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return ae(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Yi}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return ae(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===mt}copy(){const t=new tg;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.startAfterSet_=this.startAfterSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.endBeforeSet_=this.endBeforeSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}}function TN(e){return e.loadsAllData()?new eg(e.getIndex()):e.hasLimit()?new xN(e):new Wa(e)}function Yv(e){const t={};if(e.isDefault())return t;let n;if(e.index_===mt?n="$priority":e.index_===bN?n="$value":e.index_===Zo?n="$key":(ae(e.index_ instanceof vN,"Unrecognized index type!"),n=e.index_.toString()),t.orderBy=Nt(n),e.startSet_){const r=e.startAfterSet_?"startAfter":"startAt";t[r]=Nt(e.indexStartValue_),e.startNameSet_&&(t[r]+=","+Nt(e.indexStartName_))}if(e.endSet_){const r=e.endBeforeSet_?"endBefore":"endAt";t[r]=Nt(e.indexEndValue_),e.endNameSet_&&(t[r]+=","+Nt(e.indexEndName_))}return e.limitSet_&&(e.isViewFromLeft()?t.limitToFirst=e.limit_:t.limitToLast=e.limit_),t}function Kv(e){const t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_),t.sin=!e.startAfterSet_),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_),t.ein=!e.endBeforeSet_),e.limitSet_){t.l=e.limit_;let n=e.viewFrom_;n===""&&(e.isViewFromLeft()?n="l":n="r"),t.vf=n}return e.index_!==mt&&(t.i=e.index_.toString()),t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ac extends bw{constructor(t,n,r,i){super(),this.repoInfo_=t,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=cu("p:rest:"),this.listens_={}}reportStats(t){throw new Error("Method not implemented.")}static getListenId_(t,n){return n!==void 0?"tag$"+n:(ae(t._queryParams.isDefault(),"should have a tag if it's not a default query."),t._path.toString())}listen(t,n,r,i){const o=t._path.toString();this.log_("Listen called for "+o+" "+t._queryIdentifier);const a=ac.getListenId_(t,r),u={};this.listens_[a]=u;const c=Yv(t._queryParams);this.restRequest_(o+".json",c,(f,h)=>{let g=h;if(f===404&&(g=null,f=null),f===null&&this.onDataUpdate_(o,g,!1,r),ss(this.listens_,a)===u){let d;f?f===401?d="permission_denied":d="rest_error:"+f:d="ok",i(d,null)}})}unlisten(t,n){const r=ac.getListenId_(t,n);delete this.listens_[r]}get(t){const n=Yv(t._queryParams),r=t._path.toString(),i=new Hp;return this.restRequest_(r+".json",n,(o,a)=>{let u=a;o===404&&(u=null,o=null),o===null?(this.onDataUpdate_(r,u,!1,null),i.resolve(u)):i.reject(new Error(u))}),i.promise}refreshAuthToken(t){}restRequest_(t,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,o])=>{i&&i.accessToken&&(n.auth=i.accessToken),o&&o.token&&(n.ac=o.token);const a=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+t+"?ns="+this.repoInfo_.namespace+ZI(n);this.log_("Sending REST request for "+a);const u=new XMLHttpRequest;u.onreadystatechange=()=>{if(r&&u.readyState===4){this.log_("REST Response for "+a+" received. status:",u.status,"response:",u.responseText);let c=null;if(u.status>=200&&u.status<300){try{c=Oa(u.responseText)}catch{Pn("Failed to parse JSON response for "+a+": "+u.responseText)}r(null,c)}else u.status!==401&&u.status!==404&&Pn("Got unsuccessful REST response for "+a+" Status: "+u.status),r(u.status);r=null}},u.open("GET",a,!0),u.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CN{constructor(){this.rootNode_=Se.EMPTY_NODE}getNode(t){return this.rootNode_.getChild(t)}updateSnapshot(t,n){this.rootNode_=this.rootNode_.updateChild(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uc(){return{value:null,children:new Map}}function Pw(e,t,n){if(ze(t))e.value=n,e.children.clear();else if(e.value!==null)e.value=e.value.updateChild(t,n);else{const r=We(t);e.children.has(r)||e.children.set(r,uc());const i=e.children.get(r);t=it(t),Pw(i,t,n)}}function F0(e,t,n){e.value!==null?n(t,e.value):EN(e,(r,i)=>{const o=new et(t.toString()+"/"+r);F0(i,o,n)})}function EN(e,t){e.children.forEach((n,r)=>{t(r,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SN{constructor(t){this.collection_=t,this.last_=null}get(){const t=this.collection_.get(),n=Object.assign({},t);return this.last_&&xn(this.last_,(r,i)=>{n[r]=n[r]-i}),this.last_=t,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xv=10*1e3,AN=30*1e3,MN=5*60*1e3;class IN{constructor(t,n){this.server_=n,this.statsToReport_={},this.statsListener_=new SN(t);const r=Xv+(AN-Xv)*Math.random();Ca(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const t=this.statsListener_.get(),n={};let r=!1;xn(t,(i,o)=>{o>0&&Yr(this.statsToReport_,i)&&(n[i]=o,r=!0)}),r&&this.server_.reportStats(n),Ca(this.reportStats_.bind(this),Math.floor(Math.random()*2*MN))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var nr;(function(e){e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(nr||(nr={}));function kw(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function ng(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function rg(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lc{constructor(t,n,r){this.path=t,this.affectedTree=n,this.revert=r,this.type=nr.ACK_USER_WRITE,this.source=kw()}operationForChild(t){if(ze(this.path)){if(this.affectedTree.value!=null)return ae(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new et(t));return new lc(Ke(),n,this.revert)}}else return ae(We(this.path)===t,"operationForChild called for unrelated child."),new lc(it(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class za{constructor(t,n){this.source=t,this.path=n,this.type=nr.LISTEN_COMPLETE}operationForChild(t){return ze(this.path)?new za(this.source,Ke()):new za(this.source,it(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ki{constructor(t,n,r){this.source=t,this.path=n,this.snap=r,this.type=nr.OVERWRITE}operationForChild(t){return ze(this.path)?new Ki(this.source,Ke(),this.snap.getImmediateChild(t)):new Ki(this.source,it(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ga{constructor(t,n,r){this.source=t,this.path=n,this.children=r,this.type=nr.MERGE}operationForChild(t){if(ze(this.path)){const n=this.children.subtree(new et(t));return n.isEmpty()?null:n.value?new Ki(this.source,Ke(),n.value):new Ga(this.source,Ke(),n)}else return ae(We(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new Ga(this.source,it(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xi{constructor(t,n,r){this.node_=t,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(t){if(ze(t))return this.isFullyInitialized()&&!this.filtered_;const n=We(t);return this.isCompleteForChild(n)}isCompleteForChild(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RN{constructor(t){this.query_=t,this.index_=this.query_._queryParams.getIndex()}}function NN(e,t,n,r){const i=[],o=[];return t.forEach(a=>{a.type==="child_changed"&&e.index_.indexedValueChanged(a.oldSnap,a.snapshotNode)&&o.push(wN(a.childName,a.snapshotNode))}),ta(e,i,"child_removed",t,r,n),ta(e,i,"child_added",t,r,n),ta(e,i,"child_moved",o,r,n),ta(e,i,"child_changed",t,r,n),ta(e,i,"value",t,r,n),i}function ta(e,t,n,r,i,o){const a=r.filter(u=>u.type===n);a.sort((u,c)=>kN(e,u,c)),a.forEach(u=>{const c=PN(e,u,o);i.forEach(f=>{f.respondsTo(u.type)&&t.push(f.createEvent(c,e.query_))})})}function PN(e,t,n){return t.type==="value"||t.type==="child_removed"||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}function kN(e,t,n){if(t.childName==null||n.childName==null)throw As("Should only compare child_ events.");const r=new Be(t.childName,t.snapshotNode),i=new Be(n.childName,n.snapshotNode);return e.index_.compare(r,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ff(e,t){return{eventCache:e,serverCache:t}}function Ea(e,t,n,r){return ff(new Xi(t,n,r),e.serverCache)}function Dw(e,t,n,r){return ff(e.eventCache,new Xi(t,n,r))}function B0(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function ji(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $d;const DN=()=>($d||($d=new wn(y7)),$d);class st{constructor(t,n=DN()){this.value=t,this.children=n}static fromObject(t){let n=new st(null);return xn(t,(r,i)=>{n=n.set(new et(r),i)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(t,n){if(this.value!=null&&n(this.value))return{path:Ke(),value:this.value};if(ze(t))return null;{const r=We(t),i=this.children.get(r);if(i!==null){const o=i.findRootMostMatchingPathAndValue(it(t),n);return o!=null?{path:Ct(new et(r),o.path),value:o.value}:null}else return null}}findRootMostValueAndPath(t){return this.findRootMostMatchingPathAndValue(t,()=>!0)}subtree(t){if(ze(t))return this;{const n=We(t),r=this.children.get(n);return r!==null?r.subtree(it(t)):new st(null)}}set(t,n){if(ze(t))return new st(n,this.children);{const r=We(t),o=(this.children.get(r)||new st(null)).set(it(t),n),a=this.children.insert(r,o);return new st(this.value,a)}}remove(t){if(ze(t))return this.children.isEmpty()?new st(null):new st(null,this.children);{const n=We(t),r=this.children.get(n);if(r){const i=r.remove(it(t));let o;return i.isEmpty()?o=this.children.remove(n):o=this.children.insert(n,i),this.value===null&&o.isEmpty()?new st(null):new st(this.value,o)}else return this}}get(t){if(ze(t))return this.value;{const n=We(t),r=this.children.get(n);return r?r.get(it(t)):null}}setTree(t,n){if(ze(t))return n;{const r=We(t),o=(this.children.get(r)||new st(null)).setTree(it(t),n);let a;return o.isEmpty()?a=this.children.remove(r):a=this.children.insert(r,o),new st(this.value,a)}}fold(t){return this.fold_(Ke(),t)}fold_(t,n){const r={};return this.children.inorderTraversal((i,o)=>{r[i]=o.fold_(Ct(t,i),n)}),n(t,this.value,r)}findOnPath(t,n){return this.findOnPath_(t,Ke(),n)}findOnPath_(t,n,r){const i=this.value?r(n,this.value):!1;if(i)return i;if(ze(t))return null;{const o=We(t),a=this.children.get(o);return a?a.findOnPath_(it(t),Ct(n,o),r):null}}foreachOnPath(t,n){return this.foreachOnPath_(t,Ke(),n)}foreachOnPath_(t,n,r){if(ze(t))return this;{this.value&&r(n,this.value);const i=We(t),o=this.children.get(i);return o?o.foreachOnPath_(it(t),Ct(n,i),r):new st(null)}}foreach(t){this.foreach_(Ke(),t)}foreach_(t,n){this.children.inorderTraversal((r,i)=>{i.foreach_(Ct(t,r),n)}),this.value&&n(t,this.value)}foreachChild(t){this.children.inorderTraversal((n,r)=>{r.value&&t(n,r.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ir{constructor(t){this.writeTree_=t}static empty(){return new ir(new st(null))}}function Sa(e,t,n){if(ze(t))return new ir(new st(n));{const r=e.writeTree_.findRootMostValueAndPath(t);if(r!=null){const i=r.path;let o=r.value;const a=bn(i,t);return o=o.updateChild(a,n),new ir(e.writeTree_.set(i,o))}else{const i=new st(n),o=e.writeTree_.setTree(t,i);return new ir(o)}}}function jv(e,t,n){let r=e;return xn(n,(i,o)=>{r=Sa(r,Ct(t,i),o)}),r}function Qv(e,t){if(ze(t))return ir.empty();{const n=e.writeTree_.setTree(t,new st(null));return new ir(n)}}function U0(e,t){return uo(e,t)!=null}function uo(e,t){const n=e.writeTree_.findRootMostValueAndPath(t);return n!=null?e.writeTree_.get(n.path).getChild(bn(n.path,t)):null}function Jv(e){const t=[],n=e.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(mt,(r,i)=>{t.push(new Be(r,i))}):e.writeTree_.children.inorderTraversal((r,i)=>{i.value!=null&&t.push(new Be(r,i.value))}),t}function fi(e,t){if(ze(t))return e;{const n=uo(e,t);return n!=null?new ir(new st(n)):new ir(e.writeTree_.subtree(t))}}function W0(e){return e.writeTree_.isEmpty()}function ls(e,t){return Ow(Ke(),e.writeTree_,t)}function Ow(e,t,n){if(t.value!=null)return n.updateChild(e,t.value);{let r=null;return t.children.inorderTraversal((i,o)=>{i===".priority"?(ae(o.value!==null,"Priority writes must always be leaf nodes"),r=o.value):n=Ow(Ct(e,i),o,n)}),!n.getChild(e).isEmpty()&&r!==null&&(n=n.updateChild(Ct(e,".priority"),r)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ig(e,t){return Bw(t,e)}function ON(e,t,n,r,i){ae(r>e.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),e.allWrites.push({path:t,snap:n,writeId:r,visible:i}),i&&(e.visibleWrites=Sa(e.visibleWrites,t,n)),e.lastWriteId=r}function LN(e,t){for(let n=0;n<e.allWrites.length;n++){const r=e.allWrites[n];if(r.writeId===t)return r}return null}function $N(e,t){const n=e.allWrites.findIndex(u=>u.writeId===t);ae(n>=0,"removeWrite called with nonexistent writeId.");const r=e.allWrites[n];e.allWrites.splice(n,1);let i=r.visible,o=!1,a=e.allWrites.length-1;for(;i&&a>=0;){const u=e.allWrites[a];u.visible&&(a>=n&&FN(u,r.path)?i=!1:tr(r.path,u.path)&&(o=!0)),a--}if(i){if(o)return BN(e),!0;if(r.snap)e.visibleWrites=Qv(e.visibleWrites,r.path);else{const u=r.children;xn(u,c=>{e.visibleWrites=Qv(e.visibleWrites,Ct(r.path,c))})}return!0}else return!1}function FN(e,t){if(e.snap)return tr(e.path,t);for(const n in e.children)if(e.children.hasOwnProperty(n)&&tr(Ct(e.path,n),t))return!0;return!1}function BN(e){e.visibleWrites=Lw(e.allWrites,UN,Ke()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}function UN(e){return e.visible}function Lw(e,t,n){let r=ir.empty();for(let i=0;i<e.length;++i){const o=e[i];if(t(o)){const a=o.path;let u;if(o.snap)tr(n,a)?(u=bn(n,a),r=Sa(r,u,o.snap)):tr(a,n)&&(u=bn(a,n),r=Sa(r,Ke(),o.snap.getChild(u)));else if(o.children){if(tr(n,a))u=bn(n,a),r=jv(r,u,o.children);else if(tr(a,n))if(u=bn(a,n),ze(u))r=jv(r,Ke(),o.children);else{const c=ss(o.children,We(u));if(c){const f=c.getChild(it(u));r=Sa(r,Ke(),f)}}}else throw As("WriteRecord should have .snap or .children")}}return r}function $w(e,t,n,r,i){if(!r&&!i){const o=uo(e.visibleWrites,t);if(o!=null)return o;{const a=fi(e.visibleWrites,t);if(W0(a))return n;if(n==null&&!U0(a,Ke()))return null;{const u=n||Se.EMPTY_NODE;return ls(a,u)}}}else{const o=fi(e.visibleWrites,t);if(!i&&W0(o))return n;if(!i&&n==null&&!U0(o,Ke()))return null;{const a=function(f){return(f.visible||i)&&(!r||!~r.indexOf(f.writeId))&&(tr(f.path,t)||tr(t,f.path))},u=Lw(e.allWrites,a,t),c=n||Se.EMPTY_NODE;return ls(u,c)}}}function WN(e,t,n){let r=Se.EMPTY_NODE;const i=uo(e.visibleWrites,t);if(i)return i.isLeafNode()||i.forEachChild(mt,(o,a)=>{r=r.updateImmediateChild(o,a)}),r;if(n){const o=fi(e.visibleWrites,t);return n.forEachChild(mt,(a,u)=>{const c=ls(fi(o,new et(a)),u);r=r.updateImmediateChild(a,c)}),Jv(o).forEach(a=>{r=r.updateImmediateChild(a.name,a.node)}),r}else{const o=fi(e.visibleWrites,t);return Jv(o).forEach(a=>{r=r.updateImmediateChild(a.name,a.node)}),r}}function zN(e,t,n,r,i){ae(r||i,"Either existingEventSnap or existingServerSnap must exist");const o=Ct(t,n);if(U0(e.visibleWrites,o))return null;{const a=fi(e.visibleWrites,o);return W0(a)?i.getChild(n):ls(a,i.getChild(n))}}function GN(e,t,n,r){const i=Ct(t,n),o=uo(e.visibleWrites,i);if(o!=null)return o;if(r.isCompleteForChild(n)){const a=fi(e.visibleWrites,i);return ls(a,r.getNode().getImmediateChild(n))}else return null}function VN(e,t){return uo(e.visibleWrites,t)}function HN(e,t,n,r,i,o,a){let u;const c=fi(e.visibleWrites,t),f=uo(c,Ke());if(f!=null)u=f;else if(n!=null)u=ls(c,n);else return[];if(u=u.withIndex(a),!u.isEmpty()&&!u.isLeafNode()){const h=[],g=a.getCompare(),d=o?u.getReverseIteratorFrom(r,a):u.getIteratorFrom(r,a);let _=d.getNext();for(;_&&h.length<i;)g(_,r)!==0&&h.push(_),_=d.getNext();return h}else return[]}function qN(){return{visibleWrites:ir.empty(),allWrites:[],lastWriteId:-1}}function cc(e,t,n,r){return $w(e.writeTree,e.treePath,t,n,r)}function og(e,t){return WN(e.writeTree,e.treePath,t)}function Zv(e,t,n,r){return zN(e.writeTree,e.treePath,t,n,r)}function fc(e,t){return VN(e.writeTree,Ct(e.treePath,t))}function YN(e,t,n,r,i,o){return HN(e.writeTree,e.treePath,t,n,r,i,o)}function sg(e,t,n){return GN(e.writeTree,e.treePath,t,n)}function Fw(e,t){return Bw(Ct(e.treePath,t),e.writeTree)}function Bw(e,t){return{treePath:e,writeTree:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KN{constructor(){this.changeMap=new Map}trackChildChange(t){const n=t.type,r=t.childName;ae(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),ae(r!==".priority","Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const o=i.type;if(n==="child_added"&&o==="child_removed")this.changeMap.set(r,Ua(r,t.snapshotNode,i.snapshotNode));else if(n==="child_removed"&&o==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&o==="child_changed")this.changeMap.set(r,Ba(r,i.oldSnap));else if(n==="child_changed"&&o==="child_added")this.changeMap.set(r,us(r,t.snapshotNode));else if(n==="child_changed"&&o==="child_changed")this.changeMap.set(r,Ua(r,t.snapshotNode,i.oldSnap));else throw As("Illegal combination of changes: "+t+" occurred after "+i)}else this.changeMap.set(r,t)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XN{getCompleteChild(t){return null}getChildAfterChild(t,n,r){return null}}const Uw=new XN;class ag{constructor(t,n,r=null){this.writes_=t,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(t){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(t))return n.getNode().getImmediateChild(t);{const r=this.optCompleteServerCache_!=null?new Xi(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return sg(this.writes_,t,r)}}getChildAfterChild(t,n,r){const i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:ji(this.viewCache_),o=YN(this.writes_,i,n,1,r,t);return o.length===0?null:o[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jN(e){return{filter:e}}function QN(e,t){ae(t.eventCache.getNode().isIndexed(e.filter.getIndex()),"Event snap not indexed"),ae(t.serverCache.getNode().isIndexed(e.filter.getIndex()),"Server snap not indexed")}function JN(e,t,n,r,i){const o=new KN;let a,u;if(n.type===nr.OVERWRITE){const f=n;f.source.fromUser?a=z0(e,t,f.path,f.snap,r,i,o):(ae(f.source.fromServer,"Unknown source."),u=f.source.tagged||t.serverCache.isFiltered()&&!ze(f.path),a=hc(e,t,f.path,f.snap,r,i,u,o))}else if(n.type===nr.MERGE){const f=n;f.source.fromUser?a=e9(e,t,f.path,f.children,r,i,o):(ae(f.source.fromServer,"Unknown source."),u=f.source.tagged||t.serverCache.isFiltered(),a=G0(e,t,f.path,f.children,r,i,u,o))}else if(n.type===nr.ACK_USER_WRITE){const f=n;f.revert?a=r9(e,t,f.path,r,i,o):a=t9(e,t,f.path,f.affectedTree,r,i,o)}else if(n.type===nr.LISTEN_COMPLETE)a=n9(e,t,n.path,r,o);else throw As("Unknown operation type: "+n.type);const c=o.getChanges();return ZN(t,a,c),{viewCache:a,changes:c}}function ZN(e,t,n){const r=t.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=B0(e);(n.length>0||!e.eventCache.isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push(Nw(B0(t)))}}function Ww(e,t,n,r,i,o){const a=t.eventCache;if(fc(r,n)!=null)return t;{let u,c;if(ze(n))if(ae(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){const f=ji(t),h=f instanceof Se?f:Se.EMPTY_NODE,g=og(r,h);u=e.filter.updateFullNode(t.eventCache.getNode(),g,o)}else{const f=cc(r,ji(t));u=e.filter.updateFullNode(t.eventCache.getNode(),f,o)}else{const f=We(n);if(f===".priority"){ae(di(n)===1,"Can't have a priority with additional path components");const h=a.getNode();c=t.serverCache.getNode();const g=Zv(r,n,h,c);g!=null?u=e.filter.updatePriority(h,g):u=a.getNode()}else{const h=it(n);let g;if(a.isCompleteForChild(f)){c=t.serverCache.getNode();const d=Zv(r,n,a.getNode(),c);d!=null?g=a.getNode().getImmediateChild(f).updateChild(h,d):g=a.getNode().getImmediateChild(f)}else g=sg(r,f,t.serverCache);g!=null?u=e.filter.updateChild(a.getNode(),f,g,h,i,o):u=a.getNode()}}return Ea(t,u,a.isFullyInitialized()||ze(n),e.filter.filtersNodes())}}function hc(e,t,n,r,i,o,a,u){const c=t.serverCache;let f;const h=a?e.filter:e.filter.getIndexedFilter();if(ze(n))f=h.updateFullNode(c.getNode(),r,null);else if(h.filtersNodes()&&!c.isFiltered()){const _=c.getNode().updateChild(n,r);f=h.updateFullNode(c.getNode(),_,null)}else{const _=We(n);if(!c.isCompleteForPath(n)&&di(n)>1)return t;const y=it(n),m=c.getNode().getImmediateChild(_).updateChild(y,r);_===".priority"?f=h.updatePriority(c.getNode(),m):f=h.updateChild(c.getNode(),_,m,y,Uw,null)}const g=Dw(t,f,c.isFullyInitialized()||ze(n),h.filtersNodes()),d=new ag(i,g,o);return Ww(e,g,n,i,d,u)}function z0(e,t,n,r,i,o,a){const u=t.eventCache;let c,f;const h=new ag(i,t,o);if(ze(n))f=e.filter.updateFullNode(t.eventCache.getNode(),r,a),c=Ea(t,f,!0,e.filter.filtersNodes());else{const g=We(n);if(g===".priority")f=e.filter.updatePriority(t.eventCache.getNode(),r),c=Ea(t,f,u.isFullyInitialized(),u.isFiltered());else{const d=it(n),_=u.getNode().getImmediateChild(g);let y;if(ze(d))y=r;else{const w=h.getCompleteChild(g);w!=null?xw(d)===".priority"&&w.getChild(Cw(d)).isEmpty()?y=w:y=w.updateChild(d,r):y=Se.EMPTY_NODE}if(_.equals(y))c=t;else{const w=e.filter.updateChild(u.getNode(),g,y,d,h,a);c=Ea(t,w,u.isFullyInitialized(),e.filter.filtersNodes())}}}return c}function ey(e,t){return e.eventCache.isCompleteForChild(t)}function e9(e,t,n,r,i,o,a){let u=t;return r.foreach((c,f)=>{const h=Ct(n,c);ey(t,We(h))&&(u=z0(e,u,h,f,i,o,a))}),r.foreach((c,f)=>{const h=Ct(n,c);ey(t,We(h))||(u=z0(e,u,h,f,i,o,a))}),u}function ty(e,t,n){return n.foreach((r,i)=>{t=t.updateChild(r,i)}),t}function G0(e,t,n,r,i,o,a,u){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let c=t,f;ze(n)?f=r:f=new st(null).setTree(n,r);const h=t.serverCache.getNode();return f.children.inorderTraversal((g,d)=>{if(h.hasChild(g)){const _=t.serverCache.getNode().getImmediateChild(g),y=ty(e,_,d);c=hc(e,c,new et(g),y,i,o,a,u)}}),f.children.inorderTraversal((g,d)=>{const _=!t.serverCache.isCompleteForChild(g)&&d.value===null;if(!h.hasChild(g)&&!_){const y=t.serverCache.getNode().getImmediateChild(g),w=ty(e,y,d);c=hc(e,c,new et(g),w,i,o,a,u)}}),c}function t9(e,t,n,r,i,o,a){if(fc(i,n)!=null)return t;const u=t.serverCache.isFiltered(),c=t.serverCache;if(r.value!=null){if(ze(n)&&c.isFullyInitialized()||c.isCompleteForPath(n))return hc(e,t,n,c.getNode().getChild(n),i,o,u,a);if(ze(n)){let f=new st(null);return c.getNode().forEachChild(Zo,(h,g)=>{f=f.set(new et(h),g)}),G0(e,t,n,f,i,o,u,a)}else return t}else{let f=new st(null);return r.foreach((h,g)=>{const d=Ct(n,h);c.isCompleteForPath(d)&&(f=f.set(h,c.getNode().getChild(d)))}),G0(e,t,n,f,i,o,u,a)}}function n9(e,t,n,r,i){const o=t.serverCache,a=Dw(t,o.getNode(),o.isFullyInitialized()||ze(n),o.isFiltered());return Ww(e,a,n,r,Uw,i)}function r9(e,t,n,r,i,o){let a;if(fc(r,n)!=null)return t;{const u=new ag(r,t,i),c=t.eventCache.getNode();let f;if(ze(n)||We(n)===".priority"){let h;if(t.serverCache.isFullyInitialized())h=cc(r,ji(t));else{const g=t.serverCache.getNode();ae(g instanceof Se,"serverChildren would be complete if leaf node"),h=og(r,g)}h=h,f=e.filter.updateFullNode(c,h,o)}else{const h=We(n);let g=sg(r,h,t.serverCache);g==null&&t.serverCache.isCompleteForChild(h)&&(g=c.getImmediateChild(h)),g!=null?f=e.filter.updateChild(c,h,g,it(n),u,o):t.eventCache.getNode().hasChild(h)?f=e.filter.updateChild(c,h,Se.EMPTY_NODE,it(n),u,o):f=c,f.isEmpty()&&t.serverCache.isFullyInitialized()&&(a=cc(r,ji(t)),a.isLeafNode()&&(f=e.filter.updateFullNode(f,a,o)))}return a=t.serverCache.isFullyInitialized()||fc(r,Ke())!=null,Ea(t,f,a,e.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i9{constructor(t,n){this.query_=t,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new eg(r.getIndex()),o=TN(r);this.processor_=jN(o);const a=n.serverCache,u=n.eventCache,c=i.updateFullNode(Se.EMPTY_NODE,a.getNode(),null),f=o.updateFullNode(Se.EMPTY_NODE,u.getNode(),null),h=new Xi(c,a.isFullyInitialized(),i.filtersNodes()),g=new Xi(f,u.isFullyInitialized(),o.filtersNodes());this.viewCache_=ff(g,h),this.eventGenerator_=new RN(this.query_)}get query(){return this.query_}}function o9(e){return e.viewCache_.serverCache.getNode()}function s9(e,t){const n=ji(e.viewCache_);return n&&(e.query._queryParams.loadsAllData()||!ze(t)&&!n.getImmediateChild(We(t)).isEmpty())?n.getChild(t):null}function ny(e){return e.eventRegistrations_.length===0}function a9(e,t){e.eventRegistrations_.push(t)}function ry(e,t,n){const r=[];if(n){ae(t==null,"A cancel should cancel all event registrations.");const i=e.query._path;e.eventRegistrations_.forEach(o=>{const a=o.createCancelEvent(n,i);a&&r.push(a)})}if(t){let i=[];for(let o=0;o<e.eventRegistrations_.length;++o){const a=e.eventRegistrations_[o];if(!a.matches(t))i.push(a);else if(t.hasAnyCallback()){i=i.concat(e.eventRegistrations_.slice(o+1));break}}e.eventRegistrations_=i}else e.eventRegistrations_=[];return r}function iy(e,t,n,r){t.type===nr.MERGE&&t.source.queryId!==null&&(ae(ji(e.viewCache_),"We should always have a full cache before handling merges"),ae(B0(e.viewCache_),"Missing event cache, even though we have a server cache"));const i=e.viewCache_,o=JN(e.processor_,i,t,n,r);return QN(e.processor_,o.viewCache),ae(o.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=o.viewCache,zw(e,o.changes,o.viewCache.eventCache.getNode(),null)}function u9(e,t){const n=e.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(mt,(o,a)=>{r.push(us(o,a))}),n.isFullyInitialized()&&r.push(Nw(n.getNode())),zw(e,r,n.getNode(),t)}function zw(e,t,n,r){const i=r?[r]:e.eventRegistrations_;return NN(e.eventGenerator_,t,n,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let dc;class l9{constructor(){this.views=new Map}}function c9(e){ae(!dc,"__referenceConstructor has already been defined"),dc=e}function f9(){return ae(dc,"Reference.ts has not been loaded"),dc}function h9(e){return e.views.size===0}function ug(e,t,n,r){const i=t.source.queryId;if(i!==null){const o=e.views.get(i);return ae(o!=null,"SyncTree gave us an op for an invalid query."),iy(o,t,n,r)}else{let o=[];for(const a of e.views.values())o=o.concat(iy(a,t,n,r));return o}}function d9(e,t,n,r,i){const o=t._queryIdentifier,a=e.views.get(o);if(!a){let u=cc(n,i?r:null),c=!1;u?c=!0:r instanceof Se?(u=og(n,r),c=!1):(u=Se.EMPTY_NODE,c=!1);const f=ff(new Xi(u,c,!1),new Xi(r,i,!1));return new i9(t,f)}return a}function p9(e,t,n,r,i,o){const a=d9(e,t,r,i,o);return e.views.has(t._queryIdentifier)||e.views.set(t._queryIdentifier,a),a9(a,n),u9(a,n)}function g9(e,t,n,r){const i=t._queryIdentifier,o=[];let a=[];const u=pi(e);if(i==="default")for(const[c,f]of e.views.entries())a=a.concat(ry(f,n,r)),ny(f)&&(e.views.delete(c),f.query._queryParams.loadsAllData()||o.push(f.query));else{const c=e.views.get(i);c&&(a=a.concat(ry(c,n,r)),ny(c)&&(e.views.delete(i),c.query._queryParams.loadsAllData()||o.push(c.query)))}return u&&!pi(e)&&o.push(new(f9())(t._repo,t._path)),{removed:o,events:a}}function Gw(e){const t=[];for(const n of e.views.values())n.query._queryParams.loadsAllData()||t.push(n);return t}function es(e,t){let n=null;for(const r of e.views.values())n=n||s9(r,t);return n}function Vw(e,t){if(t._queryParams.loadsAllData())return hf(e);{const r=t._queryIdentifier;return e.views.get(r)}}function Hw(e,t){return Vw(e,t)!=null}function pi(e){return hf(e)!=null}function hf(e){for(const t of e.views.values())if(t.query._queryParams.loadsAllData())return t;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let pc;function _9(e){ae(!pc,"__referenceConstructor has already been defined"),pc=e}function m9(){return ae(pc,"Reference.ts has not been loaded"),pc}let v9=1;class oy{constructor(t){this.listenProvider_=t,this.syncPointTree_=new st(null),this.pendingWriteTree_=qN(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function y9(e,t,n,r,i){return ON(e.pendingWriteTree_,t,n,r,i),i?du(e,new Ki(kw(),t,n)):[]}function Ko(e,t,n=!1){const r=LN(e.pendingWriteTree_,t);if($N(e.pendingWriteTree_,t)){let o=new st(null);return r.snap!=null?o=o.set(Ke(),!0):xn(r.children,a=>{o=o.set(new et(a),!0)}),du(e,new lc(r.path,o,n))}else return[]}function df(e,t,n){return du(e,new Ki(ng(),t,n))}function b9(e,t,n){const r=st.fromObject(n);return du(e,new Ga(ng(),t,r))}function w9(e,t){return du(e,new za(ng(),t))}function x9(e,t,n){const r=lg(e,n);if(r){const i=cg(r),o=i.path,a=i.queryId,u=bn(o,t),c=new za(rg(a),u);return fg(e,o,c)}else return[]}function V0(e,t,n,r,i=!1){const o=t._path,a=e.syncPointTree_.get(o);let u=[];if(a&&(t._queryIdentifier==="default"||Hw(a,t))){const c=g9(a,t,n,r);h9(a)&&(e.syncPointTree_=e.syncPointTree_.remove(o));const f=c.removed;if(u=c.events,!i){const h=f.findIndex(d=>d._queryParams.loadsAllData())!==-1,g=e.syncPointTree_.findOnPath(o,(d,_)=>pi(_));if(h&&!g){const d=e.syncPointTree_.subtree(o);if(!d.isEmpty()){const _=E9(d);for(let y=0;y<_.length;++y){const w=_[y],m=w.query,b=Xw(e,w);e.listenProvider_.startListening(Aa(m),gc(e,m),b.hashFn,b.onComplete)}}}!g&&f.length>0&&!r&&(h?e.listenProvider_.stopListening(Aa(t),null):f.forEach(d=>{const _=e.queryToTagMap.get(pf(d));e.listenProvider_.stopListening(Aa(d),_)}))}S9(e,f)}return u}function T9(e,t,n,r){const i=lg(e,r);if(i!=null){const o=cg(i),a=o.path,u=o.queryId,c=bn(a,t),f=new Ki(rg(u),c,n);return fg(e,a,f)}else return[]}function C9(e,t,n,r){const i=lg(e,r);if(i){const o=cg(i),a=o.path,u=o.queryId,c=bn(a,t),f=st.fromObject(n),h=new Ga(rg(u),c,f);return fg(e,a,h)}else return[]}function sy(e,t,n,r=!1){const i=t._path;let o=null,a=!1;e.syncPointTree_.foreachOnPath(i,(d,_)=>{const y=bn(d,i);o=o||es(_,y),a=a||pi(_)});let u=e.syncPointTree_.get(i);u?(a=a||pi(u),o=o||es(u,Ke())):(u=new l9,e.syncPointTree_=e.syncPointTree_.set(i,u));let c;o!=null?c=!0:(c=!1,o=Se.EMPTY_NODE,e.syncPointTree_.subtree(i).foreachChild((_,y)=>{const w=es(y,Ke());w&&(o=o.updateImmediateChild(_,w))}));const f=Hw(u,t);if(!f&&!t._queryParams.loadsAllData()){const d=pf(t);ae(!e.queryToTagMap.has(d),"View does not exist, but we have a tag");const _=A9();e.queryToTagMap.set(d,_),e.tagToQueryMap.set(_,d)}const h=ig(e.pendingWriteTree_,i);let g=p9(u,t,n,h,o,c);if(!f&&!a&&!r){const d=Vw(u,t);g=g.concat(M9(e,t,d))}return g}function qw(e,t,n){const i=e.pendingWriteTree_,o=e.syncPointTree_.findOnPath(t,(a,u)=>{const c=bn(a,t),f=es(u,c);if(f)return f});return $w(i,t,o,n,!0)}function du(e,t){return Yw(t,e.syncPointTree_,null,ig(e.pendingWriteTree_,Ke()))}function Yw(e,t,n,r){if(ze(e.path))return Kw(e,t,n,r);{const i=t.get(Ke());n==null&&i!=null&&(n=es(i,Ke()));let o=[];const a=We(e.path),u=e.operationForChild(a),c=t.children.get(a);if(c&&u){const f=n?n.getImmediateChild(a):null,h=Fw(r,a);o=o.concat(Yw(u,c,f,h))}return i&&(o=o.concat(ug(i,e,r,n))),o}}function Kw(e,t,n,r){const i=t.get(Ke());n==null&&i!=null&&(n=es(i,Ke()));let o=[];return t.children.inorderTraversal((a,u)=>{const c=n?n.getImmediateChild(a):null,f=Fw(r,a),h=e.operationForChild(a);h&&(o=o.concat(Kw(h,u,c,f)))}),i&&(o=o.concat(ug(i,e,r,n))),o}function Xw(e,t){const n=t.query,r=gc(e,n);return{hashFn:()=>(o9(t)||Se.EMPTY_NODE).hash(),onComplete:i=>{if(i==="ok")return r?x9(e,n._path,r):w9(e,n._path);{const o=x7(i,n);return V0(e,n,null,o)}}}}function gc(e,t){const n=pf(t);return e.queryToTagMap.get(n)}function pf(e){return e._path.toString()+"$"+e._queryIdentifier}function lg(e,t){return e.tagToQueryMap.get(t)}function cg(e){const t=e.indexOf("$");return ae(t!==-1&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new et(e.substr(0,t))}}function fg(e,t,n){const r=e.syncPointTree_.get(t);ae(r,"Missing sync point for query tag that we're tracking");const i=ig(e.pendingWriteTree_,t);return ug(r,n,i,null)}function E9(e){return e.fold((t,n,r)=>{if(n&&pi(n))return[hf(n)];{let i=[];return n&&(i=Gw(n)),xn(r,(o,a)=>{i=i.concat(a)}),i}})}function Aa(e){return e._queryParams.loadsAllData()&&!e._queryParams.isDefault()?new(m9())(e._repo,e._path):e}function S9(e,t){for(let n=0;n<t.length;++n){const r=t[n];if(!r._queryParams.loadsAllData()){const i=pf(r),o=e.queryToTagMap.get(i);e.queryToTagMap.delete(i),e.tagToQueryMap.delete(o)}}}function A9(){return v9++}function M9(e,t,n){const r=t._path,i=gc(e,t),o=Xw(e,n),a=e.listenProvider_.startListening(Aa(t),i,o.hashFn,o.onComplete),u=e.syncPointTree_.subtree(r);if(i)ae(!pi(u.value),"If we're adding a query, it shouldn't be shadowed");else{const c=u.fold((f,h,g)=>{if(!ze(f)&&h&&pi(h))return[hf(h).query];{let d=[];return h&&(d=d.concat(Gw(h).map(_=>_.query))),xn(g,(_,y)=>{d=d.concat(y)}),d}});for(let f=0;f<c.length;++f){const h=c[f];e.listenProvider_.stopListening(Aa(h),gc(e,h))}}return a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hg{constructor(t){this.node_=t}getImmediateChild(t){const n=this.node_.getImmediateChild(t);return new hg(n)}node(){return this.node_}}class dg{constructor(t,n){this.syncTree_=t,this.path_=n}getImmediateChild(t){const n=Ct(this.path_,t);return new dg(this.syncTree_,n)}node(){return qw(this.syncTree_,this.path_)}}const I9=function(e){return e=e||{},e.timestamp=e.timestamp||new Date().getTime(),e},ay=function(e,t,n){if(!e||typeof e!="object")return e;if(ae(".sv"in e,"Unexpected leaf node or priority contents"),typeof e[".sv"]=="string")return R9(e[".sv"],t,n);if(typeof e[".sv"]=="object")return N9(e[".sv"],t);ae(!1,"Unexpected server value: "+JSON.stringify(e,null,2))},R9=function(e,t,n){switch(e){case"timestamp":return n.timestamp;default:ae(!1,"Unexpected server value: "+e)}},N9=function(e,t,n){e.hasOwnProperty("increment")||ae(!1,"Unexpected server value: "+JSON.stringify(e,null,2));const r=e.increment;typeof r!="number"&&ae(!1,"Unexpected increment value: "+r);const i=t.node();if(ae(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const a=i.getValue();return typeof a!="number"?r:a+r},P9=function(e,t,n,r){return pg(t,new dg(n,e),r)},k9=function(e,t,n){return pg(e,new hg(t),n)};function pg(e,t,n){const r=e.getPriority().val(),i=ay(r,t.getImmediateChild(".priority"),n);let o;if(e.isLeafNode()){const a=e,u=ay(a.getValue(),t,n);return u!==a.getValue()||i!==a.getPriority().val()?new It(u,Yt(i)):e}else{const a=e;return o=a,i!==a.getPriority().val()&&(o=o.updatePriority(new It(i))),a.forEachChild(mt,(u,c)=>{const f=pg(c,t.getImmediateChild(u),n);f!==c&&(o=o.updateImmediateChild(u,f))}),o}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gg{constructor(t="",n=null,r={children:{},childCount:0}){this.name=t,this.parent=n,this.node=r}}function _g(e,t){let n=t instanceof et?t:new et(t),r=e,i=We(n);for(;i!==null;){const o=ss(r.node.children,i)||{children:{},childCount:0};r=new gg(i,r,o),n=it(n),i=We(n)}return r}function Is(e){return e.node.value}function jw(e,t){e.node.value=t,H0(e)}function Qw(e){return e.node.childCount>0}function D9(e){return Is(e)===void 0&&!Qw(e)}function gf(e,t){xn(e.node.children,(n,r)=>{t(new gg(n,e,r))})}function Jw(e,t,n,r){n&&!r&&t(e),gf(e,i=>{Jw(i,t,!0,r)}),n&&r&&t(e)}function O9(e,t,n){let r=e.parent;for(;r!==null;){if(t(r))return!0;r=r.parent}return!1}function pu(e){return new et(e.parent===null?e.name:pu(e.parent)+"/"+e.name)}function H0(e){e.parent!==null&&L9(e.parent,e.name,e)}function L9(e,t,n){const r=D9(n),i=Yr(e.node.children,t);r&&i?(delete e.node.children[t],e.node.childCount--,H0(e)):!r&&!i&&(e.node.children[t]=n.node,e.node.childCount++,H0(e))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $9=/[\[\].#$\/\u0000-\u001F\u007F]/,F9=/[\[\].#$\u0000-\u001F\u007F]/,Fd=10*1024*1024,Zw=function(e){return typeof e=="string"&&e.length!==0&&!$9.test(e)},ex=function(e){return typeof e=="string"&&e.length!==0&&!F9.test(e)},B9=function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),ex(e)},tx=function(e,t,n){const r=n instanceof et?new tN(n,e):n;if(t===void 0)throw new Error(e+"contains undefined "+Li(r));if(typeof t=="function")throw new Error(e+"contains a function "+Li(r)+" with contents = "+t.toString());if(tw(t))throw new Error(e+"contains "+t.toString()+" "+Li(r));if(typeof t=="string"&&t.length>Fd/3&&uf(t)>Fd)throw new Error(e+"contains a string greater than "+Fd+" utf8 bytes "+Li(r)+" ('"+t.substring(0,50)+"...')");if(t&&typeof t=="object"){let i=!1,o=!1;if(xn(t,(a,u)=>{if(a===".value")i=!0;else if(a!==".priority"&&a!==".sv"&&(o=!0,!Zw(a)))throw new Error(e+" contains an invalid key ("+a+") "+Li(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);nN(r,a),tx(e,u,r),rN(r)}),i&&o)throw new Error(e+' contains ".value" child '+Li(r)+" in addition to actual children.")}},nx=function(e,t,n,r){if(!ex(n))throw new Error(q2(e,t)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},U9=function(e,t,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),nx(e,t,n)},W9=function(e,t){const n=t.path.toString();if(typeof t.repoInfo.host!="string"||t.repoInfo.host.length===0||!Zw(t.repoInfo.namespace)&&t.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!B9(n))throw new Error(q2(e,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z9{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function rx(e,t){let n=null;for(let r=0;r<t.length;r++){const i=t[r],o=i.getPath();n!==null&&!Qp(o,n.path)&&(e.eventLists_.push(n),n=null),n===null&&(n={events:[],path:o}),n.events.push(i)}n&&e.eventLists_.push(n)}function ix(e,t,n){rx(e,n),ox(e,r=>Qp(r,t))}function lo(e,t,n){rx(e,n),ox(e,r=>tr(r,t)||tr(t,r))}function ox(e,t){e.recursionDepth_++;let n=!0;for(let r=0;r<e.eventLists_.length;r++){const i=e.eventLists_[r];if(i){const o=i.path;t(o)?(G9(e.eventLists_[r]),e.eventLists_[r]=null):n=!1}}n&&(e.eventLists_=[]),e.recursionDepth_--}function G9(e){for(let t=0;t<e.events.length;t++){const n=e.events[t];if(n!==null){e.events[t]=null;const r=n.getEventRunner();Ta&&qt("event: "+n.toString()),fu(r)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V9="repo_interrupt",H9=25;class q9{constructor(t,n,r,i){this.repoInfo_=t,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new z9,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=uc(),this.transactionQueueTree_=new gg,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function Y9(e,t,n){if(e.stats_=Xp(e.repoInfo_),e.forceRestClient_||S7())e.server_=new ac(e.repoInfo_,(r,i,o,a)=>{uy(e,r,i,o,a)},e.authTokenProvider_,e.appCheckProvider_),setTimeout(()=>ly(e,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Nt(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}e.persistentConnection_=new zr(e.repoInfo_,t,(r,i,o,a)=>{uy(e,r,i,o,a)},r=>{ly(e,r)},r=>{X9(e,r)},e.authTokenProvider_,e.appCheckProvider_,n),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener(r=>{e.server_.refreshAuthToken(r)}),e.appCheckProvider_.addTokenChangeListener(r=>{e.server_.refreshAppCheckToken(r.token)}),e.statsReporter_=N7(e.repoInfo_,()=>new IN(e.stats_,e.server_)),e.infoData_=new CN,e.infoSyncTree_=new oy({startListening:(r,i,o,a)=>{let u=[];const c=e.infoData_.getNode(r._path);return c.isEmpty()||(u=df(e.infoSyncTree_,r._path,c),setTimeout(()=>{a("ok")},0)),u},stopListening:()=>{}}),mg(e,"connected",!1),e.serverSyncTree_=new oy({startListening:(r,i,o,a)=>(e.server_.listen(r,o,i,(u,c)=>{const f=a(u,c);lo(e.eventQueue_,r._path,f)}),[]),stopListening:(r,i)=>{e.server_.unlisten(r,i)}})}function K9(e){const n=e.infoData_.getNode(new et(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function sx(e){return I9({timestamp:K9(e)})}function uy(e,t,n,r,i){e.dataUpdateCount++;const o=new et(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;let a=[];if(i)if(r){const c=tc(n,f=>Yt(f));a=C9(e.serverSyncTree_,o,c,i)}else{const c=Yt(n);a=T9(e.serverSyncTree_,o,c,i)}else if(r){const c=tc(n,f=>Yt(f));a=b9(e.serverSyncTree_,o,c)}else{const c=Yt(n);a=df(e.serverSyncTree_,o,c)}let u=o;a.length>0&&(u=yg(e,o)),lo(e.eventQueue_,u,a)}function ly(e,t){mg(e,"connected",t),t===!1&&Q9(e)}function X9(e,t){xn(t,(n,r)=>{mg(e,n,r)})}function mg(e,t,n){const r=new et("/.info/"+t),i=Yt(n);e.infoData_.updateSnapshot(r,i);const o=df(e.infoSyncTree_,r,i);lo(e.eventQueue_,r,o)}function j9(e){return e.nextWriteId_++}function Q9(e){ax(e,"onDisconnectEvents");const t=sx(e),n=uc();F0(e.onDisconnect_,Ke(),(i,o)=>{const a=P9(i,o,e.serverSyncTree_,t);Pw(n,i,a)});let r=[];F0(n,Ke(),(i,o)=>{r=r.concat(df(e.serverSyncTree_,i,o));const a=nP(e,i);yg(e,a)}),e.onDisconnect_=uc(),lo(e.eventQueue_,Ke(),r)}function J9(e,t,n){let r;We(t._path)===".info"?r=sy(e.infoSyncTree_,t,n):r=sy(e.serverSyncTree_,t,n),ix(e.eventQueue_,t._path,r)}function cy(e,t,n){let r;We(t._path)===".info"?r=V0(e.infoSyncTree_,t,n):r=V0(e.serverSyncTree_,t,n),ix(e.eventQueue_,t._path,r)}function Z9(e){e.persistentConnection_&&e.persistentConnection_.interrupt(V9)}function ax(e,...t){let n="";e.persistentConnection_&&(n=e.persistentConnection_.id+":"),qt(n,...t)}function ux(e,t,n){return qw(e.serverSyncTree_,t,n)||Se.EMPTY_NODE}function vg(e,t=e.transactionQueueTree_){if(t||_f(e,t),Is(t)){const n=cx(e,t);ae(n.length>0,"Sending zero length transaction queue"),n.every(i=>i.status===0)&&eP(e,pu(t),n)}else Qw(t)&&gf(t,n=>{vg(e,n)})}function eP(e,t,n){const r=n.map(f=>f.currentWriteId),i=ux(e,t,r);let o=i;const a=i.hash();for(let f=0;f<n.length;f++){const h=n[f];ae(h.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),h.status=1,h.retryCount++;const g=bn(t,h.path);o=o.updateChild(g,h.currentOutputSnapshotRaw)}const u=o.val(!0),c=t;e.server_.put(c.toString(),u,f=>{ax(e,"transaction put response",{path:c.toString(),status:f});let h=[];if(f==="ok"){const g=[];for(let d=0;d<n.length;d++)n[d].status=2,h=h.concat(Ko(e.serverSyncTree_,n[d].currentWriteId)),n[d].onComplete&&g.push(()=>n[d].onComplete(null,!0,n[d].currentOutputSnapshotResolved)),n[d].unwatcher();_f(e,_g(e.transactionQueueTree_,t)),vg(e,e.transactionQueueTree_),lo(e.eventQueue_,t,h);for(let d=0;d<g.length;d++)fu(g[d])}else{if(f==="datastale")for(let g=0;g<n.length;g++)n[g].status===3?n[g].status=4:n[g].status=0;else{Pn("transaction at "+c.toString()+" failed: "+f);for(let g=0;g<n.length;g++)n[g].status=4,n[g].abortReason=f}yg(e,t)}},a)}function yg(e,t){const n=lx(e,t),r=pu(n),i=cx(e,n);return tP(e,i,r),r}function tP(e,t,n){if(t.length===0)return;const r=[];let i=[];const a=t.filter(u=>u.status===0).map(u=>u.currentWriteId);for(let u=0;u<t.length;u++){const c=t[u],f=bn(n,c.path);let h=!1,g;if(ae(f!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),c.status===4)h=!0,g=c.abortReason,i=i.concat(Ko(e.serverSyncTree_,c.currentWriteId,!0));else if(c.status===0)if(c.retryCount>=H9)h=!0,g="maxretry",i=i.concat(Ko(e.serverSyncTree_,c.currentWriteId,!0));else{const d=ux(e,c.path,a);c.currentInputSnapshot=d;const _=t[u].update(d.val());if(_!==void 0){tx("transaction failed: Data returned ",_,c.path);let y=Yt(_);typeof _=="object"&&_!=null&&Yr(_,".priority")||(y=y.updatePriority(d.getPriority()));const m=c.currentWriteId,b=sx(e),C=k9(y,d,b);c.currentOutputSnapshotRaw=y,c.currentOutputSnapshotResolved=C,c.currentWriteId=j9(e),a.splice(a.indexOf(m),1),i=i.concat(y9(e.serverSyncTree_,c.path,C,c.currentWriteId,c.applyLocally)),i=i.concat(Ko(e.serverSyncTree_,m,!0))}else h=!0,g="nodata",i=i.concat(Ko(e.serverSyncTree_,c.currentWriteId,!0))}lo(e.eventQueue_,n,i),i=[],h&&(t[u].status=2,function(d){setTimeout(d,Math.floor(0))}(t[u].unwatcher),t[u].onComplete&&(g==="nodata"?r.push(()=>t[u].onComplete(null,!1,t[u].currentInputSnapshot)):r.push(()=>t[u].onComplete(new Error(g),!1,null))))}_f(e,e.transactionQueueTree_);for(let u=0;u<r.length;u++)fu(r[u]);vg(e,e.transactionQueueTree_)}function lx(e,t){let n,r=e.transactionQueueTree_;for(n=We(t);n!==null&&Is(r)===void 0;)r=_g(r,n),t=it(t),n=We(t);return r}function cx(e,t){const n=[];return fx(e,t,n),n.sort((r,i)=>r.order-i.order),n}function fx(e,t,n){const r=Is(t);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);gf(t,i=>{fx(e,i,n)})}function _f(e,t){const n=Is(t);if(n){let r=0;for(let i=0;i<n.length;i++)n[i].status!==2&&(n[r]=n[i],r++);n.length=r,jw(t,n.length>0?n:void 0)}gf(t,r=>{_f(e,r)})}function nP(e,t){const n=pu(lx(e,t)),r=_g(e.transactionQueueTree_,t);return O9(r,i=>{Bd(e,i)}),Bd(e,r),Jw(r,i=>{Bd(e,i)}),n}function Bd(e,t){const n=Is(t);if(n){const r=[];let i=[],o=-1;for(let a=0;a<n.length;a++)n[a].status===3||(n[a].status===1?(ae(o===a-1,"All SENT items should be at beginning of queue."),o=a,n[a].status=3,n[a].abortReason="set"):(ae(n[a].status===0,"Unexpected transaction status in abort"),n[a].unwatcher(),i=i.concat(Ko(e.serverSyncTree_,n[a].currentWriteId,!0)),n[a].onComplete&&r.push(n[a].onComplete.bind(null,new Error("set"),!1,null))));o===-1?jw(t,void 0):n.length=o+1,lo(e.eventQueue_,pu(t),i);for(let a=0;a<r.length;a++)fu(r[a])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rP(e){let t="";const n=e.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}t+="/"+i}return t}function iP(e){const t={};e.charAt(0)==="?"&&(e=e.substring(1));for(const n of e.split("&")){if(n.length===0)continue;const r=n.split("=");r.length===2?t[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Pn(`Invalid query segment '${n}' in query '${e}'`)}return t}const fy=function(e,t){const n=oP(e),r=n.namespace;n.domain==="firebase.com"&&Vr(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&Vr("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||m7();const i=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new dw(n.host,n.secure,r,i,t,"",r!==n.subdomain),path:new et(n.pathString)}},oP=function(e){let t="",n="",r="",i="",o="",a=!0,u="https",c=443;if(typeof e=="string"){let f=e.indexOf("//");f>=0&&(u=e.substring(0,f-1),e=e.substring(f+2));let h=e.indexOf("/");h===-1&&(h=e.length);let g=e.indexOf("?");g===-1&&(g=e.length),t=e.substring(0,Math.min(h,g)),h<g&&(i=rP(e.substring(h,g)));const d=iP(e.substring(Math.min(e.length,g)));f=t.indexOf(":"),f>=0?(a=u==="https"||u==="wss",c=parseInt(t.substring(f+1),10)):f=t.length;const _=t.slice(0,f);if(_.toLowerCase()==="localhost")n="localhost";else if(_.split(".").length<=2)n=_;else{const y=t.indexOf(".");r=t.substring(0,y).toLowerCase(),n=t.substring(y+1),o=r}"ns"in d&&(o=d.ns)}return{host:t,port:c,domain:n,subdomain:r,secure:a,scheme:u,pathString:i,namespace:o}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sP{constructor(t,n,r,i){this.eventType=t,this.eventRegistration=n,this.snapshot=r,this.prevName=i}getPath(){const t=this.snapshot.ref;return this.eventType==="value"?t._path:t.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+Nt(this.snapshot.exportVal())}}class aP{constructor(t,n,r){this.eventRegistration=t,this.error=n,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uP{constructor(t,n){this.snapshotCallback=t,this.cancelCallback=n}onValue(t,n){this.snapshotCallback.call(null,t,n)}onCancel(t){return ae(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,t)}get hasCancelCallback(){return!!this.cancelCallback}matches(t){return this.snapshotCallback===t.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===t.snapshotCallback.userCallback&&this.snapshotCallback.context===t.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bg{constructor(t,n,r,i){this._repo=t,this._path=n,this._queryParams=r,this._orderByCalled=i}get key(){return ze(this._path)?null:xw(this._path)}get ref(){return new yi(this._repo,this._path)}get _queryIdentifier(){const t=Kv(this._queryParams),n=Yp(t);return n==="{}"?"default":n}get _queryObject(){return Kv(this._queryParams)}isEqual(t){if(t=lf(t),!(t instanceof bg))return!1;const n=this._repo===t._repo,r=Qp(this._path,t._path),i=this._queryIdentifier===t._queryIdentifier;return n&&r&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+eN(this._path)}}class yi extends bg{constructor(t,n){super(t,n,new tg,!1)}get parent(){const t=Cw(this._path);return t===null?null:new yi(this._repo,t)}get root(){let t=this;for(;t.parent!==null;)t=t.parent;return t}}class _c{constructor(t,n,r){this._node=t,this.ref=n,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(t){const n=new et(t),r=q0(this.ref,t);return new _c(this._node.getChild(n),r,mt)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(t){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,i)=>t(new _c(i,q0(this.ref,r),mt)))}hasChild(t){const n=new et(t);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function hy(e,t){return e=lf(e),e._checkNotDeleted("ref"),t!==void 0?q0(e._root,t):e._root}function q0(e,t){return e=lf(e),We(e._path)===null?U9("child","path",t):nx("child","path",t),new yi(e._repo,Ct(e._path,t))}class wg{constructor(t){this.callbackContext=t}respondsTo(t){return t==="value"}createEvent(t,n){const r=n._queryParams.getIndex();return new sP("value",this,new _c(t.snapshotNode,new yi(n._repo,n._path),r))}getEventRunner(t){return t.getEventType()==="cancel"?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,null)}createCancelEvent(t,n){return this.callbackContext.hasCancelCallback?new aP(this,t,n):null}matches(t){return t instanceof wg?!t.callbackContext||!this.callbackContext?!0:t.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}function lP(e,t,n,r,i){let o;if(typeof r=="object"&&(o=void 0,i=r),typeof r=="function"&&(o=r),i&&i.onlyOnce){const c=n,f=(h,g)=>{cy(e._repo,e,u),c(h,g)};f.userCallback=n.userCallback,f.context=n.context,n=f}const a=new uP(n,o||void 0),u=new wg(a);return J9(e._repo,e,u),()=>cy(e._repo,e,u)}function dy(e,t,n,r){return lP(e,"value",t,n,r)}c9(yi);_9(yi);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cP="FIREBASE_DATABASE_EMULATOR_HOST",Y0={};let fP=!1;function hP(e,t,n,r){e.repoInfo_=new dw(`${t}:${n}`,!1,e.repoInfo_.namespace,e.repoInfo_.webSocketOnly,e.repoInfo_.nodeAdmin,e.repoInfo_.persistenceKey,e.repoInfo_.includeNamespaceInQueryParams,!0),r&&(e.authTokenProvider_=r)}function dP(e,t,n,r,i){let o=r||e.options.databaseURL;o===void 0&&(e.options.projectId||Vr("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),qt("Using default host for project ",e.options.projectId),o=`${e.options.projectId}-default-rtdb.firebaseio.com`);let a=fy(o,i),u=a.repoInfo,c;typeof process<"u"&&Rv&&(c=Rv[cP]),c?(o=`http://${c}?ns=${u.namespace}`,a=fy(o,i),u=a.repoInfo):a.repoInfo.secure;const f=new M7(e.name,e.options,t);W9("Invalid Firebase Database URL",a),ze(a.path)||Vr("Database URL must point to the root of a Firebase Database (not including a child path).");const h=gP(u,e,f,new A7(e.name,n));return new _P(h,e)}function pP(e,t){const n=Y0[t];(!n||n[e.key]!==e)&&Vr(`Database ${t}(${e.repoInfo_}) has already been deleted.`),Z9(e),delete n[e.key]}function gP(e,t,n,r){let i=Y0[t.name];i||(i={},Y0[t.name]=i);let o=i[e.toURLString()];return o&&Vr("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),o=new q9(e,fP,n,r),i[e.toURLString()]=o,o}class _P{constructor(t,n){this._repoInternal=t,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(Y9(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new yi(this._repo,Ke())),this._rootInternal}_delete(){return this._rootInternal!==null&&(pP(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(t){this._rootInternal===null&&Vr("Cannot call "+t+" on a deleted database.")}}function py(e=t7(),t){const n=QR(e,"database").getImmediate({identifier:t});if(!n._instanceStarted){const r=zI("database");r&&mP(n,...r)}return n}function mP(e,t,n,r={}){e=lf(e),e._checkNotDeleted("useEmulator"),e._instanceStarted&&Vr("Cannot call useEmulator() after instance has already been initialized.");const i=e._repoInternal;let o;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&Vr('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new Wl(Wl.OWNER);else if(r.mockUserToken){const a=typeof r.mockUserToken=="string"?r.mockUserToken:GI(r.mockUserToken,e.app.options.projectId);o=new Wl(a)}hP(i,t,n,o)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vP(e){f7(e7),rc(new La("database",(t,{instanceIdentifier:n})=>{const r=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),o=t.getProvider("app-check-internal");return dP(r,i,o,n)},"PUBLIC").setMultipleInstances(!0)),Qo(Nv,Pv,e),Qo(Nv,Pv,"esm2017")}zr.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)};zr.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)};vP();var hx={},xg={};function dt(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function dx(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function mf(e){let t,n,r;e.length!==2?(t=dt,n=(u,c)=>dt(e(u),c),r=(u,c)=>e(u)-c):(t=e===dt||e===dx?e:yP,n=e,r=e);function i(u,c,f=0,h=u.length){if(f<h){if(t(c,c)!==0)return h;do{const g=f+h>>>1;n(u[g],c)<0?f=g+1:h=g}while(f<h)}return f}function o(u,c,f=0,h=u.length){if(f<h){if(t(c,c)!==0)return h;do{const g=f+h>>>1;n(u[g],c)<=0?f=g+1:h=g}while(f<h)}return f}function a(u,c,f=0,h=u.length){const g=i(u,c,f,h-1);return g>f&&r(u[g-1],c)>-r(u[g],c)?g-1:g}return{left:i,center:a,right:o}}function yP(){return 0}function mc(e){return e===null?NaN:+e}function*bP(e,t){if(t===void 0)for(let n of e)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)(r=t(r,++n,e))!=null&&(r=+r)>=r&&(yield r)}}const px=mf(dt),gx=px.right,wP=px.left,xP=mf(mc).center,co=gx;function TP(e,t){if(!((t=+t)>=0))throw new RangeError("invalid r");let n=e.length;if(!((n=Math.floor(n))>=0))throw new RangeError("invalid length");if(!n||!t)return e;const r=Tg(t),i=e.slice();return r(e,i,0,n,1),r(i,e,0,n,1),r(e,i,0,n,1),e}const _x=mx(Tg),CP=mx(EP);function mx(e){return function(t,n,r=n){if(!((n=+n)>=0))throw new RangeError("invalid rx");if(!((r=+r)>=0))throw new RangeError("invalid ry");let{data:i,width:o,height:a}=t;if(!((o=Math.floor(o))>=0))throw new RangeError("invalid width");if(!((a=Math.floor(a!==void 0?a:i.length/o))>=0))throw new RangeError("invalid height");if(!o||!a||!n&&!r)return t;const u=n&&e(n),c=r&&e(r),f=i.slice();return u&&c?(Oo(u,f,i,o,a),Oo(u,i,f,o,a),Oo(u,f,i,o,a),Lo(c,i,f,o,a),Lo(c,f,i,o,a),Lo(c,i,f,o,a)):u?(Oo(u,i,f,o,a),Oo(u,f,i,o,a),Oo(u,i,f,o,a)):c&&(Lo(c,i,f,o,a),Lo(c,f,i,o,a),Lo(c,i,f,o,a)),t}}function Oo(e,t,n,r,i){for(let o=0,a=r*i;o<a;)e(t,n,o,o+=r,1)}function Lo(e,t,n,r,i){for(let o=0,a=r*i;o<r;++o)e(t,n,o,o+a,r)}function EP(e){const t=Tg(e);return(n,r,i,o,a)=>{i<<=2,o<<=2,a<<=2,t(n,r,i+0,o+0,a),t(n,r,i+1,o+1,a),t(n,r,i+2,o+2,a),t(n,r,i+3,o+3,a)}}function Tg(e){const t=Math.floor(e);if(t===e)return SP(e);const n=e-t,r=2*e+1;return(i,o,a,u,c)=>{if(!((u-=c)>=a))return;let f=t*o[a];const h=c*t,g=h+c;for(let d=a,_=a+h;d<_;d+=c)f+=o[Math.min(u,d)];for(let d=a,_=u;d<=_;d+=c)f+=o[Math.min(u,d+h)],i[d]=(f+n*(o[Math.max(a,d-g)]+o[Math.min(u,d+g)]))/r,f-=o[Math.max(a,d-h)]}}function SP(e){const t=2*e+1;return(n,r,i,o,a)=>{if(!((o-=a)>=i))return;let u=e*r[i];const c=a*e;for(let f=i,h=i+c;f<h;f+=a)u+=r[Math.min(o,f)];for(let f=i,h=o;f<=h;f+=a)u+=r[Math.min(o,f+c)],n[f]=u/t,u-=r[Math.max(i,f-c)]}}function vf(e,t){let n=0;if(t===void 0)for(let r of e)r!=null&&(r=+r)>=r&&++n;else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(i=+i)>=i&&++n}return n}function AP(e){return e.length|0}function MP(e){return!(e>0)}function IP(e){return typeof e!="object"||"length"in e?e:Array.from(e)}function RP(e){return t=>e(...t)}function NP(...e){const t=typeof e[e.length-1]=="function"&&RP(e.pop());e=e.map(IP);const n=e.map(AP),r=e.length-1,i=new Array(r+1).fill(0),o=[];if(r<0||n.some(MP))return o;for(;;){o.push(i.map((u,c)=>e[c][u]));let a=r;for(;++i[a]===n[a];){if(a===0)return t?o.map(t):o;i[a--]=0}}}function PP(e,t){var n=0,r=0;return Float64Array.from(e,t===void 0?i=>n+=+i||0:i=>n+=+t(i,r++,e)||0)}function vx(e,t){let n=0,r,i=0,o=0;if(t===void 0)for(let a of e)a!=null&&(a=+a)>=a&&(r=a-i,i+=r/++n,o+=r*(a-i));else{let a=-1;for(let u of e)(u=t(u,++a,e))!=null&&(u=+u)>=u&&(r=u-i,i+=r/++n,o+=r*(u-i))}if(n>1)return o/(n-1)}function yx(e,t){const n=vx(e,t);return n&&Math.sqrt(n)}function Ma(e,t){let n,r;if(t===void 0)for(const i of e)i!=null&&(n===void 0?i>=i&&(n=r=i):(n>i&&(n=i),r<i&&(r=i)));else{let i=-1;for(let o of e)(o=t(o,++i,e))!=null&&(n===void 0?o>=o&&(n=r=o):(n>o&&(n=o),r<o&&(r=o)))}return[n,r]}class St{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const n=this._partials;let r=0;for(let i=0;i<this._n&&i<32;i++){const o=n[i],a=t+o,u=Math.abs(t)<Math.abs(o)?t-(a-o):o-(a-t);u&&(n[r++]=u),t=a}return n[r]=t,this._n=r+1,this}valueOf(){const t=this._partials;let n=this._n,r,i,o,a=0;if(n>0){for(a=t[--n];n>0&&(r=a,i=t[--n],a=r+i,o=i-(a-r),!o););n>0&&(o<0&&t[n-1]<0||o>0&&t[n-1]>0)&&(i=o*2,r=a+i,i==r-a&&(a=r))}return a}}function kP(e,t){const n=new St;if(t===void 0)for(let r of e)(r=+r)&&n.add(r);else{let r=-1;for(let i of e)(i=+t(i,++r,e))&&n.add(i)}return+n}function DP(e,t){const n=new St;let r=-1;return Float64Array.from(e,t===void 0?i=>n.add(+i||0):i=>n.add(+t(i,++r,e)||0))}class Va extends Map{constructor(t,n=xx){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,i]of t)this.set(r,i)}get(t){return super.get(K0(this,t))}has(t){return super.has(K0(this,t))}set(t,n){return super.set(bx(this,t),n)}delete(t){return super.delete(wx(this,t))}}class Qi extends Set{constructor(t,n=xx){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const r of t)this.add(r)}has(t){return super.has(K0(this,t))}add(t){return super.add(bx(this,t))}delete(t){return super.delete(wx(this,t))}}function K0({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function bx({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function wx({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function xx(e){return e!==null&&typeof e=="object"?e.valueOf():e}function cs(e){return e}function Tx(e,...t){return Rs(e,cs,cs,t)}function Cx(e,...t){return Rs(e,Array.from,cs,t)}function Ex(e,t){for(let n=1,r=t.length;n<r;++n)e=e.flatMap(i=>i.pop().map(([o,a])=>[...i,o,a]));return e}function OP(e,...t){return Ex(Cx(e,...t),t)}function LP(e,t,...n){return Ex(Ax(e,t,...n),n)}function Sx(e,t,...n){return Rs(e,cs,t,n)}function Ax(e,t,...n){return Rs(e,Array.from,t,n)}function $P(e,...t){return Rs(e,cs,Mx,t)}function FP(e,...t){return Rs(e,Array.from,Mx,t)}function Mx(e){if(e.length!==1)throw new Error("duplicate key");return e[0]}function Rs(e,t,n,r){return function i(o,a){if(a>=r.length)return n(o);const u=new Va,c=r[a++];let f=-1;for(const h of o){const g=c(h,++f,o),d=u.get(g);d?d.push(h):u.set(g,[h])}for(const[h,g]of u)u.set(h,i(g,a));return t(u)}(e,0)}function Ix(e,t){return Array.from(t,n=>e[n])}function X0(e,...t){if(typeof e[Symbol.iterator]!="function")throw new TypeError("values is not iterable");e=Array.from(e);let[n]=t;if(n&&n.length!==2||t.length>1){const r=Uint32Array.from(e,(i,o)=>o);return t.length>1?(t=t.map(i=>e.map(i)),r.sort((i,o)=>{for(const a of t){const u=fs(a[i],a[o]);if(u)return u}})):(n=e.map(n),r.sort((i,o)=>fs(n[i],n[o]))),Ix(e,r)}return e.sort(Cg(n))}function Cg(e=dt){if(e===dt)return fs;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const r=e(t,n);return r||r===0?r:(e(n,n)===0)-(e(t,t)===0)}}function fs(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}function BP(e,t,n){return(t.length!==2?X0(Sx(e,t,n),([r,i],[o,a])=>dt(i,a)||dt(r,o)):X0(Tx(e,n),([r,i],[o,a])=>t(i,a)||dt(r,o))).map(([r])=>r)}var UP=Array.prototype,WP=UP.slice;function Ud(e){return()=>e}const zP=Math.sqrt(50),GP=Math.sqrt(10),VP=Math.sqrt(2);function vc(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),o=r/Math.pow(10,i),a=o>=zP?10:o>=GP?5:o>=VP?2:1;let u,c,f;return i<0?(f=Math.pow(10,-i)/a,u=Math.round(e*f),c=Math.round(t*f),u/f<e&&++u,c/f>t&&--c,f=-f):(f=Math.pow(10,i)*a,u=Math.round(e/f),c=Math.round(t/f),u*f<e&&++u,c*f>t&&--c),c<u&&.5<=n&&n<2?vc(e,t,n*2):[u,c,f]}function Ji(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[i,o,a]=r?vc(t,e,n):vc(e,t,n);if(!(o>=i))return[];const u=o-i+1,c=new Array(u);if(r)if(a<0)for(let f=0;f<u;++f)c[f]=(o-f)/-a;else for(let f=0;f<u;++f)c[f]=(o-f)*a;else if(a<0)for(let f=0;f<u;++f)c[f]=(i+f)/-a;else for(let f=0;f<u;++f)c[f]=(i+f)*a;return c}function Zi(e,t,n){return t=+t,e=+e,n=+n,vc(e,t,n)[2]}function yc(e,t,n){t=+t,e=+e,n=+n;const r=t<e,i=r?Zi(t,e,n):Zi(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function Eg(e,t,n){let r;for(;;){const i=Zi(e,t,n);if(i===r||i===0||!isFinite(i))return[e,t];i>0?(e=Math.floor(e/i)*i,t=Math.ceil(t/i)*i):i<0&&(e=Math.ceil(e*i)/i,t=Math.floor(t*i)/i),r=i}}function Sg(e){return Math.max(1,Math.ceil(Math.log(vf(e))/Math.LN2)+1)}function gy(){var e=cs,t=Ma,n=Sg;function r(i){Array.isArray(i)||(i=Array.from(i));var o,a=i.length,u,c,f=new Array(a);for(o=0;o<a;++o)f[o]=e(i[o],o,i);var h=t(f),g=h[0],d=h[1],_=n(f,g,d);if(!Array.isArray(_)){const T=d,x=+_;if(t===Ma&&([g,d]=Eg(g,d,x)),_=Ji(g,d,x),_[0]<=g&&(c=Zi(g,d,x)),_[_.length-1]>=d)if(T>=d&&t===Ma){const S=Zi(g,d,x);isFinite(S)&&(S>0?d=(Math.floor(d/S)+1)*S:S<0&&(d=(Math.ceil(d*-S)+1)/-S))}else _.pop()}for(var y=_.length,w=0,m=y;_[w]<=g;)++w;for(;_[m-1]>d;)--m;(w||m<y)&&(_=_.slice(w,m),y=m-w);var b=new Array(y+1),C;for(o=0;o<=y;++o)C=b[o]=[],C.x0=o>0?_[o-1]:g,C.x1=o<y?_[o]:d;if(isFinite(c)){if(c>0)for(o=0;o<a;++o)(u=f[o])!=null&&g<=u&&u<=d&&b[Math.min(y,Math.floor((u-g)/c))].push(i[o]);else if(c<0){for(o=0;o<a;++o)if((u=f[o])!=null&&g<=u&&u<=d){const T=Math.floor((g-u)*c);b[Math.min(y,T+(_[T]<=u))].push(i[o])}}}else for(o=0;o<a;++o)(u=f[o])!=null&&g<=u&&u<=d&&b[co(_,u,0,y)].push(i[o]);return b}return r.value=function(i){return arguments.length?(e=typeof i=="function"?i:Ud(i),r):e},r.domain=function(i){return arguments.length?(t=typeof i=="function"?i:Ud([i[0],i[1]]),r):t},r.thresholds=function(i){return arguments.length?(n=typeof i=="function"?i:Ud(Array.isArray(i)?WP.call(i):i),r):n},r}function Ha(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function Ag(e,t){let n,r=-1,i=-1;if(t===void 0)for(const o of e)++i,o!=null&&(n<o||n===void 0&&o>=o)&&(n=o,r=i);else for(let o of e)(o=t(o,++i,e))!=null&&(n<o||n===void 0&&o>=o)&&(n=o,r=i);return r}function bc(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}function Mg(e,t){let n,r=-1,i=-1;if(t===void 0)for(const o of e)++i,o!=null&&(n>o||n===void 0&&o>=o)&&(n=o,r=i);else for(let o of e)(o=t(o,++i,e))!=null&&(n>o||n===void 0&&o>=o)&&(n=o,r=i);return r}function yf(e,t,n=0,r=1/0,i){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(e.length-1,r)),!(n<=t&&t<=r))return e;for(i=i===void 0?fs:Cg(i);r>n;){if(r-n>600){const c=r-n+1,f=t-n+1,h=Math.log(c),g=.5*Math.exp(2*h/3),d=.5*Math.sqrt(h*g*(c-g)/c)*(f-c/2<0?-1:1),_=Math.max(n,Math.floor(t-f*g/c+d)),y=Math.min(r,Math.floor(t+(c-f)*g/c+d));yf(e,t,_,y,i)}const o=e[t];let a=n,u=r;for(na(e,n,t),i(e[r],o)>0&&na(e,n,r);a<u;){for(na(e,a,u),++a,--u;i(e[a],o)<0;)++a;for(;i(e[u],o)>0;)--u}i(e[n],o)===0?na(e,n,u):(++u,na(e,u,r)),u<=t&&(n=u+1),t<=u&&(r=u-1)}return e}function na(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function Rx(e,t=dt){let n,r=!1;if(t.length===1){let i;for(const o of e){const a=t(o);(r?dt(a,i)>0:dt(a,a)===0)&&(n=o,i=a,r=!0)}}else for(const i of e)(r?t(i,n)>0:t(i,i)===0)&&(n=i,r=!0);return n}function qa(e,t,n){if(e=Float64Array.from(bP(e,n)),!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return bc(e);if(t>=1)return Ha(e);var r,i=(r-1)*t,o=Math.floor(i),a=Ha(yf(e,o).subarray(0,o+1)),u=bc(e.subarray(o+1));return a+(u-a)*(i-o)}}function Nx(e,t,n=mc){if(!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,o=Math.floor(i),a=+n(e[o],o,e),u=+n(e[o+1],o+1,e);return a+(u-a)*(i-o)}}function Px(e,t,n=mc){if(!isNaN(t=+t)){if(r=Float64Array.from(e,(u,c)=>mc(n(e[c],c,e))),t<=0)return Mg(r);if(t>=1)return Ag(r);var r,i=Uint32Array.from(e,(u,c)=>c),o=r.length-1,a=Math.floor(o*t);return yf(i,a,0,o,(u,c)=>fs(r[u],r[c])),a=Rx(i.subarray(0,a+1),u=>r[u]),a>=0?a:-1}}function HP(e,t,n){const r=vf(e),i=qa(e,.75)-qa(e,.25);return r&&i?Math.ceil((n-t)/(2*i*Math.pow(r,-1/3))):1}function qP(e,t,n){const r=vf(e),i=yx(e);return r&&i?Math.ceil((n-t)*Math.cbrt(r)/(3.49*i)):1}function YP(e,t){let n=0,r=0;if(t===void 0)for(let i of e)i!=null&&(i=+i)>=i&&(++n,r+=i);else{let i=-1;for(let o of e)(o=t(o,++i,e))!=null&&(o=+o)>=o&&(++n,r+=o)}if(n)return r/n}function KP(e,t){return qa(e,.5,t)}function XP(e,t){return Px(e,.5,t)}function*jP(e){for(const t of e)yield*t}function Ig(e){return Array.from(jP(e))}function QP(e,t){const n=new Va;if(t===void 0)for(let o of e)o!=null&&o>=o&&n.set(o,(n.get(o)||0)+1);else{let o=-1;for(let a of e)(a=t(a,++o,e))!=null&&a>=a&&n.set(a,(n.get(a)||0)+1)}let r,i=0;for(const[o,a]of n)a>i&&(i=a,r=o);return r}function JP(e,t=ZP){const n=[];let r,i=!1;for(const o of e)i&&n.push(t(r,o)),r=o,i=!0;return n}function ZP(e,t){return[e,t]}function ai(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,o=new Array(i);++r<i;)o[r]=e+r*n;return o}function ek(e,t=dt){if(typeof e[Symbol.iterator]!="function")throw new TypeError("values is not iterable");let n=Array.from(e);const r=new Float64Array(n.length);t.length!==2&&(n=n.map(t),t=dt);const i=(u,c)=>t(n[u],n[c]);let o,a;return e=Uint32Array.from(n,(u,c)=>c),e.sort(t===dt?(u,c)=>fs(n[u],n[c]):Cg(i)),e.forEach((u,c)=>{const f=i(u,o===void 0?u:o);f>=0?((o===void 0||f>0)&&(o=u,a=c),r[u]=a):r[u]=NaN}),r}function tk(e,t=dt){let n,r=!1;if(t.length===1){let i;for(const o of e){const a=t(o);(r?dt(a,i)<0:dt(a,a)===0)&&(n=o,i=a,r=!0)}}else for(const i of e)(r?t(i,n)<0:t(i,i)===0)&&(n=i,r=!0);return n}function kx(e,t=dt){if(t.length===1)return Mg(e,t);let n,r=-1,i=-1;for(const o of e)++i,(r<0?t(o,o)===0:t(o,n)<0)&&(n=o,r=i);return r}function nk(e,t=dt){if(t.length===1)return Ag(e,t);let n,r=-1,i=-1;for(const o of e)++i,(r<0?t(o,o)===0:t(o,n)>0)&&(n=o,r=i);return r}function rk(e,t){const n=kx(e,t);return n<0?void 0:n}const ik=Dx(Math.random);function Dx(e){return function(n,r=0,i=n.length){let o=i-(r=+r);for(;o;){const a=e()*o--|0,u=n[o+r];n[o+r]=n[a+r],n[a+r]=u}return n}}function ok(e,t){let n=0;if(t===void 0)for(let r of e)(r=+r)&&(n+=r);else{let r=-1;for(let i of e)(i=+t(i,++r,e))&&(n+=i)}return n}function Ox(e){if(!(o=e.length))return[];for(var t=-1,n=bc(e,sk),r=new Array(n);++t<n;)for(var i=-1,o,a=r[t]=new Array(o);++i<o;)a[i]=e[i][t];return r}function sk(e){return e.length}function ak(){return Ox(arguments)}function uk(e,t){if(typeof t!="function")throw new TypeError("test is not a function");let n=-1;for(const r of e)if(!t(r,++n,e))return!1;return!0}function lk(e,t){if(typeof t!="function")throw new TypeError("test is not a function");let n=-1;for(const r of e)if(t(r,++n,e))return!0;return!1}function ck(e,t){if(typeof t!="function")throw new TypeError("test is not a function");const n=[];let r=-1;for(const i of e)t(i,++r,e)&&n.push(i);return n}function fk(e,t){if(typeof e[Symbol.iterator]!="function")throw new TypeError("values is not iterable");if(typeof t!="function")throw new TypeError("mapper is not a function");return Array.from(e,(n,r)=>t(n,r,e))}function hk(e,t,n){if(typeof t!="function")throw new TypeError("reducer is not a function");const r=e[Symbol.iterator]();let i,o,a=-1;if(arguments.length<3){if({done:i,value:n}=r.next(),i)return;++a}for(;{done:i,value:o}=r.next(),!i;)n=t(n,o,++a,e);return n}function dk(e){if(typeof e[Symbol.iterator]!="function")throw new TypeError("values is not iterable");return Array.from(e).reverse()}function pk(e,...t){e=new Qi(e);for(const n of t)for(const r of n)e.delete(r);return e}function gk(e,t){const n=t[Symbol.iterator](),r=new Qi;for(const i of e){if(r.has(i))return!1;let o,a;for(;({value:o,done:a}=n.next())&&!a;){if(Object.is(i,o))return!1;r.add(o)}}return!0}function _k(e,...t){e=new Qi(e),t=t.map(mk);e:for(const n of e)for(const r of t)if(!r.has(n)){e.delete(n);continue e}return e}function mk(e){return e instanceof Qi?e:new Qi(e)}function Lx(e,t){const n=e[Symbol.iterator](),r=new Set;for(const i of t){const o=_y(i);if(r.has(o))continue;let a,u;for(;{value:a,done:u}=n.next();){if(u)return!1;const c=_y(a);if(r.add(c),Object.is(o,c))break}}return!0}function _y(e){return e!==null&&typeof e=="object"?e.valueOf():e}function vk(e,t){return Lx(t,e)}function yk(...e){const t=new Qi;for(const n of e)for(const r of n)t.add(r);return t}function bk(e){return e}var zl=1,Gl=2,j0=3,fa=4,my=1e-6;function wk(e){return"translate("+e+",0)"}function xk(e){return"translate(0,"+e+")"}function Tk(e){return t=>+e(t)}function Ck(e,t){return t=Math.max(0,e.bandwidth()-t*2)/2,e.round()&&(t=Math.round(t)),n=>+e(n)+t}function Ek(){return!this.__axis}function bf(e,t){var n=[],r=null,i=null,o=6,a=6,u=3,c=typeof window<"u"&&window.devicePixelRatio>1?0:.5,f=e===zl||e===fa?-1:1,h=e===fa||e===Gl?"x":"y",g=e===zl||e===j0?wk:xk;function d(_){var y=r??(t.ticks?t.ticks.apply(t,n):t.domain()),w=i??(t.tickFormat?t.tickFormat.apply(t,n):bk),m=Math.max(o,0)+u,b=t.range(),C=+b[0]+c,T=+b[b.length-1]+c,x=(t.bandwidth?Ck:Tk)(t.copy(),c),S=_.selection?_.selection():_,R=S.selectAll(".domain").data([null]),D=S.selectAll(".tick").data(y,t).order(),$=D.exit(),F=D.enter().append("g").attr("class","tick"),U=D.select("line"),A=D.select("text");R=R.merge(R.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),D=D.merge(F),U=U.merge(F.append("line").attr("stroke","currentColor").attr(h+"2",f*o)),A=A.merge(F.append("text").attr("fill","currentColor").attr(h,f*m).attr("dy",e===zl?"0em":e===j0?"0.71em":"0.32em")),_!==S&&(R=R.transition(_),D=D.transition(_),U=U.transition(_),A=A.transition(_),$=$.transition(_).attr("opacity",my).attr("transform",function(W){return isFinite(W=x(W))?g(W+c):this.getAttribute("transform")}),F.attr("opacity",my).attr("transform",function(W){var k=this.parentNode.__axis;return g((k&&isFinite(k=k(W))?k:x(W))+c)})),$.remove(),R.attr("d",e===fa||e===Gl?a?"M"+f*a+","+C+"H"+c+"V"+T+"H"+f*a:"M"+c+","+C+"V"+T:a?"M"+C+","+f*a+"V"+c+"H"+T+"V"+f*a:"M"+C+","+c+"H"+T),D.attr("opacity",1).attr("transform",function(W){return g(x(W)+c)}),U.attr(h+"2",f*o),A.attr(h,f*m).text(w),S.filter(Ek).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",e===Gl?"start":e===fa?"end":"middle"),S.each(function(){this.__axis=x})}return d.scale=function(_){return arguments.length?(t=_,d):t},d.ticks=function(){return n=Array.from(arguments),d},d.tickArguments=function(_){return arguments.length?(n=_==null?[]:Array.from(_),d):n.slice()},d.tickValues=function(_){return arguments.length?(r=_==null?null:Array.from(_),d):r&&r.slice()},d.tickFormat=function(_){return arguments.length?(i=_,d):i},d.tickSize=function(_){return arguments.length?(o=a=+_,d):o},d.tickSizeInner=function(_){return arguments.length?(o=+_,d):o},d.tickSizeOuter=function(_){return arguments.length?(a=+_,d):a},d.tickPadding=function(_){return arguments.length?(u=+_,d):u},d.offset=function(_){return arguments.length?(c=+_,d):c},d}function Sk(e){return bf(zl,e)}function Ak(e){return bf(Gl,e)}function Mk(e){return bf(j0,e)}function Ik(e){return bf(fa,e)}var Rk={value:()=>{}};function fo(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new Vl(n)}function Vl(e){this._=e}function Nk(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}Vl.prototype=fo.prototype={constructor:Vl,on:function(e,t){var n=this._,r=Nk(e+"",n),i,o=-1,a=r.length;if(arguments.length<2){for(;++o<a;)if((i=(e=r[o]).type)&&(i=Pk(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++o<a;)if(i=(e=r[o]).type)n[i]=vy(n[i],e.name,t);else if(t==null)for(i in n)n[i]=vy(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Vl(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,o;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(o=this._[e],r=0,i=o.length;r<i;++r)o[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,o=r.length;i<o;++i)r[i].value.apply(t,n)}};function Pk(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function vy(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=Rk,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var Q0="http://www.w3.org/1999/xhtml";const J0={svg:"http://www.w3.org/2000/svg",xhtml:Q0,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function gu(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),J0.hasOwnProperty(t)?{space:J0[t],local:e}:e}function kk(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Q0&&t.documentElement.namespaceURI===Q0?t.createElement(e):t.createElementNS(n,e)}}function Dk(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function wf(e){var t=gu(e);return(t.local?Dk:kk)(t)}function Ok(){}function xf(e){return e==null?Ok:function(){return this.querySelector(e)}}function Lk(e){typeof e!="function"&&(e=xf(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o=t[i],a=o.length,u=r[i]=new Array(a),c,f,h=0;h<a;++h)(c=o[h])&&(f=e.call(c,c.__data__,h,o))&&("__data__"in c&&(f.__data__=c.__data__),u[h]=f);return new on(r,this._parents)}function $x(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function $k(){return[]}function Rg(e){return e==null?$k:function(){return this.querySelectorAll(e)}}function Fk(e){return function(){return $x(e.apply(this,arguments))}}function Bk(e){typeof e=="function"?e=Fk(e):e=Rg(e);for(var t=this._groups,n=t.length,r=[],i=[],o=0;o<n;++o)for(var a=t[o],u=a.length,c,f=0;f<u;++f)(c=a[f])&&(r.push(e.call(c,c.__data__,f,a)),i.push(c));return new on(r,i)}function Ng(e){return function(){return this.matches(e)}}function Fx(e){return function(t){return t.matches(e)}}var Uk=Array.prototype.find;function Wk(e){return function(){return Uk.call(this.children,e)}}function zk(){return this.firstElementChild}function Gk(e){return this.select(e==null?zk:Wk(typeof e=="function"?e:Fx(e)))}var Vk=Array.prototype.filter;function Hk(){return Array.from(this.children)}function qk(e){return function(){return Vk.call(this.children,e)}}function Yk(e){return this.selectAll(e==null?Hk:qk(typeof e=="function"?e:Fx(e)))}function Kk(e){typeof e!="function"&&(e=Ng(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o=t[i],a=o.length,u=r[i]=[],c,f=0;f<a;++f)(c=o[f])&&e.call(c,c.__data__,f,o)&&u.push(c);return new on(r,this._parents)}function Bx(e){return new Array(e.length)}function Xk(){return new on(this._enter||this._groups.map(Bx),this._parents)}function wc(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}wc.prototype={constructor:wc,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function jk(e){return function(){return e}}function Qk(e,t,n,r,i,o){for(var a=0,u,c=t.length,f=o.length;a<f;++a)(u=t[a])?(u.__data__=o[a],r[a]=u):n[a]=new wc(e,o[a]);for(;a<c;++a)(u=t[a])&&(i[a]=u)}function Jk(e,t,n,r,i,o,a){var u,c,f=new Map,h=t.length,g=o.length,d=new Array(h),_;for(u=0;u<h;++u)(c=t[u])&&(d[u]=_=a.call(c,c.__data__,u,t)+"",f.has(_)?i[u]=c:f.set(_,c));for(u=0;u<g;++u)_=a.call(e,o[u],u,o)+"",(c=f.get(_))?(r[u]=c,c.__data__=o[u],f.delete(_)):n[u]=new wc(e,o[u]);for(u=0;u<h;++u)(c=t[u])&&f.get(d[u])===c&&(i[u]=c)}function Zk(e){return e.__data__}function eD(e,t){if(!arguments.length)return Array.from(this,Zk);var n=t?Jk:Qk,r=this._parents,i=this._groups;typeof e!="function"&&(e=jk(e));for(var o=i.length,a=new Array(o),u=new Array(o),c=new Array(o),f=0;f<o;++f){var h=r[f],g=i[f],d=g.length,_=tD(e.call(h,h&&h.__data__,f,r)),y=_.length,w=u[f]=new Array(y),m=a[f]=new Array(y),b=c[f]=new Array(d);n(h,g,w,m,b,_,t);for(var C=0,T=0,x,S;C<y;++C)if(x=w[C]){for(C>=T&&(T=C+1);!(S=m[T])&&++T<y;);x._next=S||null}}return a=new on(a,r),a._enter=u,a._exit=c,a}function tD(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function nD(){return new on(this._exit||this._groups.map(Bx),this._parents)}function rD(e,t,n){var r=this.enter(),i=this,o=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?o.remove():n(o),r&&i?r.merge(i).order():i}function iD(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,o=r.length,a=Math.min(i,o),u=new Array(i),c=0;c<a;++c)for(var f=n[c],h=r[c],g=f.length,d=u[c]=new Array(g),_,y=0;y<g;++y)(_=f[y]||h[y])&&(d[y]=_);for(;c<i;++c)u[c]=n[c];return new on(u,this._parents)}function oD(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,o=r[i],a;--i>=0;)(a=r[i])&&(o&&a.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(a,o),o=a);return this}function sD(e){e||(e=aD);function t(g,d){return g&&d?e(g.__data__,d.__data__):!g-!d}for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var a=n[o],u=a.length,c=i[o]=new Array(u),f,h=0;h<u;++h)(f=a[h])&&(c[h]=f);c.sort(t)}return new on(i,this._parents).order()}function aD(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function uD(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function lD(){return Array.from(this)}function cD(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,o=r.length;i<o;++i){var a=r[i];if(a)return a}return null}function fD(){let e=0;for(const t of this)++e;return e}function hD(){return!this.node()}function dD(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],o=0,a=i.length,u;o<a;++o)(u=i[o])&&e.call(u,u.__data__,o,i);return this}function pD(e){return function(){this.removeAttribute(e)}}function gD(e){return function(){this.removeAttributeNS(e.space,e.local)}}function _D(e,t){return function(){this.setAttribute(e,t)}}function mD(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function vD(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function yD(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function bD(e,t){var n=gu(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?gD:pD:typeof t=="function"?n.local?yD:vD:n.local?mD:_D)(n,t))}function Pg(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function wD(e){return function(){this.style.removeProperty(e)}}function xD(e,t,n){return function(){this.style.setProperty(e,t,n)}}function TD(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function CD(e,t,n){return arguments.length>1?this.each((t==null?wD:typeof t=="function"?TD:xD)(e,t,n??"")):eo(this.node(),e)}function eo(e,t){return e.style.getPropertyValue(t)||Pg(e).getComputedStyle(e,null).getPropertyValue(t)}function ED(e){return function(){delete this[e]}}function SD(e,t){return function(){this[e]=t}}function AD(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function MD(e,t){return arguments.length>1?this.each((t==null?ED:typeof t=="function"?AD:SD)(e,t)):this.node()[e]}function Ux(e){return e.trim().split(/^|\s+/)}function kg(e){return e.classList||new Wx(e)}function Wx(e){this._node=e,this._names=Ux(e.getAttribute("class")||"")}Wx.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function zx(e,t){for(var n=kg(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function Gx(e,t){for(var n=kg(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function ID(e){return function(){zx(this,e)}}function RD(e){return function(){Gx(this,e)}}function ND(e,t){return function(){(t.apply(this,arguments)?zx:Gx)(this,e)}}function PD(e,t){var n=Ux(e+"");if(arguments.length<2){for(var r=kg(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?ND:t?ID:RD)(n,t))}function kD(){this.textContent=""}function DD(e){return function(){this.textContent=e}}function OD(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function LD(e){return arguments.length?this.each(e==null?kD:(typeof e=="function"?OD:DD)(e)):this.node().textContent}function $D(){this.innerHTML=""}function FD(e){return function(){this.innerHTML=e}}function BD(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function UD(e){return arguments.length?this.each(e==null?$D:(typeof e=="function"?BD:FD)(e)):this.node().innerHTML}function WD(){this.nextSibling&&this.parentNode.appendChild(this)}function zD(){return this.each(WD)}function GD(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function VD(){return this.each(GD)}function HD(e){var t=typeof e=="function"?e:wf(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function qD(){return null}function YD(e,t){var n=typeof e=="function"?e:wf(e),r=t==null?qD:typeof t=="function"?t:xf(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function KD(){var e=this.parentNode;e&&e.removeChild(this)}function XD(){return this.each(KD)}function jD(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function QD(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function JD(e){return this.select(e?QD:jD)}function ZD(e){return arguments.length?this.property("__data__",e):this.node().__data__}function eO(e){return function(t){e.call(this,t,this.__data__)}}function tO(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function nO(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,i=t.length,o;n<i;++n)o=t[n],(!e.type||o.type===e.type)&&o.name===e.name?this.removeEventListener(o.type,o.listener,o.options):t[++r]=o;++r?t.length=r:delete this.__on}}}function rO(e,t,n){return function(){var r=this.__on,i,o=eO(t);if(r){for(var a=0,u=r.length;a<u;++a)if((i=r[a]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=o,i.options=n),i.value=t;return}}this.addEventListener(e.type,o,n),i={type:e.type,name:e.name,value:t,listener:o,options:n},r?r.push(i):this.__on=[i]}}function iO(e,t,n){var r=tO(e+""),i,o=r.length,a;if(arguments.length<2){var u=this.node().__on;if(u){for(var c=0,f=u.length,h;c<f;++c)for(i=0,h=u[c];i<o;++i)if((a=r[i]).type===h.type&&a.name===h.name)return h.value}return}for(u=t?rO:nO,i=0;i<o;++i)this.each(u(r[i],t,n));return this}function Vx(e,t,n){var r=Pg(e),i=r.CustomEvent;typeof i=="function"?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function oO(e,t){return function(){return Vx(this,e,t)}}function sO(e,t){return function(){return Vx(this,e,t.apply(this,arguments))}}function aO(e,t){return this.each((typeof t=="function"?sO:oO)(e,t))}function*uO(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,o=r.length,a;i<o;++i)(a=r[i])&&(yield a)}var Dg=[null];function on(e,t){this._groups=e,this._parents=t}function ho(){return new on([[document.documentElement]],Dg)}function lO(){return this}on.prototype=ho.prototype={constructor:on,select:Lk,selectAll:Bk,selectChild:Gk,selectChildren:Yk,filter:Kk,data:eD,enter:Xk,exit:nD,join:rD,merge:iD,selection:lO,order:oD,sort:sD,call:uD,nodes:lD,node:cD,size:fD,empty:hD,each:dD,attr:bD,style:CD,property:MD,classed:PD,text:LD,html:UD,raise:zD,lower:VD,append:HD,insert:YD,remove:XD,clone:JD,datum:ZD,on:iO,dispatch:aO,[Symbol.iterator]:uO};function Kt(e){return typeof e=="string"?new on([[document.querySelector(e)]],[document.documentElement]):new on([[e]],Dg)}function cO(e){return Kt(wf(e).call(document.documentElement))}var fO=0;function Hx(){return new Z0}function Z0(){this._="@"+(++fO).toString(36)}Z0.prototype=Hx.prototype={constructor:Z0,get:function(e){for(var t=this._;!(t in e);)if(!(e=e.parentNode))return;return e[t]},set:function(e,t){return e[this._]=t},remove:function(e){return this._ in e&&delete e[this._]},toString:function(){return this._}};function qx(e){let t;for(;t=e.sourceEvent;)e=t;return e}function Rn(e,t){if(e=qx(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}function hO(e,t){return e.target&&(e=qx(e),t===void 0&&(t=e.currentTarget),e=e.touches||[e]),Array.from(e,n=>Rn(n,t))}function dO(e){return typeof e=="string"?new on([document.querySelectorAll(e)],[document.documentElement]):new on([$x(e)],Dg)}const pO={passive:!1},Ya={capture:!0,passive:!1};function Wd(e){e.stopImmediatePropagation()}function ts(e){e.preventDefault(),e.stopImmediatePropagation()}function Tf(e){var t=e.document.documentElement,n=Kt(e).on("dragstart.drag",ts,Ya);"onselectstart"in t?n.on("selectstart.drag",ts,Ya):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function Cf(e,t){var n=e.document.documentElement,r=Kt(e).on("dragstart.drag",null);t&&(r.on("click.drag",ts,Ya),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const yl=e=>()=>e;function ep(e,{sourceEvent:t,subject:n,target:r,identifier:i,active:o,x:a,y:u,dx:c,dy:f,dispatch:h}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:o,enumerable:!0,configurable:!0},x:{value:a,enumerable:!0,configurable:!0},y:{value:u,enumerable:!0,configurable:!0},dx:{value:c,enumerable:!0,configurable:!0},dy:{value:f,enumerable:!0,configurable:!0},_:{value:h}})}ep.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function gO(e){return!e.ctrlKey&&!e.button}function _O(){return this.parentNode}function mO(e,t){return t??{x:e.x,y:e.y}}function vO(){return navigator.maxTouchPoints||"ontouchstart"in this}function yO(){var e=gO,t=_O,n=mO,r=vO,i={},o=fo("start","drag","end"),a=0,u,c,f,h,g=0;function d(x){x.on("mousedown.drag",_).filter(r).on("touchstart.drag",m).on("touchmove.drag",b,pO).on("touchend.drag touchcancel.drag",C).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function _(x,S){if(!(h||!e.call(this,x,S))){var R=T(this,t.call(this,x,S),x,S,"mouse");R&&(Kt(x.view).on("mousemove.drag",y,Ya).on("mouseup.drag",w,Ya),Tf(x.view),Wd(x),f=!1,u=x.clientX,c=x.clientY,R("start",x))}}function y(x){if(ts(x),!f){var S=x.clientX-u,R=x.clientY-c;f=S*S+R*R>g}i.mouse("drag",x)}function w(x){Kt(x.view).on("mousemove.drag mouseup.drag",null),Cf(x.view,f),ts(x),i.mouse("end",x)}function m(x,S){if(e.call(this,x,S)){var R=x.changedTouches,D=t.call(this,x,S),$=R.length,F,U;for(F=0;F<$;++F)(U=T(this,D,x,S,R[F].identifier,R[F]))&&(Wd(x),U("start",x,R[F]))}}function b(x){var S=x.changedTouches,R=S.length,D,$;for(D=0;D<R;++D)($=i[S[D].identifier])&&(ts(x),$("drag",x,S[D]))}function C(x){var S=x.changedTouches,R=S.length,D,$;for(h&&clearTimeout(h),h=setTimeout(function(){h=null},500),D=0;D<R;++D)($=i[S[D].identifier])&&(Wd(x),$("end",x,S[D]))}function T(x,S,R,D,$,F){var U=o.copy(),A=Rn(F||R,S),W,k,N;if((N=n.call(x,new ep("beforestart",{sourceEvent:R,target:d,identifier:$,active:a,x:A[0],y:A[1],dx:0,dy:0,dispatch:U}),D))!=null)return W=N.x-A[0]||0,k=N.y-A[1]||0,function P(L,q,Y){var j=A,B;switch(L){case"start":i[$]=P,B=a++;break;case"end":delete i[$],--a;case"drag":A=Rn(Y||q,S),B=a;break}U.call(L,x,new ep(L,{sourceEvent:q,subject:N,target:d,identifier:$,active:B,x:A[0]+W,y:A[1]+k,dx:A[0]-j[0],dy:A[1]-j[1],dispatch:U}),D)}}return d.filter=function(x){return arguments.length?(e=typeof x=="function"?x:yl(!!x),d):e},d.container=function(x){return arguments.length?(t=typeof x=="function"?x:yl(x),d):t},d.subject=function(x){return arguments.length?(n=typeof x=="function"?x:yl(x),d):n},d.touchable=function(x){return arguments.length?(r=typeof x=="function"?x:yl(!!x),d):r},d.on=function(){var x=o.on.apply(o,arguments);return x===o?d:x},d.clickDistance=function(x){return arguments.length?(g=(x=+x)*x,d):Math.sqrt(g)},d}function Ns(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function _u(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function bi(){}var to=.7,hs=1/to,ns="\\s*([+-]?\\d+)\\s*",Ka="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",gr="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",bO=/^#([0-9a-f]{3,8})$/,wO=new RegExp(`^rgb\\(${ns},${ns},${ns}\\)$`),xO=new RegExp(`^rgb\\(${gr},${gr},${gr}\\)$`),TO=new RegExp(`^rgba\\(${ns},${ns},${ns},${Ka}\\)$`),CO=new RegExp(`^rgba\\(${gr},${gr},${gr},${Ka}\\)$`),EO=new RegExp(`^hsl\\(${Ka},${gr},${gr}\\)$`),SO=new RegExp(`^hsla\\(${Ka},${gr},${gr},${Ka}\\)$`),yy={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Ns(bi,gi,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:by,formatHex:by,formatHex8:AO,formatHsl:MO,formatRgb:wy,toString:wy});function by(){return this.rgb().formatHex()}function AO(){return this.rgb().formatHex8()}function MO(){return Yx(this).formatHsl()}function wy(){return this.rgb().formatRgb()}function gi(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=bO.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?xy(t):n===3?new Pt(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?bl(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?bl(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=wO.exec(e))?new Pt(t[1],t[2],t[3],1):(t=xO.exec(e))?new Pt(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=TO.exec(e))?bl(t[1],t[2],t[3],t[4]):(t=CO.exec(e))?bl(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=EO.exec(e))?Ey(t[1],t[2]/100,t[3]/100,1):(t=SO.exec(e))?Ey(t[1],t[2]/100,t[3]/100,t[4]):yy.hasOwnProperty(e)?xy(yy[e]):e==="transparent"?new Pt(NaN,NaN,NaN,0):null}function xy(e){return new Pt(e>>16&255,e>>8&255,e&255,1)}function bl(e,t,n,r){return r<=0&&(e=t=n=NaN),new Pt(e,t,n,r)}function Og(e){return e instanceof bi||(e=gi(e)),e?(e=e.rgb(),new Pt(e.r,e.g,e.b,e.opacity)):new Pt}function ds(e,t,n,r){return arguments.length===1?Og(e):new Pt(e,t,n,r??1)}function Pt(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}Ns(Pt,ds,_u(bi,{brighter(e){return e=e==null?hs:Math.pow(hs,e),new Pt(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?to:Math.pow(to,e),new Pt(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Pt(Gi(this.r),Gi(this.g),Gi(this.b),xc(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Ty,formatHex:Ty,formatHex8:IO,formatRgb:Cy,toString:Cy}));function Ty(){return`#${Wi(this.r)}${Wi(this.g)}${Wi(this.b)}`}function IO(){return`#${Wi(this.r)}${Wi(this.g)}${Wi(this.b)}${Wi((isNaN(this.opacity)?1:this.opacity)*255)}`}function Cy(){const e=xc(this.opacity);return`${e===1?"rgb(":"rgba("}${Gi(this.r)}, ${Gi(this.g)}, ${Gi(this.b)}${e===1?")":`, ${e})`}`}function xc(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Gi(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Wi(e){return e=Gi(e),(e<16?"0":"")+e.toString(16)}function Ey(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Zn(e,t,n,r)}function Yx(e){if(e instanceof Zn)return new Zn(e.h,e.s,e.l,e.opacity);if(e instanceof bi||(e=gi(e)),!e)return new Zn;if(e instanceof Zn)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),o=Math.max(t,n,r),a=NaN,u=o-i,c=(o+i)/2;return u?(t===o?a=(n-r)/u+(n<r)*6:n===o?a=(r-t)/u+2:a=(t-n)/u+4,u/=c<.5?o+i:2-o-i,a*=60):u=c>0&&c<1?0:a,new Zn(a,u,c,e.opacity)}function Tc(e,t,n,r){return arguments.length===1?Yx(e):new Zn(e,t,n,r??1)}function Zn(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}Ns(Zn,Tc,_u(bi,{brighter(e){return e=e==null?hs:Math.pow(hs,e),new Zn(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?to:Math.pow(to,e),new Zn(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new Pt(zd(e>=240?e-240:e+120,i,r),zd(e,i,r),zd(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new Zn(Sy(this.h),wl(this.s),wl(this.l),xc(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=xc(this.opacity);return`${e===1?"hsl(":"hsla("}${Sy(this.h)}, ${wl(this.s)*100}%, ${wl(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Sy(e){return e=(e||0)%360,e<0?e+360:e}function wl(e){return Math.max(0,Math.min(1,e||0))}function zd(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const Kx=Math.PI/180,Xx=180/Math.PI,Cc=18,jx=.96422,Qx=1,Jx=.82521,Zx=4/29,rs=6/29,eT=3*rs*rs,RO=rs*rs*rs;function tT(e){if(e instanceof or)return new or(e.l,e.a,e.b,e.opacity);if(e instanceof dr)return rT(e);e instanceof Pt||(e=Og(e));var t=qd(e.r),n=qd(e.g),r=qd(e.b),i=Gd((.2225045*t+.7168786*n+.0606169*r)/Qx),o,a;return t===n&&n===r?o=a=i:(o=Gd((.4360747*t+.3850649*n+.1430804*r)/jx),a=Gd((.0139322*t+.0971045*n+.7141733*r)/Jx)),new or(116*i-16,500*(o-i),200*(i-a),e.opacity)}function NO(e,t){return new or(e,0,0,t??1)}function Ec(e,t,n,r){return arguments.length===1?tT(e):new or(e,t,n,r??1)}function or(e,t,n,r){this.l=+e,this.a=+t,this.b=+n,this.opacity=+r}Ns(or,Ec,_u(bi,{brighter(e){return new or(this.l+Cc*(e??1),this.a,this.b,this.opacity)},darker(e){return new or(this.l-Cc*(e??1),this.a,this.b,this.opacity)},rgb(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return t=jx*Vd(t),e=Qx*Vd(e),n=Jx*Vd(n),new Pt(Hd(3.1338561*t-1.6168667*e-.4906146*n),Hd(-.9787684*t+1.9161415*e+.033454*n),Hd(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}}));function Gd(e){return e>RO?Math.pow(e,1/3):e/eT+Zx}function Vd(e){return e>rs?e*e*e:eT*(e-Zx)}function Hd(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function qd(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function nT(e){if(e instanceof dr)return new dr(e.h,e.c,e.l,e.opacity);if(e instanceof or||(e=tT(e)),e.a===0&&e.b===0)return new dr(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*Xx;return new dr(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function PO(e,t,n,r){return arguments.length===1?nT(e):new dr(n,t,e,r??1)}function Sc(e,t,n,r){return arguments.length===1?nT(e):new dr(e,t,n,r??1)}function dr(e,t,n,r){this.h=+e,this.c=+t,this.l=+n,this.opacity=+r}function rT(e){if(isNaN(e.h))return new or(e.l,0,0,e.opacity);var t=e.h*Kx;return new or(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}Ns(dr,Sc,_u(bi,{brighter(e){return new dr(this.h,this.c,this.l+Cc*(e??1),this.opacity)},darker(e){return new dr(this.h,this.c,this.l-Cc*(e??1),this.opacity)},rgb(){return rT(this).rgb()}}));var iT=-.14861,Lg=1.78277,$g=-.29227,Ef=-.90649,Xa=1.97294,Ay=Xa*Ef,My=Xa*Lg,Iy=Lg*$g-Ef*iT;function kO(e){if(e instanceof Vi)return new Vi(e.h,e.s,e.l,e.opacity);e instanceof Pt||(e=Og(e));var t=e.r/255,n=e.g/255,r=e.b/255,i=(Iy*r+Ay*t-My*n)/(Iy+Ay-My),o=r-i,a=(Xa*(n-i)-$g*o)/Ef,u=Math.sqrt(a*a+o*o)/(Xa*i*(1-i)),c=u?Math.atan2(a,o)*Xx-120:NaN;return new Vi(c<0?c+360:c,u,i,e.opacity)}function sr(e,t,n,r){return arguments.length===1?kO(e):new Vi(e,t,n,r??1)}function Vi(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}Ns(Vi,sr,_u(bi,{brighter(e){return e=e==null?hs:Math.pow(hs,e),new Vi(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?to:Math.pow(to,e),new Vi(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=isNaN(this.h)?0:(this.h+120)*Kx,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),r=Math.cos(e),i=Math.sin(e);return new Pt(255*(t+n*(iT*r+Lg*i)),255*(t+n*($g*r+Ef*i)),255*(t+n*(Xa*r)),this.opacity)}}));function oT(e,t,n,r,i){var o=e*e,a=o*e;return((1-3*e+3*o-a)*t+(4-6*o+3*a)*n+(1+3*e+3*o-3*a)*r+a*i)/6}function sT(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),i=e[r],o=e[r+1],a=r>0?e[r-1]:2*i-o,u=r<t-1?e[r+2]:2*o-i;return oT((n-r/t)*t,a,i,o,u)}}function aT(e){var t=e.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*t),i=e[(r+t-1)%t],o=e[r%t],a=e[(r+1)%t],u=e[(r+2)%t];return oT((n-r/t)*t,i,o,a,u)}}const Sf=e=>()=>e;function uT(e,t){return function(n){return e+n*t}}function DO(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function Af(e,t){var n=t-e;return n?uT(e,n>180||n<-180?n-360*Math.round(n/360):n):Sf(isNaN(e)?t:e)}function OO(e){return(e=+e)==1?kt:function(t,n){return n-t?DO(t,n,e):Sf(isNaN(t)?n:t)}}function kt(e,t){var n=t-e;return n?uT(e,n):Sf(isNaN(e)?t:e)}const ja=function e(t){var n=OO(t);function r(i,o){var a=n((i=ds(i)).r,(o=ds(o)).r),u=n(i.g,o.g),c=n(i.b,o.b),f=kt(i.opacity,o.opacity);return function(h){return i.r=a(h),i.g=u(h),i.b=c(h),i.opacity=f(h),i+""}}return r.gamma=e,r}(1);function lT(e){return function(t){var n=t.length,r=new Array(n),i=new Array(n),o=new Array(n),a,u;for(a=0;a<n;++a)u=ds(t[a]),r[a]=u.r||0,i[a]=u.g||0,o[a]=u.b||0;return r=e(r),i=e(i),o=e(o),u.opacity=1,function(c){return u.r=r(c),u.g=i(c),u.b=o(c),u+""}}}var cT=lT(sT),LO=lT(aT);function Fg(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(o){for(i=0;i<n;++i)r[i]=e[i]*(1-o)+t[i]*o;return r}}function fT(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function $O(e,t){return(fT(t)?Fg:hT)(e,t)}function hT(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),o=new Array(n),a;for(a=0;a<r;++a)i[a]=wi(e[a],t[a]);for(;a<n;++a)o[a]=t[a];return function(u){for(a=0;a<r;++a)o[a]=i[a](u);return o}}function dT(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function Gn(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function pT(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=wi(e[i],t[i]):r[i]=t[i];return function(o){for(i in n)r[i]=n[i](o);return r}}var tp=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Yd=new RegExp(tp.source,"g");function FO(e){return function(){return e}}function BO(e){return function(t){return e(t)+""}}function Bg(e,t){var n=tp.lastIndex=Yd.lastIndex=0,r,i,o,a=-1,u=[],c=[];for(e=e+"",t=t+"";(r=tp.exec(e))&&(i=Yd.exec(t));)(o=i.index)>n&&(o=t.slice(n,o),u[a]?u[a]+=o:u[++a]=o),(r=r[0])===(i=i[0])?u[a]?u[a]+=i:u[++a]=i:(u[++a]=null,c.push({i:a,x:Gn(r,i)})),n=Yd.lastIndex;return n<t.length&&(o=t.slice(n),u[a]?u[a]+=o:u[++a]=o),u.length<2?c[0]?BO(c[0].x):FO(t):(t=c.length,function(f){for(var h=0,g;h<t;++h)u[(g=c[h]).i]=g.x(f);return u.join("")})}function wi(e,t){var n=typeof t,r;return t==null||n==="boolean"?Sf(t):(n==="number"?Gn:n==="string"?(r=gi(t))?(t=r,ja):Bg:t instanceof gi?ja:t instanceof Date?dT:fT(t)?Fg:Array.isArray(t)?hT:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?pT:Gn)(e,t)}function UO(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}function WO(e,t){var n=Af(+e,+t);return function(r){var i=n(r);return i-360*Math.floor(i/360)}}function Mf(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var Ry=180/Math.PI,np={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function gT(e,t,n,r,i,o){var a,u,c;return(a=Math.sqrt(e*e+t*t))&&(e/=a,t/=a),(c=e*n+t*r)&&(n-=e*c,r-=t*c),(u=Math.sqrt(n*n+r*r))&&(n/=u,r/=u,c/=u),e*r<t*n&&(e=-e,t=-t,c=-c,a=-a),{translateX:i,translateY:o,rotate:Math.atan2(t,e)*Ry,skewX:Math.atan(c)*Ry,scaleX:a,scaleY:u}}var xl;function zO(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?np:gT(t.a,t.b,t.c,t.d,t.e,t.f)}function GO(e){return e==null||(xl||(xl=document.createElementNS("http://www.w3.org/2000/svg","g")),xl.setAttribute("transform",e),!(e=xl.transform.baseVal.consolidate()))?np:(e=e.matrix,gT(e.a,e.b,e.c,e.d,e.e,e.f))}function _T(e,t,n,r){function i(f){return f.length?f.pop()+" ":""}function o(f,h,g,d,_,y){if(f!==g||h!==d){var w=_.push("translate(",null,t,null,n);y.push({i:w-4,x:Gn(f,g)},{i:w-2,x:Gn(h,d)})}else(g||d)&&_.push("translate("+g+t+d+n)}function a(f,h,g,d){f!==h?(f-h>180?h+=360:h-f>180&&(f+=360),d.push({i:g.push(i(g)+"rotate(",null,r)-2,x:Gn(f,h)})):h&&g.push(i(g)+"rotate("+h+r)}function u(f,h,g,d){f!==h?d.push({i:g.push(i(g)+"skewX(",null,r)-2,x:Gn(f,h)}):h&&g.push(i(g)+"skewX("+h+r)}function c(f,h,g,d,_,y){if(f!==g||h!==d){var w=_.push(i(_)+"scale(",null,",",null,")");y.push({i:w-4,x:Gn(f,g)},{i:w-2,x:Gn(h,d)})}else(g!==1||d!==1)&&_.push(i(_)+"scale("+g+","+d+")")}return function(f,h){var g=[],d=[];return f=e(f),h=e(h),o(f.translateX,f.translateY,h.translateX,h.translateY,g,d),a(f.rotate,h.rotate,g,d),u(f.skewX,h.skewX,g,d),c(f.scaleX,f.scaleY,h.scaleX,h.scaleY,g,d),f=h=null,function(_){for(var y=-1,w=d.length,m;++y<w;)g[(m=d[y]).i]=m.x(_);return g.join("")}}}var mT=_T(zO,"px, ","px)","deg)"),vT=_T(GO,", ",")",")"),VO=1e-12;function Ny(e){return((e=Math.exp(e))+1/e)/2}function HO(e){return((e=Math.exp(e))-1/e)/2}function qO(e){return((e=Math.exp(2*e))-1)/(e+1)}const yT=function e(t,n,r){function i(o,a){var u=o[0],c=o[1],f=o[2],h=a[0],g=a[1],d=a[2],_=h-u,y=g-c,w=_*_+y*y,m,b;if(w<VO)b=Math.log(d/f)/t,m=function(D){return[u+D*_,c+D*y,f*Math.exp(t*D*b)]};else{var C=Math.sqrt(w),T=(d*d-f*f+r*w)/(2*f*n*C),x=(d*d-f*f-r*w)/(2*d*n*C),S=Math.log(Math.sqrt(T*T+1)-T),R=Math.log(Math.sqrt(x*x+1)-x);b=(R-S)/t,m=function(D){var $=D*b,F=Ny(S),U=f/(n*C)*(F*qO(t*$+S)-HO(S));return[u+U*_,c+U*y,f*F/Ny(t*$+S)]}}return m.duration=b*1e3*t/Math.SQRT2,m}return i.rho=function(o){var a=Math.max(.001,+o),u=a*a,c=u*u;return e(a,u,c)},i}(Math.SQRT2,2,4);function bT(e){return function(t,n){var r=e((t=Tc(t)).h,(n=Tc(n)).h),i=kt(t.s,n.s),o=kt(t.l,n.l),a=kt(t.opacity,n.opacity);return function(u){return t.h=r(u),t.s=i(u),t.l=o(u),t.opacity=a(u),t+""}}}const YO=bT(Af);var KO=bT(kt);function XO(e,t){var n=kt((e=Ec(e)).l,(t=Ec(t)).l),r=kt(e.a,t.a),i=kt(e.b,t.b),o=kt(e.opacity,t.opacity);return function(a){return e.l=n(a),e.a=r(a),e.b=i(a),e.opacity=o(a),e+""}}function wT(e){return function(t,n){var r=e((t=Sc(t)).h,(n=Sc(n)).h),i=kt(t.c,n.c),o=kt(t.l,n.l),a=kt(t.opacity,n.opacity);return function(u){return t.h=r(u),t.c=i(u),t.l=o(u),t.opacity=a(u),t+""}}}const jO=wT(Af);var QO=wT(kt);function xT(e){return function t(n){n=+n;function r(i,o){var a=e((i=sr(i)).h,(o=sr(o)).h),u=kt(i.s,o.s),c=kt(i.l,o.l),f=kt(i.opacity,o.opacity);return function(h){return i.h=a(h),i.s=u(h),i.l=c(Math.pow(h,n)),i.opacity=f(h),i+""}}return r.gamma=t,r}(1)}const JO=xT(Af);var If=xT(kt);function TT(e,t){t===void 0&&(t=e,e=wi);for(var n=0,r=t.length-1,i=t[0],o=new Array(r<0?0:r);n<r;)o[n]=e(i,i=t[++n]);return function(a){var u=Math.max(0,Math.min(r-1,Math.floor(a*=r)));return o[u](a-u)}}function ZO(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e(r/(t-1));return n}var ps=0,ha=0,ra=0,CT=1e3,Ac,da,Mc=0,no=0,Rf=0,Qa=typeof performance=="object"&&performance.now?performance:Date,ET=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function mu(){return no||(ET(eL),no=Qa.now()+Rf)}function eL(){no=0}function Ja(){this._call=this._time=this._next=null}Ja.prototype=Nf.prototype={constructor:Ja,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?mu():+n)+(t==null?0:+t),!this._next&&da!==this&&(da?da._next=this:Ac=this,da=this),this._call=e,this._time=n,rp()},stop:function(){this._call&&(this._call=null,this._time=1/0,rp())}};function Nf(e,t,n){var r=new Ja;return r.restart(e,t,n),r}function ST(){mu(),++ps;for(var e=Ac,t;e;)(t=no-e._time)>=0&&e._call.call(void 0,t),e=e._next;--ps}function Py(){no=(Mc=Qa.now())+Rf,ps=ha=0;try{ST()}finally{ps=0,nL(),no=0}}function tL(){var e=Qa.now(),t=e-Mc;t>CT&&(Rf-=t,Mc=e)}function nL(){for(var e,t=Ac,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:Ac=n);da=e,rp(r)}function rp(e){if(!ps){ha&&(ha=clearTimeout(ha));var t=e-no;t>24?(e<1/0&&(ha=setTimeout(Py,e-Qa.now()-Rf)),ra&&(ra=clearInterval(ra))):(ra||(Mc=Qa.now(),ra=setInterval(tL,CT)),ps=1,ET(Py))}}function ip(e,t,n){var r=new Ja;return t=t==null?0:+t,r.restart(i=>{r.stop(),e(i+t)},t,n),r}function rL(e,t,n){var r=new Ja,i=t;return t==null?(r.restart(e,t,n),r):(r._restart=r.restart,r.restart=function(o,a,u){a=+a,u=u==null?mu():+u,r._restart(function c(f){f+=i,r._restart(c,i+=a,u),o(f)},a,u)},r.restart(e,t,n),r)}var iL=fo("start","end","cancel","interrupt"),oL=[],AT=0,op=1,sp=2,Hl=3,ky=4,ap=5,ql=6;function Pf(e,t,n,r,i,o){var a=e.__transition;if(!a)e.__transition={};else if(n in a)return;sL(e,n,{name:t,index:r,group:i,on:iL,tween:oL,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:AT})}function Ug(e,t){var n=ar(e,t);if(n.state>AT)throw new Error("too late; already scheduled");return n}function br(e,t){var n=ar(e,t);if(n.state>Hl)throw new Error("too late; already running");return n}function ar(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function sL(e,t,n){var r=e.__transition,i;r[t]=n,n.timer=Nf(o,0,n.time);function o(f){n.state=op,n.timer.restart(a,n.delay,n.time),n.delay<=f&&a(f-n.delay)}function a(f){var h,g,d,_;if(n.state!==op)return c();for(h in r)if(_=r[h],_.name===n.name){if(_.state===Hl)return ip(a);_.state===ky?(_.state=ql,_.timer.stop(),_.on.call("interrupt",e,e.__data__,_.index,_.group),delete r[h]):+h<t&&(_.state=ql,_.timer.stop(),_.on.call("cancel",e,e.__data__,_.index,_.group),delete r[h])}if(ip(function(){n.state===Hl&&(n.state=ky,n.timer.restart(u,n.delay,n.time),u(f))}),n.state=sp,n.on.call("start",e,e.__data__,n.index,n.group),n.state===sp){for(n.state=Hl,i=new Array(d=n.tween.length),h=0,g=-1;h<d;++h)(_=n.tween[h].value.call(e,e.__data__,n.index,n.group))&&(i[++g]=_);i.length=g+1}}function u(f){for(var h=f<n.duration?n.ease.call(null,f/n.duration):(n.timer.restart(c),n.state=ap,1),g=-1,d=i.length;++g<d;)i[g].call(e,h);n.state===ap&&(n.on.call("end",e,e.__data__,n.index,n.group),c())}function c(){n.state=ql,n.timer.stop(),delete r[t];for(var f in r)return;delete e.__transition}}function Hi(e,t){var n=e.__transition,r,i,o=!0,a;if(n){t=t==null?null:t+"";for(a in n){if((r=n[a]).name!==t){o=!1;continue}i=r.state>sp&&r.state<ap,r.state=ql,r.timer.stop(),r.on.call(i?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[a]}o&&delete e.__transition}}function aL(e){return this.each(function(){Hi(this,e)})}function uL(e,t){var n,r;return function(){var i=br(this,e),o=i.tween;if(o!==n){r=n=o;for(var a=0,u=r.length;a<u;++a)if(r[a].name===t){r=r.slice(),r.splice(a,1);break}}i.tween=r}}function lL(e,t,n){var r,i;if(typeof n!="function")throw new Error;return function(){var o=br(this,e),a=o.tween;if(a!==r){i=(r=a).slice();for(var u={name:t,value:n},c=0,f=i.length;c<f;++c)if(i[c].name===t){i[c]=u;break}c===f&&i.push(u)}o.tween=i}}function cL(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=ar(this.node(),n).tween,i=0,o=r.length,a;i<o;++i)if((a=r[i]).name===e)return a.value;return null}return this.each((t==null?uL:lL)(n,e,t))}function Wg(e,t,n){var r=e._id;return e.each(function(){var i=br(this,r);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return ar(i,r).value[t]}}function MT(e,t){var n;return(typeof t=="number"?Gn:t instanceof gi?ja:(n=gi(t))?(t=n,ja):Bg)(e,t)}function fL(e){return function(){this.removeAttribute(e)}}function hL(e){return function(){this.removeAttributeNS(e.space,e.local)}}function dL(e,t,n){var r,i=n+"",o;return function(){var a=this.getAttribute(e);return a===i?null:a===r?o:o=t(r=a,n)}}function pL(e,t,n){var r,i=n+"",o;return function(){var a=this.getAttributeNS(e.space,e.local);return a===i?null:a===r?o:o=t(r=a,n)}}function gL(e,t,n){var r,i,o;return function(){var a,u=n(this),c;return u==null?void this.removeAttribute(e):(a=this.getAttribute(e),c=u+"",a===c?null:a===r&&c===i?o:(i=c,o=t(r=a,u)))}}function _L(e,t,n){var r,i,o;return function(){var a,u=n(this),c;return u==null?void this.removeAttributeNS(e.space,e.local):(a=this.getAttributeNS(e.space,e.local),c=u+"",a===c?null:a===r&&c===i?o:(i=c,o=t(r=a,u)))}}function mL(e,t){var n=gu(e),r=n==="transform"?vT:MT;return this.attrTween(e,typeof t=="function"?(n.local?_L:gL)(n,r,Wg(this,"attr."+e,t)):t==null?(n.local?hL:fL)(n):(n.local?pL:dL)(n,r,t))}function vL(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function yL(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function bL(e,t){var n,r;function i(){var o=t.apply(this,arguments);return o!==r&&(n=(r=o)&&yL(e,o)),n}return i._value=t,i}function wL(e,t){var n,r;function i(){var o=t.apply(this,arguments);return o!==r&&(n=(r=o)&&vL(e,o)),n}return i._value=t,i}function xL(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=gu(e);return this.tween(n,(r.local?bL:wL)(r,t))}function TL(e,t){return function(){Ug(this,e).delay=+t.apply(this,arguments)}}function CL(e,t){return t=+t,function(){Ug(this,e).delay=t}}function EL(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?TL:CL)(t,e)):ar(this.node(),t).delay}function SL(e,t){return function(){br(this,e).duration=+t.apply(this,arguments)}}function AL(e,t){return t=+t,function(){br(this,e).duration=t}}function ML(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?SL:AL)(t,e)):ar(this.node(),t).duration}function IL(e,t){if(typeof t!="function")throw new Error;return function(){br(this,e).ease=t}}function RL(e){var t=this._id;return arguments.length?this.each(IL(t,e)):ar(this.node(),t).ease}function NL(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;br(this,e).ease=n}}function PL(e){if(typeof e!="function")throw new Error;return this.each(NL(this._id,e))}function kL(e){typeof e!="function"&&(e=Ng(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o=t[i],a=o.length,u=r[i]=[],c,f=0;f<a;++f)(c=o[f])&&e.call(c,c.__data__,f,o)&&u.push(c);return new _r(r,this._parents,this._name,this._id)}function DL(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,o=Math.min(r,i),a=new Array(r),u=0;u<o;++u)for(var c=t[u],f=n[u],h=c.length,g=a[u]=new Array(h),d,_=0;_<h;++_)(d=c[_]||f[_])&&(g[_]=d);for(;u<r;++u)a[u]=t[u];return new _r(a,this._parents,this._name,this._id)}function OL(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function LL(e,t,n){var r,i,o=OL(t)?Ug:br;return function(){var a=o(this,e),u=a.on;u!==r&&(i=(r=u).copy()).on(t,n),a.on=i}}function $L(e,t){var n=this._id;return arguments.length<2?ar(this.node(),n).on.on(e):this.each(LL(n,e,t))}function FL(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function BL(){return this.on("end.remove",FL(this._id))}function UL(e){var t=this._name,n=this._id;typeof e!="function"&&(e=xf(e));for(var r=this._groups,i=r.length,o=new Array(i),a=0;a<i;++a)for(var u=r[a],c=u.length,f=o[a]=new Array(c),h,g,d=0;d<c;++d)(h=u[d])&&(g=e.call(h,h.__data__,d,u))&&("__data__"in h&&(g.__data__=h.__data__),f[d]=g,Pf(f[d],t,n,d,f,ar(h,n)));return new _r(o,this._parents,t,n)}function WL(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Rg(e));for(var r=this._groups,i=r.length,o=[],a=[],u=0;u<i;++u)for(var c=r[u],f=c.length,h,g=0;g<f;++g)if(h=c[g]){for(var d=e.call(h,h.__data__,g,c),_,y=ar(h,n),w=0,m=d.length;w<m;++w)(_=d[w])&&Pf(_,t,n,w,d,y);o.push(d),a.push(h)}return new _r(o,a,t,n)}var zL=ho.prototype.constructor;function GL(){return new zL(this._groups,this._parents)}function VL(e,t){var n,r,i;return function(){var o=eo(this,e),a=(this.style.removeProperty(e),eo(this,e));return o===a?null:o===n&&a===r?i:i=t(n=o,r=a)}}function IT(e){return function(){this.style.removeProperty(e)}}function HL(e,t,n){var r,i=n+"",o;return function(){var a=eo(this,e);return a===i?null:a===r?o:o=t(r=a,n)}}function qL(e,t,n){var r,i,o;return function(){var a=eo(this,e),u=n(this),c=u+"";return u==null&&(c=u=(this.style.removeProperty(e),eo(this,e))),a===c?null:a===r&&c===i?o:(i=c,o=t(r=a,u))}}function YL(e,t){var n,r,i,o="style."+t,a="end."+o,u;return function(){var c=br(this,e),f=c.on,h=c.value[o]==null?u||(u=IT(t)):void 0;(f!==n||i!==h)&&(r=(n=f).copy()).on(a,i=h),c.on=r}}function KL(e,t,n){var r=(e+="")=="transform"?mT:MT;return t==null?this.styleTween(e,VL(e,r)).on("end.style."+e,IT(e)):typeof t=="function"?this.styleTween(e,qL(e,r,Wg(this,"style."+e,t))).each(YL(this._id,e)):this.styleTween(e,HL(e,r,t),n).on("end.style."+e,null)}function XL(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function jL(e,t,n){var r,i;function o(){var a=t.apply(this,arguments);return a!==i&&(r=(i=a)&&XL(e,a,n)),r}return o._value=t,o}function QL(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,jL(e,t,n??""))}function JL(e){return function(){this.textContent=e}}function ZL(e){return function(){var t=e(this);this.textContent=t??""}}function e$(e){return this.tween("text",typeof e=="function"?ZL(Wg(this,"text",e)):JL(e==null?"":e+""))}function t$(e){return function(t){this.textContent=e.call(this,t)}}function n$(e){var t,n;function r(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&t$(i)),t}return r._value=e,r}function r$(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,n$(e))}function i$(){for(var e=this._name,t=this._id,n=NT(),r=this._groups,i=r.length,o=0;o<i;++o)for(var a=r[o],u=a.length,c,f=0;f<u;++f)if(c=a[f]){var h=ar(c,t);Pf(c,e,n,f,a,{time:h.time+h.delay+h.duration,delay:0,duration:h.duration,ease:h.ease})}return new _r(r,this._parents,e,n)}function o$(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(o,a){var u={value:a},c={value:function(){--i===0&&o()}};n.each(function(){var f=br(this,r),h=f.on;h!==e&&(t=(e=h).copy(),t._.cancel.push(u),t._.interrupt.push(u),t._.end.push(c)),f.on=t}),i===0&&o()})}var s$=0;function _r(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function RT(e){return ho().transition(e)}function NT(){return++s$}var Nr=ho.prototype;_r.prototype=RT.prototype={constructor:_r,select:UL,selectAll:WL,selectChild:Nr.selectChild,selectChildren:Nr.selectChildren,filter:kL,merge:DL,selection:GL,transition:i$,call:Nr.call,nodes:Nr.nodes,node:Nr.node,size:Nr.size,empty:Nr.empty,each:Nr.each,on:$L,attr:mL,attrTween:xL,style:KL,styleTween:QL,text:e$,textTween:r$,remove:BL,tween:cL,delay:EL,duration:ML,ease:RL,easeVarying:PL,end:o$,[Symbol.iterator]:Nr[Symbol.iterator]};const a$=e=>+e;function u$(e){return e*e}function l$(e){return e*(2-e)}function Dy(e){return((e*=2)<=1?e*e:--e*(2-e)+1)/2}function c$(e){return e*e*e}function f$(e){return--e*e*e+1}function up(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var zg=3,h$=function e(t){t=+t;function n(r){return Math.pow(r,t)}return n.exponent=e,n}(zg),d$=function e(t){t=+t;function n(r){return 1-Math.pow(1-r,t)}return n.exponent=e,n}(zg),Oy=function e(t){t=+t;function n(r){return((r*=2)<=1?Math.pow(r,t):2-Math.pow(2-r,t))/2}return n.exponent=e,n}(zg),PT=Math.PI,kT=PT/2;function p$(e){return+e==1?1:1-Math.cos(e*kT)}function g$(e){return Math.sin(e*kT)}function Ly(e){return(1-Math.cos(PT*e))/2}function _i(e){return(Math.pow(2,-10*e)-.0009765625)*1.0009775171065494}function _$(e){return _i(1-+e)}function m$(e){return 1-_i(e)}function $y(e){return((e*=2)<=1?_i(1-e):2-_i(e-1))/2}function v$(e){return 1-Math.sqrt(1-e*e)}function y$(e){return Math.sqrt(1- --e*e)}function Fy(e){return((e*=2)<=1?1-Math.sqrt(1-e*e):Math.sqrt(1-(e-=2)*e)+1)/2}var lp=4/11,b$=6/11,w$=8/11,x$=3/4,T$=9/11,C$=10/11,E$=15/16,S$=21/22,A$=63/64,Tl=1/lp/lp;function M$(e){return 1-Za(1-e)}function Za(e){return(e=+e)<lp?Tl*e*e:e<w$?Tl*(e-=b$)*e+x$:e<C$?Tl*(e-=T$)*e+E$:Tl*(e-=S$)*e+A$}function I$(e){return((e*=2)<=1?1-Za(1-e):Za(e-1)+1)/2}var Gg=1.70158,R$=function e(t){t=+t;function n(r){return(r=+r)*r*(t*(r-1)+r)}return n.overshoot=e,n}(Gg),N$=function e(t){t=+t;function n(r){return--r*r*((r+1)*t+r)+1}return n.overshoot=e,n}(Gg),By=function e(t){t=+t;function n(r){return((r*=2)<1?r*r*((t+1)*r-t):(r-=2)*r*((t+1)*r+t)+2)/2}return n.overshoot=e,n}(Gg),gs=2*Math.PI,Vg=1,Hg=.3,P$=function e(t,n){var r=Math.asin(1/(t=Math.max(1,t)))*(n/=gs);function i(o){return t*_i(- --o)*Math.sin((r-o)/n)}return i.amplitude=function(o){return e(o,n*gs)},i.period=function(o){return e(t,o)},i}(Vg,Hg),Uy=function e(t,n){var r=Math.asin(1/(t=Math.max(1,t)))*(n/=gs);function i(o){return 1-t*_i(o=+o)*Math.sin((o+r)/n)}return i.amplitude=function(o){return e(o,n*gs)},i.period=function(o){return e(t,o)},i}(Vg,Hg),k$=function e(t,n){var r=Math.asin(1/(t=Math.max(1,t)))*(n/=gs);function i(o){return((o=o*2-1)<0?t*_i(-o)*Math.sin((r-o)/n):2-t*_i(o)*Math.sin((r+o)/n))/2}return i.amplitude=function(o){return e(o,n*gs)},i.period=function(o){return e(t,o)},i}(Vg,Hg),D$={time:null,delay:0,duration:250,ease:up};function O$(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function L$(e){var t,n;e instanceof _r?(t=e._id,e=e._name):(t=NT(),(n=D$).time=mu(),e=e==null?null:e+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var a=r[o],u=a.length,c,f=0;f<u;++f)(c=a[f])&&Pf(c,e,t,f,a,n||O$(c,t));return new _r(r,this._parents,e,t)}ho.prototype.interrupt=aL;ho.prototype.transition=L$;var $$=[null];function F$(e,t){var n=e.__transition,r,i;if(n){t=t==null?null:t+"";for(i in n)if((r=n[i]).state>op&&r.name===t)return new _r([[e]],$$,t,+i)}return null}const Kd=e=>()=>e;function B$(e,{sourceEvent:t,target:n,selection:r,mode:i,dispatch:o}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},selection:{value:r,enumerable:!0,configurable:!0},mode:{value:i,enumerable:!0,configurable:!0},_:{value:o}})}function U$(e){e.stopImmediatePropagation()}function Xd(e){e.preventDefault(),e.stopImmediatePropagation()}var Wy={name:"drag"},jd={name:"space"},$o={name:"handle"},Fo={name:"center"};const{abs:zy,max:Wt,min:zt}=Math;function Gy(e){return[+e[0],+e[1]]}function cp(e){return[Gy(e[0]),Gy(e[1])]}var Yl={name:"x",handles:["w","e"].map(eu),input:function(e,t){return e==null?null:[[+e[0],t[0][1]],[+e[1],t[1][1]]]},output:function(e){return e&&[e[0][0],e[1][0]]}},Kl={name:"y",handles:["n","s"].map(eu),input:function(e,t){return e==null?null:[[t[0][0],+e[0]],[t[1][0],+e[1]]]},output:function(e){return e&&[e[0][1],e[1][1]]}},W$={name:"xy",handles:["n","w","e","s","nw","ne","sw","se"].map(eu),input:function(e){return e==null?null:cp(e)},output:function(e){return e}},Pr={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Vy={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},Hy={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},z$={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},G$={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function eu(e){return{type:e}}function V$(e){return!e.ctrlKey&&!e.button}function H$(){var e=this.ownerSVGElement||this;return e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]}function q$(){return navigator.maxTouchPoints||"ontouchstart"in this}function Qd(e){for(;!e.__brush;)if(!(e=e.parentNode))return;return e.__brush}function Y$(e){return e[0][0]===e[1][0]||e[0][1]===e[1][1]}function K$(e){var t=e.__brush;return t?t.dim.output(t.selection):null}function X$(){return qg(Yl)}function j$(){return qg(Kl)}function Q$(){return qg(W$)}function qg(e){var t=H$,n=V$,r=q$,i=!0,o=fo("start","brush","end"),a=6,u;function c(m){var b=m.property("__brush",w).selectAll(".overlay").data([eu("overlay")]);b.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",Pr.overlay).merge(b).each(function(){var T=Qd(this).extent;Kt(this).attr("x",T[0][0]).attr("y",T[0][1]).attr("width",T[1][0]-T[0][0]).attr("height",T[1][1]-T[0][1])}),m.selectAll(".selection").data([eu("selection")]).enter().append("rect").attr("class","selection").attr("cursor",Pr.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var C=m.selectAll(".handle").data(e.handles,function(T){return T.type});C.exit().remove(),C.enter().append("rect").attr("class",function(T){return"handle handle--"+T.type}).attr("cursor",function(T){return Pr[T.type]}),m.each(f).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",d).filter(r).on("touchstart.brush",d).on("touchmove.brush",_).on("touchend.brush touchcancel.brush",y).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}c.move=function(m,b,C){m.tween?m.on("start.brush",function(T){h(this,arguments).beforestart().start(T)}).on("interrupt.brush end.brush",function(T){h(this,arguments).end(T)}).tween("brush",function(){var T=this,x=T.__brush,S=h(T,arguments),R=x.selection,D=e.input(typeof b=="function"?b.apply(this,arguments):b,x.extent),$=wi(R,D);function F(U){x.selection=U===1&&D===null?null:$(U),f.call(T),S.brush()}return R!==null&&D!==null?F:F(1)}):m.each(function(){var T=this,x=arguments,S=T.__brush,R=e.input(typeof b=="function"?b.apply(T,x):b,S.extent),D=h(T,x).beforestart();Hi(T),S.selection=R===null?null:R,f.call(T),D.start(C).brush(C).end(C)})},c.clear=function(m,b){c.move(m,null,b)};function f(){var m=Kt(this),b=Qd(this).selection;b?(m.selectAll(".selection").style("display",null).attr("x",b[0][0]).attr("y",b[0][1]).attr("width",b[1][0]-b[0][0]).attr("height",b[1][1]-b[0][1]),m.selectAll(".handle").style("display",null).attr("x",function(C){return C.type[C.type.length-1]==="e"?b[1][0]-a/2:b[0][0]-a/2}).attr("y",function(C){return C.type[0]==="s"?b[1][1]-a/2:b[0][1]-a/2}).attr("width",function(C){return C.type==="n"||C.type==="s"?b[1][0]-b[0][0]+a:a}).attr("height",function(C){return C.type==="e"||C.type==="w"?b[1][1]-b[0][1]+a:a})):m.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function h(m,b,C){var T=m.__brush.emitter;return T&&(!C||!T.clean)?T:new g(m,b,C)}function g(m,b,C){this.that=m,this.args=b,this.state=m.__brush,this.active=0,this.clean=C}g.prototype={beforestart:function(){return++this.active===1&&(this.state.emitter=this,this.starting=!0),this},start:function(m,b){return this.starting?(this.starting=!1,this.emit("start",m,b)):this.emit("brush",m),this},brush:function(m,b){return this.emit("brush",m,b),this},end:function(m,b){return--this.active===0&&(delete this.state.emitter,this.emit("end",m,b)),this},emit:function(m,b,C){var T=Kt(this.that).datum();o.call(m,this.that,new B$(m,{sourceEvent:b,target:c,selection:e.output(this.state.selection),mode:C,dispatch:o}),T)}};function d(m){if(u&&!m.touches||!n.apply(this,arguments))return;var b=this,C=m.target.__data__.type,T=(i&&m.metaKey?C="overlay":C)==="selection"?Wy:i&&m.altKey?Fo:$o,x=e===Kl?null:z$[C],S=e===Yl?null:G$[C],R=Qd(b),D=R.extent,$=R.selection,F=D[0][0],U,A,W=D[0][1],k,N,P=D[1][0],L,q,Y=D[1][1],j,B,G=0,X=0,J,ie=x&&S&&i&&m.shiftKey,oe,pe,le=Array.from(m.touches||[m],ue=>{const be=ue.identifier;return ue=Rn(ue,b),ue.point0=ue.slice(),ue.identifier=be,ue});Hi(b);var _e=h(b,arguments,!0).beforestart();if(C==="overlay"){$&&(J=!0);const ue=[le[0],le[1]||le[0]];R.selection=$=[[U=e===Kl?F:zt(ue[0][0],ue[1][0]),k=e===Yl?W:zt(ue[0][1],ue[1][1])],[L=e===Kl?P:Wt(ue[0][0],ue[1][0]),j=e===Yl?Y:Wt(ue[0][1],ue[1][1])]],le.length>1&&ge(m)}else U=$[0][0],k=$[0][1],L=$[1][0],j=$[1][1];A=U,N=k,q=L,B=j;var ne=Kt(b).attr("pointer-events","none"),se=ne.selectAll(".overlay").attr("cursor",Pr[C]);if(m.touches)_e.moved=te,_e.ended=ye;else{var ce=Kt(m.view).on("mousemove.brush",te,!0).on("mouseup.brush",ye,!0);i&&ce.on("keydown.brush",Me,!0).on("keyup.brush",Ie,!0),Tf(m.view)}f.call(b),_e.start(m,T.name);function te(ue){for(const be of ue.changedTouches||[ue])for(const bt of le)bt.identifier===be.identifier&&(bt.cur=Rn(be,b));if(ie&&!oe&&!pe&&le.length===1){const be=le[0];zy(be.cur[0]-be[0])>zy(be.cur[1]-be[1])?pe=!0:oe=!0}for(const be of le)be.cur&&(be[0]=be.cur[0],be[1]=be.cur[1]);J=!0,Xd(ue),ge(ue)}function ge(ue){const be=le[0],bt=be.point0;var Xe;switch(G=be[0]-bt[0],X=be[1]-bt[1],T){case jd:case Wy:{x&&(G=Wt(F-U,zt(P-L,G)),A=U+G,q=L+G),S&&(X=Wt(W-k,zt(Y-j,X)),N=k+X,B=j+X);break}case $o:{le[1]?(x&&(A=Wt(F,zt(P,le[0][0])),q=Wt(F,zt(P,le[1][0])),x=1),S&&(N=Wt(W,zt(Y,le[0][1])),B=Wt(W,zt(Y,le[1][1])),S=1)):(x<0?(G=Wt(F-U,zt(P-U,G)),A=U+G,q=L):x>0&&(G=Wt(F-L,zt(P-L,G)),A=U,q=L+G),S<0?(X=Wt(W-k,zt(Y-k,X)),N=k+X,B=j):S>0&&(X=Wt(W-j,zt(Y-j,X)),N=k,B=j+X));break}case Fo:{x&&(A=Wt(F,zt(P,U-G*x)),q=Wt(F,zt(P,L+G*x))),S&&(N=Wt(W,zt(Y,k-X*S)),B=Wt(W,zt(Y,j+X*S)));break}}q<A&&(x*=-1,Xe=U,U=L,L=Xe,Xe=A,A=q,q=Xe,C in Vy&&se.attr("cursor",Pr[C=Vy[C]])),B<N&&(S*=-1,Xe=k,k=j,j=Xe,Xe=N,N=B,B=Xe,C in Hy&&se.attr("cursor",Pr[C=Hy[C]])),R.selection&&($=R.selection),oe&&(A=$[0][0],q=$[1][0]),pe&&(N=$[0][1],B=$[1][1]),($[0][0]!==A||$[0][1]!==N||$[1][0]!==q||$[1][1]!==B)&&(R.selection=[[A,N],[q,B]],f.call(b),_e.brush(ue,T.name))}function ye(ue){if(U$(ue),ue.touches){if(ue.touches.length)return;u&&clearTimeout(u),u=setTimeout(function(){u=null},500)}else Cf(ue.view,J),ce.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);ne.attr("pointer-events","all"),se.attr("cursor",Pr.overlay),R.selection&&($=R.selection),Y$($)&&(R.selection=null,f.call(b)),_e.end(ue,T.name)}function Me(ue){switch(ue.keyCode){case 16:{ie=x&&S;break}case 18:{T===$o&&(x&&(L=q-G*x,U=A+G*x),S&&(j=B-X*S,k=N+X*S),T=Fo,ge(ue));break}case 32:{(T===$o||T===Fo)&&(x<0?L=q-G:x>0&&(U=A-G),S<0?j=B-X:S>0&&(k=N-X),T=jd,se.attr("cursor",Pr.selection),ge(ue));break}default:return}Xd(ue)}function Ie(ue){switch(ue.keyCode){case 16:{ie&&(oe=pe=ie=!1,ge(ue));break}case 18:{T===Fo&&(x<0?L=q:x>0&&(U=A),S<0?j=B:S>0&&(k=N),T=$o,ge(ue));break}case 32:{T===jd&&(ue.altKey?(x&&(L=q-G*x,U=A+G*x),S&&(j=B-X*S,k=N+X*S),T=Fo):(x<0?L=q:x>0&&(U=A),S<0?j=B:S>0&&(k=N),T=$o),se.attr("cursor",Pr[C]),ge(ue));break}default:return}Xd(ue)}}function _(m){h(this,arguments).moved(m)}function y(m){h(this,arguments).ended(m)}function w(){var m=this.__brush||{selection:null};return m.extent=cp(t.apply(this,arguments)),m.dim=e,m}return c.extent=function(m){return arguments.length?(t=typeof m=="function"?m:Kd(cp(m)),c):t},c.filter=function(m){return arguments.length?(n=typeof m=="function"?m:Kd(!!m),c):n},c.touchable=function(m){return arguments.length?(r=typeof m=="function"?m:Kd(!!m),c):r},c.handleSize=function(m){return arguments.length?(a=+m,c):a},c.keyModifiers=function(m){return arguments.length?(i=!!m,c):i},c.on=function(){var m=o.on.apply(o,arguments);return m===o?c:m},c}var qy=Math.abs,Bo=Math.cos,Uo=Math.sin,DT=Math.PI,Cl=DT/2,Yy=DT*2,Ky=Math.max,Jd=1e-12;function Zd(e,t){return Array.from({length:t-e},(n,r)=>e+r)}function J$(e){return function(t,n){return e(t.source.value+t.target.value,n.source.value+n.target.value)}}function Z$(){return Yg(!1,!1)}function eF(){return Yg(!1,!0)}function tF(){return Yg(!0,!1)}function Yg(e,t){var n=0,r=null,i=null,o=null;function a(u){var c=u.length,f=new Array(c),h=Zd(0,c),g=new Array(c*c),d=new Array(c),_=0,y;u=Float64Array.from({length:c*c},t?(w,m)=>u[m%c][m/c|0]:(w,m)=>u[m/c|0][m%c]);for(let w=0;w<c;++w){let m=0;for(let b=0;b<c;++b)m+=u[w*c+b]+e*u[b*c+w];_+=f[w]=m}_=Ky(0,Yy-n*c)/_,y=_?n:Yy/c;{let w=0;r&&h.sort((m,b)=>r(f[m],f[b]));for(const m of h){const b=w;if(e){const C=Zd(~c+1,c).filter(T=>T<0?u[~T*c+m]:u[m*c+T]);i&&C.sort((T,x)=>i(T<0?-u[~T*c+m]:u[m*c+T],x<0?-u[~x*c+m]:u[m*c+x]));for(const T of C)if(T<0){const x=g[~T*c+m]||(g[~T*c+m]={source:null,target:null});x.target={index:m,startAngle:w,endAngle:w+=u[~T*c+m]*_,value:u[~T*c+m]}}else{const x=g[m*c+T]||(g[m*c+T]={source:null,target:null});x.source={index:m,startAngle:w,endAngle:w+=u[m*c+T]*_,value:u[m*c+T]}}d[m]={index:m,startAngle:b,endAngle:w,value:f[m]}}else{const C=Zd(0,c).filter(T=>u[m*c+T]||u[T*c+m]);i&&C.sort((T,x)=>i(u[m*c+T],u[m*c+x]));for(const T of C){let x;if(m<T?(x=g[m*c+T]||(g[m*c+T]={source:null,target:null}),x.source={index:m,startAngle:w,endAngle:w+=u[m*c+T]*_,value:u[m*c+T]}):(x=g[T*c+m]||(g[T*c+m]={source:null,target:null}),x.target={index:m,startAngle:w,endAngle:w+=u[m*c+T]*_,value:u[m*c+T]},m===T&&(x.source=x.target)),x.source&&x.target&&x.source.value<x.target.value){const S=x.source;x.source=x.target,x.target=S}}d[m]={index:m,startAngle:b,endAngle:w,value:f[m]}}w+=y}}return g=Object.values(g),g.groups=d,o?g.sort(o):g}return a.padAngle=function(u){return arguments.length?(n=Ky(0,u),a):n},a.sortGroups=function(u){return arguments.length?(r=u,a):r},a.sortSubgroups=function(u){return arguments.length?(i=u,a):i},a.sortChords=function(u){return arguments.length?(u==null?o=null:(o=J$(u))._=u,a):o&&o._},a}const fp=Math.PI,hp=2*fp,$i=1e-6,nF=hp-$i;function OT(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function rF(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return OT;const n=10**t;return function(r){this._+=r[0];for(let i=1,o=r.length;i<o;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}let vu=class{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?OT:rF(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,i){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(t,n,r,i,o,a){this._append`C${+t},${+n},${+r},${+i},${this._x1=+o},${this._y1=+a}`}arcTo(t,n,r,i,o){if(t=+t,n=+n,r=+r,i=+i,o=+o,o<0)throw new Error(`negative radius: ${o}`);let a=this._x1,u=this._y1,c=r-t,f=i-n,h=a-t,g=u-n,d=h*h+g*g;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(d>$i)if(!(Math.abs(g*c-f*h)>$i)||!o)this._append`L${this._x1=t},${this._y1=n}`;else{let _=r-a,y=i-u,w=c*c+f*f,m=_*_+y*y,b=Math.sqrt(w),C=Math.sqrt(d),T=o*Math.tan((fp-Math.acos((w+d-m)/(2*b*C)))/2),x=T/C,S=T/b;Math.abs(x-1)>$i&&this._append`L${t+x*h},${n+x*g}`,this._append`A${o},${o},0,0,${+(g*_>h*y)},${this._x1=t+S*c},${this._y1=n+S*f}`}}arc(t,n,r,i,o,a){if(t=+t,n=+n,r=+r,a=!!a,r<0)throw new Error(`negative radius: ${r}`);let u=r*Math.cos(i),c=r*Math.sin(i),f=t+u,h=n+c,g=1^a,d=a?i-o:o-i;this._x1===null?this._append`M${f},${h}`:(Math.abs(this._x1-f)>$i||Math.abs(this._y1-h)>$i)&&this._append`L${f},${h}`,r&&(d<0&&(d=d%hp+hp),d>nF?this._append`A${r},${r},0,1,${g},${t-u},${n-c}A${r},${r},0,1,${g},${this._x1=f},${this._y1=h}`:d>$i&&this._append`A${r},${r},0,${+(d>=fp)},${g},${this._x1=t+r*Math.cos(o)},${this._y1=n+r*Math.sin(o)}`)}rect(t,n,r,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}};function Kg(){return new vu}Kg.prototype=vu.prototype;function iF(e=3){return new vu(+e)}var oF=Array.prototype.slice;function ki(e){return function(){return e}}function sF(e){return e.source}function aF(e){return e.target}function Xy(e){return e.radius}function uF(e){return e.startAngle}function lF(e){return e.endAngle}function cF(){return 0}function fF(){return 10}function LT(e){var t=sF,n=aF,r=Xy,i=Xy,o=uF,a=lF,u=cF,c=null;function f(){var h,g=t.apply(this,arguments),d=n.apply(this,arguments),_=u.apply(this,arguments)/2,y=oF.call(arguments),w=+r.apply(this,(y[0]=g,y)),m=o.apply(this,y)-Cl,b=a.apply(this,y)-Cl,C=+i.apply(this,(y[0]=d,y)),T=o.apply(this,y)-Cl,x=a.apply(this,y)-Cl;if(c||(c=h=Kg()),_>Jd&&(qy(b-m)>_*2+Jd?b>m?(m+=_,b-=_):(m-=_,b+=_):m=b=(m+b)/2,qy(x-T)>_*2+Jd?x>T?(T+=_,x-=_):(T-=_,x+=_):T=x=(T+x)/2),c.moveTo(w*Bo(m),w*Uo(m)),c.arc(0,0,w,m,b),m!==T||b!==x)if(e){var S=+e.apply(this,arguments),R=C-S,D=(T+x)/2;c.quadraticCurveTo(0,0,R*Bo(T),R*Uo(T)),c.lineTo(C*Bo(D),C*Uo(D)),c.lineTo(R*Bo(x),R*Uo(x))}else c.quadraticCurveTo(0,0,C*Bo(T),C*Uo(T)),c.arc(0,0,C,T,x);if(c.quadraticCurveTo(0,0,w*Bo(m),w*Uo(m)),c.closePath(),h)return c=null,h+""||null}return e&&(f.headRadius=function(h){return arguments.length?(e=typeof h=="function"?h:ki(+h),f):e}),f.radius=function(h){return arguments.length?(r=i=typeof h=="function"?h:ki(+h),f):r},f.sourceRadius=function(h){return arguments.length?(r=typeof h=="function"?h:ki(+h),f):r},f.targetRadius=function(h){return arguments.length?(i=typeof h=="function"?h:ki(+h),f):i},f.startAngle=function(h){return arguments.length?(o=typeof h=="function"?h:ki(+h),f):o},f.endAngle=function(h){return arguments.length?(a=typeof h=="function"?h:ki(+h),f):a},f.padAngle=function(h){return arguments.length?(u=typeof h=="function"?h:ki(+h),f):u},f.source=function(h){return arguments.length?(t=h,f):t},f.target=function(h){return arguments.length?(n=h,f):n},f.context=function(h){return arguments.length?(c=h??null,f):c},f}function hF(){return LT()}function dF(){return LT(fF)}var pF=Array.prototype,$T=pF.slice;function gF(e,t){return e-t}function _F(e){for(var t=0,n=e.length,r=e[n-1][1]*e[0][0]-e[n-1][0]*e[0][1];++t<n;)r+=e[t-1][1]*e[t][0]-e[t-1][0]*e[t][1];return r}const oi=e=>()=>e;function mF(e,t){for(var n=-1,r=t.length,i;++n<r;)if(i=vF(e,t[n]))return i;return 0}function vF(e,t){for(var n=t[0],r=t[1],i=-1,o=0,a=e.length,u=a-1;o<a;u=o++){var c=e[o],f=c[0],h=c[1],g=e[u],d=g[0],_=g[1];if(yF(c,g,t))return 0;h>r!=_>r&&n<(d-f)*(r-h)/(_-h)+f&&(i=-i)}return i}function yF(e,t,n){var r;return bF(e,t,n)&&wF(e[r=+(e[0]===t[0])],n[r],t[r])}function bF(e,t,n){return(t[0]-e[0])*(n[1]-e[1])===(n[0]-e[0])*(t[1]-e[1])}function wF(e,t,n){return e<=t&&t<=n||n<=t&&t<=e}function xF(){}var kr=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function dp(){var e=1,t=1,n=Sg,r=c;function i(f){var h=n(f);if(Array.isArray(h))h=h.slice().sort(gF);else{const g=Ma(f,TF);for(h=Ji(...Eg(g[0],g[1],h),h);h[h.length-1]>=g[1];)h.pop();for(;h[1]<g[0];)h.shift()}return h.map(g=>o(f,g))}function o(f,h){const g=h==null?NaN:+h;if(isNaN(g))throw new Error(`invalid value: ${h}`);var d=[],_=[];return a(f,g,function(y){r(y,f,g),_F(y)>0?d.push([y]):_.push(y)}),_.forEach(function(y){for(var w=0,m=d.length,b;w<m;++w)if(mF((b=d[w])[0],y)!==-1){b.push(y);return}}),{type:"MultiPolygon",value:h,coordinates:d}}function a(f,h,g){var d=new Array,_=new Array,y,w,m,b,C,T;for(y=w=-1,b=Di(f[0],h),kr[b<<1].forEach(x);++y<e-1;)m=b,b=Di(f[y+1],h),kr[m|b<<1].forEach(x);for(kr[b<<0].forEach(x);++w<t-1;){for(y=-1,b=Di(f[w*e+e],h),C=Di(f[w*e],h),kr[b<<1|C<<2].forEach(x);++y<e-1;)m=b,b=Di(f[w*e+e+y+1],h),T=C,C=Di(f[w*e+y+1],h),kr[m|b<<1|C<<2|T<<3].forEach(x);kr[b|C<<3].forEach(x)}for(y=-1,C=f[w*e]>=h,kr[C<<2].forEach(x);++y<e-1;)T=C,C=Di(f[w*e+y+1],h),kr[C<<2|T<<3].forEach(x);kr[C<<3].forEach(x);function x(S){var R=[S[0][0]+y,S[0][1]+w],D=[S[1][0]+y,S[1][1]+w],$=u(R),F=u(D),U,A;(U=_[$])?(A=d[F])?(delete _[U.end],delete d[A.start],U===A?(U.ring.push(D),g(U.ring)):d[U.start]=_[A.end]={start:U.start,end:A.end,ring:U.ring.concat(A.ring)}):(delete _[U.end],U.ring.push(D),_[U.end=F]=U):(U=d[F])?(A=_[$])?(delete d[U.start],delete _[A.end],U===A?(U.ring.push(D),g(U.ring)):d[A.start]=_[U.end]={start:A.start,end:U.end,ring:A.ring.concat(U.ring)}):(delete d[U.start],U.ring.unshift(R),d[U.start=$]=U):d[$]=_[F]={start:$,end:F,ring:[R,D]}}}function u(f){return f[0]*2+f[1]*(e+1)*4}function c(f,h,g){f.forEach(function(d){var _=d[0],y=d[1],w=_|0,m=y|0,b=e0(h[m*e+w]);_>0&&_<e&&w===_&&(d[0]=jy(_,e0(h[m*e+w-1]),b,g)),y>0&&y<t&&m===y&&(d[1]=jy(y,e0(h[(m-1)*e+w]),b,g))})}return i.contour=o,i.size=function(f){if(!arguments.length)return[e,t];var h=Math.floor(f[0]),g=Math.floor(f[1]);if(!(h>=0&&g>=0))throw new Error("invalid size");return e=h,t=g,i},i.thresholds=function(f){return arguments.length?(n=typeof f=="function"?f:Array.isArray(f)?oi($T.call(f)):oi(f),i):n},i.smooth=function(f){return arguments.length?(r=f?c:xF,i):r===c},i}function TF(e){return isFinite(e)?e:NaN}function Di(e,t){return e==null?!1:+e>=t}function e0(e){return e==null||isNaN(e=+e)?-1/0:e}function jy(e,t,n,r){const i=r-t,o=n-t,a=isFinite(i)||isFinite(o)?i/o:Math.sign(i)/Math.sign(o);return isNaN(a)?e:e+a-.5}function CF(e){return e[0]}function EF(e){return e[1]}function SF(){return 1}function AF(){var e=CF,t=EF,n=SF,r=960,i=500,o=20,a=2,u=o*3,c=r+u*2>>a,f=i+u*2>>a,h=oi(20);function g(C){var T=new Float32Array(c*f),x=Math.pow(2,-a),S=-1;for(const k of C){var R=(e(k,++S,C)+u)*x,D=(t(k,S,C)+u)*x,$=+n(k,S,C);if($&&R>=0&&R<c&&D>=0&&D<f){var F=Math.floor(R),U=Math.floor(D),A=R-F-.5,W=D-U-.5;T[F+U*c]+=(1-A)*(1-W)*$,T[F+1+U*c]+=A*(1-W)*$,T[F+1+(U+1)*c]+=A*W*$,T[F+(U+1)*c]+=(1-A)*W*$}}return _x({data:T,width:c,height:f},o*x),T}function d(C){var T=g(C),x=h(T),S=Math.pow(2,2*a);return Array.isArray(x)||(x=Ji(Number.MIN_VALUE,Ha(T)/S,x)),dp().size([c,f]).thresholds(x.map(R=>R*S))(T).map((R,D)=>(R.value=+x[D],_(R)))}d.contours=function(C){var T=g(C),x=dp().size([c,f]),S=Math.pow(2,2*a),R=D=>{D=+D;var $=_(x.contour(T,D*S));return $.value=D,$};return Object.defineProperty(R,"max",{get:()=>Ha(T)/S}),R};function _(C){return C.coordinates.forEach(y),C}function y(C){C.forEach(w)}function w(C){C.forEach(m)}function m(C){C[0]=C[0]*Math.pow(2,a)-u,C[1]=C[1]*Math.pow(2,a)-u}function b(){return u=o*3,c=r+u*2>>a,f=i+u*2>>a,d}return d.x=function(C){return arguments.length?(e=typeof C=="function"?C:oi(+C),d):e},d.y=function(C){return arguments.length?(t=typeof C=="function"?C:oi(+C),d):t},d.weight=function(C){return arguments.length?(n=typeof C=="function"?C:oi(+C),d):n},d.size=function(C){if(!arguments.length)return[r,i];var T=+C[0],x=+C[1];if(!(T>=0&&x>=0))throw new Error("invalid size");return r=T,i=x,b()},d.cellSize=function(C){if(!arguments.length)return 1<<a;if(!((C=+C)>=1))throw new Error("invalid cell size");return a=Math.floor(Math.log(C)/Math.LN2),b()},d.thresholds=function(C){return arguments.length?(h=typeof C=="function"?C:Array.isArray(C)?oi($T.call(C)):oi(C),d):h},d.bandwidth=function(C){if(!arguments.length)return Math.sqrt(o*(o+1));if(!((C=+C)>=0))throw new Error("invalid bandwidth");return o=(Math.sqrt(4*C*C+1)-1)/2,b()},d}const Gr=11102230246251565e-32,Gt=134217729,MF=(3+8*Gr)*Gr;function t0(e,t,n,r,i){let o,a,u,c,f=t[0],h=r[0],g=0,d=0;h>f==h>-f?(o=f,f=t[++g]):(o=h,h=r[++d]);let _=0;if(g<e&&d<n)for(h>f==h>-f?(a=f+o,u=o-(a-f),f=t[++g]):(a=h+o,u=o-(a-h),h=r[++d]),o=a,u!==0&&(i[_++]=u);g<e&&d<n;)h>f==h>-f?(a=o+f,c=a-o,u=o-(a-c)+(f-c),f=t[++g]):(a=o+h,c=a-o,u=o-(a-c)+(h-c),h=r[++d]),o=a,u!==0&&(i[_++]=u);for(;g<e;)a=o+f,c=a-o,u=o-(a-c)+(f-c),f=t[++g],o=a,u!==0&&(i[_++]=u);for(;d<n;)a=o+h,c=a-o,u=o-(a-c)+(h-c),h=r[++d],o=a,u!==0&&(i[_++]=u);return(o!==0||_===0)&&(i[_++]=o),_}function IF(e,t){let n=t[0];for(let r=1;r<e;r++)n+=t[r];return n}function yu(e){return new Float64Array(e)}const RF=(3+16*Gr)*Gr,NF=(2+12*Gr)*Gr,PF=(9+64*Gr)*Gr*Gr,Wo=yu(4),Qy=yu(8),Jy=yu(12),Zy=yu(16),Jt=yu(4);function kF(e,t,n,r,i,o,a){let u,c,f,h,g,d,_,y,w,m,b,C,T,x,S,R,D,$;const F=e-i,U=n-i,A=t-o,W=r-o;x=F*W,d=Gt*F,_=d-(d-F),y=F-_,d=Gt*W,w=d-(d-W),m=W-w,S=y*m-(x-_*w-y*w-_*m),R=A*U,d=Gt*A,_=d-(d-A),y=A-_,d=Gt*U,w=d-(d-U),m=U-w,D=y*m-(R-_*w-y*w-_*m),b=S-D,g=S-b,Wo[0]=S-(b+g)+(g-D),C=x+b,g=C-x,T=x-(C-g)+(b-g),b=T-R,g=T-b,Wo[1]=T-(b+g)+(g-R),$=C+b,g=$-C,Wo[2]=C-($-g)+(b-g),Wo[3]=$;let k=IF(4,Wo),N=NF*a;if(k>=N||-k>=N||(g=e-F,u=e-(F+g)+(g-i),g=n-U,f=n-(U+g)+(g-i),g=t-A,c=t-(A+g)+(g-o),g=r-W,h=r-(W+g)+(g-o),u===0&&c===0&&f===0&&h===0)||(N=PF*a+MF*Math.abs(k),k+=F*h+W*u-(A*f+U*c),k>=N||-k>=N))return k;x=u*W,d=Gt*u,_=d-(d-u),y=u-_,d=Gt*W,w=d-(d-W),m=W-w,S=y*m-(x-_*w-y*w-_*m),R=c*U,d=Gt*c,_=d-(d-c),y=c-_,d=Gt*U,w=d-(d-U),m=U-w,D=y*m-(R-_*w-y*w-_*m),b=S-D,g=S-b,Jt[0]=S-(b+g)+(g-D),C=x+b,g=C-x,T=x-(C-g)+(b-g),b=T-R,g=T-b,Jt[1]=T-(b+g)+(g-R),$=C+b,g=$-C,Jt[2]=C-($-g)+(b-g),Jt[3]=$;const P=t0(4,Wo,4,Jt,Qy);x=F*h,d=Gt*F,_=d-(d-F),y=F-_,d=Gt*h,w=d-(d-h),m=h-w,S=y*m-(x-_*w-y*w-_*m),R=A*f,d=Gt*A,_=d-(d-A),y=A-_,d=Gt*f,w=d-(d-f),m=f-w,D=y*m-(R-_*w-y*w-_*m),b=S-D,g=S-b,Jt[0]=S-(b+g)+(g-D),C=x+b,g=C-x,T=x-(C-g)+(b-g),b=T-R,g=T-b,Jt[1]=T-(b+g)+(g-R),$=C+b,g=$-C,Jt[2]=C-($-g)+(b-g),Jt[3]=$;const L=t0(P,Qy,4,Jt,Jy);x=u*h,d=Gt*u,_=d-(d-u),y=u-_,d=Gt*h,w=d-(d-h),m=h-w,S=y*m-(x-_*w-y*w-_*m),R=c*f,d=Gt*c,_=d-(d-c),y=c-_,d=Gt*f,w=d-(d-f),m=f-w,D=y*m-(R-_*w-y*w-_*m),b=S-D,g=S-b,Jt[0]=S-(b+g)+(g-D),C=x+b,g=C-x,T=x-(C-g)+(b-g),b=T-R,g=T-b,Jt[1]=T-(b+g)+(g-R),$=C+b,g=$-C,Jt[2]=C-($-g)+(b-g),Jt[3]=$;const q=t0(L,Jy,4,Jt,Zy);return Zy[q-1]}function El(e,t,n,r,i,o){const a=(t-o)*(n-i),u=(e-i)*(r-o),c=a-u,f=Math.abs(a+u);return Math.abs(c)>=RF*f?c:-kF(e,t,n,r,i,o,f)}const eb=Math.pow(2,-52),Sl=new Uint32Array(512);class Ic{static from(t,n=FF,r=BF){const i=t.length,o=new Float64Array(i*2);for(let a=0;a<i;a++){const u=t[a];o[2*a]=n(u),o[2*a+1]=r(u)}return new Ic(o)}constructor(t){const n=t.length>>1;if(n>0&&typeof t[0]!="number")throw new Error("Expected coords to contain numbers.");this.coords=t;const r=Math.max(2*n-5,0);this._triangles=new Uint32Array(r*3),this._halfedges=new Int32Array(r*3),this._hashSize=Math.ceil(Math.sqrt(n)),this._hullPrev=new Uint32Array(n),this._hullNext=new Uint32Array(n),this._hullTri=new Uint32Array(n),this._hullHash=new Int32Array(this._hashSize),this._ids=new Uint32Array(n),this._dists=new Float64Array(n),this.update()}update(){const{coords:t,_hullPrev:n,_hullNext:r,_hullTri:i,_hullHash:o}=this,a=t.length>>1;let u=1/0,c=1/0,f=-1/0,h=-1/0;for(let F=0;F<a;F++){const U=t[2*F],A=t[2*F+1];U<u&&(u=U),A<c&&(c=A),U>f&&(f=U),A>h&&(h=A),this._ids[F]=F}const g=(u+f)/2,d=(c+h)/2;let _,y,w;for(let F=0,U=1/0;F<a;F++){const A=n0(g,d,t[2*F],t[2*F+1]);A<U&&(_=F,U=A)}const m=t[2*_],b=t[2*_+1];for(let F=0,U=1/0;F<a;F++){if(F===_)continue;const A=n0(m,b,t[2*F],t[2*F+1]);A<U&&A>0&&(y=F,U=A)}let C=t[2*y],T=t[2*y+1],x=1/0;for(let F=0;F<a;F++){if(F===_||F===y)continue;const U=LF(m,b,C,T,t[2*F],t[2*F+1]);U<x&&(w=F,x=U)}let S=t[2*w],R=t[2*w+1];if(x===1/0){for(let A=0;A<a;A++)this._dists[A]=t[2*A]-t[0]||t[2*A+1]-t[1];Xo(this._ids,this._dists,0,a-1);const F=new Uint32Array(a);let U=0;for(let A=0,W=-1/0;A<a;A++){const k=this._ids[A],N=this._dists[k];N>W&&(F[U++]=k,W=N)}this.hull=F.subarray(0,U),this.triangles=new Uint32Array(0),this.halfedges=new Uint32Array(0);return}if(El(m,b,C,T,S,R)<0){const F=y,U=C,A=T;y=w,C=S,T=R,w=F,S=U,R=A}const D=$F(m,b,C,T,S,R);this._cx=D.x,this._cy=D.y;for(let F=0;F<a;F++)this._dists[F]=n0(t[2*F],t[2*F+1],D.x,D.y);Xo(this._ids,this._dists,0,a-1),this._hullStart=_;let $=3;r[_]=n[w]=y,r[y]=n[_]=w,r[w]=n[y]=_,i[_]=0,i[y]=1,i[w]=2,o.fill(-1),o[this._hashKey(m,b)]=_,o[this._hashKey(C,T)]=y,o[this._hashKey(S,R)]=w,this.trianglesLen=0,this._addTriangle(_,y,w,-1,-1,-1);for(let F=0,U,A;F<this._ids.length;F++){const W=this._ids[F],k=t[2*W],N=t[2*W+1];if(F>0&&Math.abs(k-U)<=eb&&Math.abs(N-A)<=eb||(U=k,A=N,W===_||W===y||W===w))continue;let P=0;for(let B=0,G=this._hashKey(k,N);B<this._hashSize&&(P=o[(G+B)%this._hashSize],!(P!==-1&&P!==r[P]));B++);P=n[P];let L=P,q;for(;q=r[L],El(k,N,t[2*L],t[2*L+1],t[2*q],t[2*q+1])>=0;)if(L=q,L===P){L=-1;break}if(L===-1)continue;let Y=this._addTriangle(L,W,r[L],-1,-1,i[L]);i[W]=this._legalize(Y+2),i[L]=Y,$++;let j=r[L];for(;q=r[j],El(k,N,t[2*j],t[2*j+1],t[2*q],t[2*q+1])<0;)Y=this._addTriangle(j,W,q,i[W],-1,i[j]),i[W]=this._legalize(Y+2),r[j]=j,$--,j=q;if(L===P)for(;q=n[L],El(k,N,t[2*q],t[2*q+1],t[2*L],t[2*L+1])<0;)Y=this._addTriangle(q,W,L,-1,i[L],i[q]),this._legalize(Y+2),i[q]=Y,r[L]=L,$--,L=q;this._hullStart=n[W]=L,r[L]=n[j]=W,r[W]=j,o[this._hashKey(k,N)]=W,o[this._hashKey(t[2*L],t[2*L+1])]=L}this.hull=new Uint32Array($);for(let F=0,U=this._hullStart;F<$;F++)this.hull[F]=U,U=r[U];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(t,n){return Math.floor(DF(t-this._cx,n-this._cy)*this._hashSize)%this._hashSize}_legalize(t){const{_triangles:n,_halfedges:r,coords:i}=this;let o=0,a=0;for(;;){const u=r[t],c=t-t%3;if(a=c+(t+2)%3,u===-1){if(o===0)break;t=Sl[--o];continue}const f=u-u%3,h=c+(t+1)%3,g=f+(u+2)%3,d=n[a],_=n[t],y=n[h],w=n[g];if(OF(i[2*d],i[2*d+1],i[2*_],i[2*_+1],i[2*y],i[2*y+1],i[2*w],i[2*w+1])){n[t]=w,n[u]=d;const b=r[g];if(b===-1){let T=this._hullStart;do{if(this._hullTri[T]===g){this._hullTri[T]=t;break}T=this._hullPrev[T]}while(T!==this._hullStart)}this._link(t,b),this._link(u,r[a]),this._link(a,g);const C=f+(u+1)%3;o<Sl.length&&(Sl[o++]=C)}else{if(o===0)break;t=Sl[--o]}}return a}_link(t,n){this._halfedges[t]=n,n!==-1&&(this._halfedges[n]=t)}_addTriangle(t,n,r,i,o,a){const u=this.trianglesLen;return this._triangles[u]=t,this._triangles[u+1]=n,this._triangles[u+2]=r,this._link(u,i),this._link(u+1,o),this._link(u+2,a),this.trianglesLen+=3,u}}function DF(e,t){const n=e/(Math.abs(e)+Math.abs(t));return(t>0?3-n:1+n)/4}function n0(e,t,n,r){const i=e-n,o=t-r;return i*i+o*o}function OF(e,t,n,r,i,o,a,u){const c=e-a,f=t-u,h=n-a,g=r-u,d=i-a,_=o-u,y=c*c+f*f,w=h*h+g*g,m=d*d+_*_;return c*(g*m-w*_)-f*(h*m-w*d)+y*(h*_-g*d)<0}function LF(e,t,n,r,i,o){const a=n-e,u=r-t,c=i-e,f=o-t,h=a*a+u*u,g=c*c+f*f,d=.5/(a*f-u*c),_=(f*h-u*g)*d,y=(a*g-c*h)*d;return _*_+y*y}function $F(e,t,n,r,i,o){const a=n-e,u=r-t,c=i-e,f=o-t,h=a*a+u*u,g=c*c+f*f,d=.5/(a*f-u*c),_=e+(f*h-u*g)*d,y=t+(a*g-c*h)*d;return{x:_,y}}function Xo(e,t,n,r){if(r-n<=20)for(let i=n+1;i<=r;i++){const o=e[i],a=t[o];let u=i-1;for(;u>=n&&t[e[u]]>a;)e[u+1]=e[u--];e[u+1]=o}else{const i=n+r>>1;let o=n+1,a=r;ia(e,i,o),t[e[n]]>t[e[r]]&&ia(e,n,r),t[e[o]]>t[e[r]]&&ia(e,o,r),t[e[n]]>t[e[o]]&&ia(e,n,o);const u=e[o],c=t[u];for(;;){do o++;while(t[e[o]]<c);do a--;while(t[e[a]]>c);if(a<o)break;ia(e,o,a)}e[n+1]=e[a],e[a]=u,r-o+1>=a-n?(Xo(e,t,o,r),Xo(e,t,n,a-1)):(Xo(e,t,n,a-1),Xo(e,t,o,r))}}function ia(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function FF(e){return e[0]}function BF(e){return e[1]}const tb=1e-6;class zi{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(t,n){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(t,n){this._+=`L${this._x1=+t},${this._y1=+n}`}arc(t,n,r){t=+t,n=+n,r=+r;const i=t+r,o=n;if(r<0)throw new Error("negative radius");this._x1===null?this._+=`M${i},${o}`:(Math.abs(this._x1-i)>tb||Math.abs(this._y1-o)>tb)&&(this._+="L"+i+","+o),r&&(this._+=`A${r},${r},0,1,1,${t-r},${n}A${r},${r},0,1,1,${this._x1=i},${this._y1=o}`)}rect(t,n,r,i){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${+r}v${+i}h${-r}Z`}value(){return this._||null}}class pp{constructor(){this._=[]}moveTo(t,n){this._.push([t,n])}closePath(){this._.push(this._[0].slice())}lineTo(t,n){this._.push([t,n])}value(){return this._.length?this._:null}}class FT{constructor(t,[n,r,i,o]=[0,0,960,500]){if(!((i=+i)>=(n=+n))||!((o=+o)>=(r=+r)))throw new Error("invalid bounds");this.delaunay=t,this._circumcenters=new Float64Array(t.points.length*2),this.vectors=new Float64Array(t.points.length*2),this.xmax=i,this.xmin=n,this.ymax=o,this.ymin=r,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:t,hull:n,triangles:r},vectors:i}=this;let o,a;const u=this.circumcenters=this._circumcenters.subarray(0,r.length/3*2);for(let w=0,m=0,b=r.length,C,T;w<b;w+=3,m+=2){const x=r[w]*2,S=r[w+1]*2,R=r[w+2]*2,D=t[x],$=t[x+1],F=t[S],U=t[S+1],A=t[R],W=t[R+1],k=F-D,N=U-$,P=A-D,L=W-$,q=(k*L-N*P)*2;if(Math.abs(q)<1e-9){if(o===void 0){o=a=0;for(const j of n)o+=t[j*2],a+=t[j*2+1];o/=n.length,a/=n.length}const Y=1e9*Math.sign((o-D)*L-(a-$)*P);C=(D+A)/2-Y*L,T=($+W)/2+Y*P}else{const Y=1/q,j=k*k+N*N,B=P*P+L*L;C=D+(L*j-N*B)*Y,T=$+(k*B-P*j)*Y}u[m]=C,u[m+1]=T}let c=n[n.length-1],f,h=c*4,g,d=t[2*c],_,y=t[2*c+1];i.fill(0);for(let w=0;w<n.length;++w)c=n[w],f=h,g=d,_=y,h=c*4,d=t[2*c],y=t[2*c+1],i[f+2]=i[h]=_-y,i[f+3]=i[h+1]=d-g}render(t){const n=t==null?t=new zi:void 0,{delaunay:{halfedges:r,inedges:i,hull:o},circumcenters:a,vectors:u}=this;if(o.length<=1)return null;for(let h=0,g=r.length;h<g;++h){const d=r[h];if(d<h)continue;const _=Math.floor(h/3)*2,y=Math.floor(d/3)*2,w=a[_],m=a[_+1],b=a[y],C=a[y+1];this._renderSegment(w,m,b,C,t)}let c,f=o[o.length-1];for(let h=0;h<o.length;++h){c=f,f=o[h];const g=Math.floor(i[f]/3)*2,d=a[g],_=a[g+1],y=c*4,w=this._project(d,_,u[y+2],u[y+3]);w&&this._renderSegment(d,_,w[0],w[1],t)}return n&&n.value()}renderBounds(t){const n=t==null?t=new zi:void 0;return t.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),n&&n.value()}renderCell(t,n){const r=n==null?n=new zi:void 0,i=this._clip(t);if(i===null||!i.length)return;n.moveTo(i[0],i[1]);let o=i.length;for(;i[0]===i[o-2]&&i[1]===i[o-1]&&o>1;)o-=2;for(let a=2;a<o;a+=2)(i[a]!==i[a-2]||i[a+1]!==i[a-1])&&n.lineTo(i[a],i[a+1]);return n.closePath(),r&&r.value()}*cellPolygons(){const{delaunay:{points:t}}=this;for(let n=0,r=t.length/2;n<r;++n){const i=this.cellPolygon(n);i&&(i.index=n,yield i)}}cellPolygon(t){const n=new pp;return this.renderCell(t,n),n.value()}_renderSegment(t,n,r,i,o){let a;const u=this._regioncode(t,n),c=this._regioncode(r,i);u===0&&c===0?(o.moveTo(t,n),o.lineTo(r,i)):(a=this._clipSegment(t,n,r,i,u,c))&&(o.moveTo(a[0],a[1]),o.lineTo(a[2],a[3]))}contains(t,n,r){return n=+n,n!==n||(r=+r,r!==r)?!1:this.delaunay._step(t,n,r)===t}*neighbors(t){const n=this._clip(t);if(n)for(const r of this.delaunay.neighbors(t)){const i=this._clip(r);if(i){e:for(let o=0,a=n.length;o<a;o+=2)for(let u=0,c=i.length;u<c;u+=2)if(n[o]===i[u]&&n[o+1]===i[u+1]&&n[(o+2)%a]===i[(u+c-2)%c]&&n[(o+3)%a]===i[(u+c-1)%c]){yield r;break e}}}}_cell(t){const{circumcenters:n,delaunay:{inedges:r,halfedges:i,triangles:o}}=this,a=r[t];if(a===-1)return null;const u=[];let c=a;do{const f=Math.floor(c/3);if(u.push(n[f*2],n[f*2+1]),c=c%3===2?c-2:c+1,o[c]!==t)break;c=i[c]}while(c!==a&&c!==-1);return u}_clip(t){if(t===0&&this.delaunay.hull.length===1)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const n=this._cell(t);if(n===null)return null;const{vectors:r}=this,i=t*4;return this._simplify(r[i]||r[i+1]?this._clipInfinite(t,n,r[i],r[i+1],r[i+2],r[i+3]):this._clipFinite(t,n))}_clipFinite(t,n){const r=n.length;let i=null,o,a,u=n[r-2],c=n[r-1],f,h=this._regioncode(u,c),g,d=0;for(let _=0;_<r;_+=2)if(o=u,a=c,u=n[_],c=n[_+1],f=h,h=this._regioncode(u,c),f===0&&h===0)g=d,d=0,i?i.push(u,c):i=[u,c];else{let y,w,m,b,C;if(f===0){if((y=this._clipSegment(o,a,u,c,f,h))===null)continue;[w,m,b,C]=y}else{if((y=this._clipSegment(u,c,o,a,h,f))===null)continue;[b,C,w,m]=y,g=d,d=this._edgecode(w,m),g&&d&&this._edge(t,g,d,i,i.length),i?i.push(w,m):i=[w,m]}g=d,d=this._edgecode(b,C),g&&d&&this._edge(t,g,d,i,i.length),i?i.push(b,C):i=[b,C]}if(i)g=d,d=this._edgecode(i[0],i[1]),g&&d&&this._edge(t,g,d,i,i.length);else if(this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return i}_clipSegment(t,n,r,i,o,a){const u=o<a;for(u&&([t,n,r,i,o,a]=[r,i,t,n,a,o]);;){if(o===0&&a===0)return u?[r,i,t,n]:[t,n,r,i];if(o&a)return null;let c,f,h=o||a;h&8?(c=t+(r-t)*(this.ymax-n)/(i-n),f=this.ymax):h&4?(c=t+(r-t)*(this.ymin-n)/(i-n),f=this.ymin):h&2?(f=n+(i-n)*(this.xmax-t)/(r-t),c=this.xmax):(f=n+(i-n)*(this.xmin-t)/(r-t),c=this.xmin),o?(t=c,n=f,o=this._regioncode(t,n)):(r=c,i=f,a=this._regioncode(r,i))}}_clipInfinite(t,n,r,i,o,a){let u=Array.from(n),c;if((c=this._project(u[0],u[1],r,i))&&u.unshift(c[0],c[1]),(c=this._project(u[u.length-2],u[u.length-1],o,a))&&u.push(c[0],c[1]),u=this._clipFinite(t,u))for(let f=0,h=u.length,g,d=this._edgecode(u[h-2],u[h-1]);f<h;f+=2)g=d,d=this._edgecode(u[f],u[f+1]),g&&d&&(f=this._edge(t,g,d,u,f),h=u.length);else this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(u=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return u}_edge(t,n,r,i,o){for(;n!==r;){let a,u;switch(n){case 5:n=4;continue;case 4:n=6,a=this.xmax,u=this.ymin;break;case 6:n=2;continue;case 2:n=10,a=this.xmax,u=this.ymax;break;case 10:n=8;continue;case 8:n=9,a=this.xmin,u=this.ymax;break;case 9:n=1;continue;case 1:n=5,a=this.xmin,u=this.ymin;break}(i[o]!==a||i[o+1]!==u)&&this.contains(t,a,u)&&(i.splice(o,0,a,u),o+=2)}return o}_project(t,n,r,i){let o=1/0,a,u,c;if(i<0){if(n<=this.ymin)return null;(a=(this.ymin-n)/i)<o&&(c=this.ymin,u=t+(o=a)*r)}else if(i>0){if(n>=this.ymax)return null;(a=(this.ymax-n)/i)<o&&(c=this.ymax,u=t+(o=a)*r)}if(r>0){if(t>=this.xmax)return null;(a=(this.xmax-t)/r)<o&&(u=this.xmax,c=n+(o=a)*i)}else if(r<0){if(t<=this.xmin)return null;(a=(this.xmin-t)/r)<o&&(u=this.xmin,c=n+(o=a)*i)}return[u,c]}_edgecode(t,n){return(t===this.xmin?1:t===this.xmax?2:0)|(n===this.ymin?4:n===this.ymax?8:0)}_regioncode(t,n){return(t<this.xmin?1:t>this.xmax?2:0)|(n<this.ymin?4:n>this.ymax?8:0)}_simplify(t){if(t&&t.length>4){for(let n=0;n<t.length;n+=2){const r=(n+2)%t.length,i=(n+4)%t.length;(t[n]===t[r]&&t[r]===t[i]||t[n+1]===t[r+1]&&t[r+1]===t[i+1])&&(t.splice(r,2),n-=2)}t.length||(t=null)}return t}}const UF=2*Math.PI,zo=Math.pow;function WF(e){return e[0]}function zF(e){return e[1]}function GF(e){const{triangles:t,coords:n}=e;for(let r=0;r<t.length;r+=3){const i=2*t[r],o=2*t[r+1],a=2*t[r+2];if((n[a]-n[i])*(n[o+1]-n[i+1])-(n[o]-n[i])*(n[a+1]-n[i+1])>1e-10)return!1}return!0}function VF(e,t,n){return[e+Math.sin(e+t)*n,t+Math.cos(e-t)*n]}class Xg{static from(t,n=WF,r=zF,i){return new Xg("length"in t?HF(t,n,r,i):Float64Array.from(qF(t,n,r,i)))}constructor(t){this._delaunator=new Ic(t),this.inedges=new Int32Array(t.length/2),this._hullIndex=new Int32Array(t.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const t=this._delaunator,n=this.points;if(t.hull&&t.hull.length>2&&GF(t)){this.collinear=Int32Array.from({length:n.length/2},(d,_)=>_).sort((d,_)=>n[2*d]-n[2*_]||n[2*d+1]-n[2*_+1]);const c=this.collinear[0],f=this.collinear[this.collinear.length-1],h=[n[2*c],n[2*c+1],n[2*f],n[2*f+1]],g=1e-8*Math.hypot(h[3]-h[1],h[2]-h[0]);for(let d=0,_=n.length/2;d<_;++d){const y=VF(n[2*d],n[2*d+1],g);n[2*d]=y[0],n[2*d+1]=y[1]}this._delaunator=new Ic(n)}else delete this.collinear;const r=this.halfedges=this._delaunator.halfedges,i=this.hull=this._delaunator.hull,o=this.triangles=this._delaunator.triangles,a=this.inedges.fill(-1),u=this._hullIndex.fill(-1);for(let c=0,f=r.length;c<f;++c){const h=o[c%3===2?c-2:c+1];(r[c]===-1||a[h]===-1)&&(a[h]=c)}for(let c=0,f=i.length;c<f;++c)u[i[c]]=c;i.length<=2&&i.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=i[0],a[i[0]]=1,i.length===2&&(a[i[1]]=0,this.triangles[1]=i[1],this.triangles[2]=i[1]))}voronoi(t){return new FT(this,t)}*neighbors(t){const{inedges:n,hull:r,_hullIndex:i,halfedges:o,triangles:a,collinear:u}=this;if(u){const g=u.indexOf(t);g>0&&(yield u[g-1]),g<u.length-1&&(yield u[g+1]);return}const c=n[t];if(c===-1)return;let f=c,h=-1;do{if(yield h=a[f],f=f%3===2?f-2:f+1,a[f]!==t)return;if(f=o[f],f===-1){const g=r[(i[t]+1)%r.length];g!==h&&(yield g);return}}while(f!==c)}find(t,n,r=0){if(t=+t,t!==t||(n=+n,n!==n))return-1;const i=r;let o;for(;(o=this._step(r,t,n))>=0&&o!==r&&o!==i;)r=o;return o}_step(t,n,r){const{inedges:i,hull:o,_hullIndex:a,halfedges:u,triangles:c,points:f}=this;if(i[t]===-1||!f.length)return(t+1)%(f.length>>1);let h=t,g=zo(n-f[t*2],2)+zo(r-f[t*2+1],2);const d=i[t];let _=d;do{let y=c[_];const w=zo(n-f[y*2],2)+zo(r-f[y*2+1],2);if(w<g&&(g=w,h=y),_=_%3===2?_-2:_+1,c[_]!==t)break;if(_=u[_],_===-1){if(_=o[(a[t]+1)%o.length],_!==y&&zo(n-f[_*2],2)+zo(r-f[_*2+1],2)<g)return _;break}}while(_!==d);return h}render(t){const n=t==null?t=new zi:void 0,{points:r,halfedges:i,triangles:o}=this;for(let a=0,u=i.length;a<u;++a){const c=i[a];if(c<a)continue;const f=o[a]*2,h=o[c]*2;t.moveTo(r[f],r[f+1]),t.lineTo(r[h],r[h+1])}return this.renderHull(t),n&&n.value()}renderPoints(t,n){n===void 0&&(!t||typeof t.moveTo!="function")&&(n=t,t=null),n=n==null?2:+n;const r=t==null?t=new zi:void 0,{points:i}=this;for(let o=0,a=i.length;o<a;o+=2){const u=i[o],c=i[o+1];t.moveTo(u+n,c),t.arc(u,c,n,0,UF)}return r&&r.value()}renderHull(t){const n=t==null?t=new zi:void 0,{hull:r,points:i}=this,o=r[0]*2,a=r.length;t.moveTo(i[o],i[o+1]);for(let u=1;u<a;++u){const c=2*r[u];t.lineTo(i[c],i[c+1])}return t.closePath(),n&&n.value()}hullPolygon(){const t=new pp;return this.renderHull(t),t.value()}renderTriangle(t,n){const r=n==null?n=new zi:void 0,{points:i,triangles:o}=this,a=o[t*=3]*2,u=o[t+1]*2,c=o[t+2]*2;return n.moveTo(i[a],i[a+1]),n.lineTo(i[u],i[u+1]),n.lineTo(i[c],i[c+1]),n.closePath(),r&&r.value()}*trianglePolygons(){const{triangles:t}=this;for(let n=0,r=t.length/3;n<r;++n)yield this.trianglePolygon(n)}trianglePolygon(t){const n=new pp;return this.renderTriangle(t,n),n.value()}}function HF(e,t,n,r){const i=e.length,o=new Float64Array(i*2);for(let a=0;a<i;++a){const u=e[a];o[a*2]=t.call(r,u,a,e),o[a*2+1]=n.call(r,u,a,e)}return o}function*qF(e,t,n,r){let i=0;for(const o of e)yield t.call(r,o,i,e),yield n.call(r,o,i,e),++i}var nb={},r0={},i0=34,oa=10,o0=13;function BT(e){return new Function("d","return {"+e.map(function(t,n){return JSON.stringify(t)+": d["+n+'] || ""'}).join(",")+"}")}function YF(e,t){var n=BT(e);return function(r,i){return t(n(r),i,e)}}function rb(e){var t=Object.create(null),n=[];return e.forEach(function(r){for(var i in r)i in t||n.push(t[i]=i)}),n}function mn(e,t){var n=e+"",r=n.length;return r<t?new Array(t-r+1).join(0)+n:n}function KF(e){return e<0?"-"+mn(-e,6):e>9999?"+"+mn(e,6):mn(e,4)}function XF(e){var t=e.getUTCHours(),n=e.getUTCMinutes(),r=e.getUTCSeconds(),i=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":KF(e.getUTCFullYear())+"-"+mn(e.getUTCMonth()+1,2)+"-"+mn(e.getUTCDate(),2)+(i?"T"+mn(t,2)+":"+mn(n,2)+":"+mn(r,2)+"."+mn(i,3)+"Z":r?"T"+mn(t,2)+":"+mn(n,2)+":"+mn(r,2)+"Z":n||t?"T"+mn(t,2)+":"+mn(n,2)+"Z":"")}function kf(e){var t=new RegExp('["'+e+`
\r]`),n=e.charCodeAt(0);function r(g,d){var _,y,w=i(g,function(m,b){if(_)return _(m,b-1);y=m,_=d?YF(m,d):BT(m)});return w.columns=y||[],w}function i(g,d){var _=[],y=g.length,w=0,m=0,b,C=y<=0,T=!1;g.charCodeAt(y-1)===oa&&--y,g.charCodeAt(y-1)===o0&&--y;function x(){if(C)return r0;if(T)return T=!1,nb;var R,D=w,$;if(g.charCodeAt(D)===i0){for(;w++<y&&g.charCodeAt(w)!==i0||g.charCodeAt(++w)===i0;);return(R=w)>=y?C=!0:($=g.charCodeAt(w++))===oa?T=!0:$===o0&&(T=!0,g.charCodeAt(w)===oa&&++w),g.slice(D+1,R-1).replace(/""/g,'"')}for(;w<y;){if(($=g.charCodeAt(R=w++))===oa)T=!0;else if($===o0)T=!0,g.charCodeAt(w)===oa&&++w;else if($!==n)continue;return g.slice(D,R)}return C=!0,g.slice(D,y)}for(;(b=x())!==r0;){for(var S=[];b!==nb&&b!==r0;)S.push(b),b=x();d&&(S=d(S,m++))==null||_.push(S)}return _}function o(g,d){return g.map(function(_){return d.map(function(y){return h(_[y])}).join(e)})}function a(g,d){return d==null&&(d=rb(g)),[d.map(h).join(e)].concat(o(g,d)).join(`
`)}function u(g,d){return d==null&&(d=rb(g)),o(g,d).join(`
`)}function c(g){return g.map(f).join(`
`)}function f(g){return g.map(h).join(e)}function h(g){return g==null?"":g instanceof Date?XF(g):t.test(g+="")?'"'+g.replace(/"/g,'""')+'"':g}return{parse:r,parseRows:i,format:a,formatBody:u,formatRows:c,formatRow:f,formatValue:h}}var po=kf(","),UT=po.parse,jF=po.parseRows,QF=po.format,JF=po.formatBody,ZF=po.formatRows,eB=po.formatRow,tB=po.formatValue,go=kf("	"),WT=go.parse,nB=go.parseRows,rB=go.format,iB=go.formatBody,oB=go.formatRows,sB=go.formatRow,aB=go.formatValue;function uB(e){for(var t in e){var n=e[t].trim(),r,i;if(!n)n=null;else if(n==="true")n=!0;else if(n==="false")n=!1;else if(n==="NaN")n=NaN;else if(!isNaN(r=+n))n=r;else if(i=n.match(/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/))lB&&i[4]&&!i[7]&&(n=n.replace(/-/g,"/").replace(/T/," ")),n=new Date(n);else continue;e[t]=n}return e}const lB=new Date("2019-01-01T00:00").getHours()||new Date("2019-07-01T00:00").getHours();function cB(e){if(!e.ok)throw new Error(e.status+" "+e.statusText);return e.blob()}function fB(e,t){return fetch(e,t).then(cB)}function hB(e){if(!e.ok)throw new Error(e.status+" "+e.statusText);return e.arrayBuffer()}function dB(e,t){return fetch(e,t).then(hB)}function pB(e){if(!e.ok)throw new Error(e.status+" "+e.statusText);return e.text()}function Df(e,t){return fetch(e,t).then(pB)}function zT(e){return function(t,n,r){return arguments.length===2&&typeof n=="function"&&(r=n,n=void 0),Df(t,n).then(function(i){return e(i,r)})}}function gB(e,t,n,r){arguments.length===3&&typeof n=="function"&&(r=n,n=void 0);var i=kf(e);return Df(t,n).then(function(o){return i.parse(o,r)})}var _B=zT(UT),mB=zT(WT);function vB(e,t){return new Promise(function(n,r){var i=new Image;for(var o in t)i[o]=t[o];i.onerror=r,i.onload=function(){n(i)},i.src=e})}function yB(e){if(!e.ok)throw new Error(e.status+" "+e.statusText);if(!(e.status===204||e.status===205))return e.json()}function bB(e,t){return fetch(e,t).then(yB)}function jg(e){return(t,n)=>Df(t,n).then(r=>new DOMParser().parseFromString(r,e))}const wB=jg("application/xml");var xB=jg("text/html"),TB=jg("image/svg+xml");function CB(e,t){var n,r=1;e==null&&(e=0),t==null&&(t=0);function i(){var o,a=n.length,u,c=0,f=0;for(o=0;o<a;++o)u=n[o],c+=u.x,f+=u.y;for(c=(c/a-e)*r,f=(f/a-t)*r,o=0;o<a;++o)u=n[o],u.x-=c,u.y-=f}return i.initialize=function(o){n=o},i.x=function(o){return arguments.length?(e=+o,i):e},i.y=function(o){return arguments.length?(t=+o,i):t},i.strength=function(o){return arguments.length?(r=+o,i):r},i}function EB(e){const t=+this._x.call(null,e),n=+this._y.call(null,e);return GT(this.cover(t,n),t,n,e)}function GT(e,t,n,r){if(isNaN(t)||isNaN(n))return e;var i,o=e._root,a={data:r},u=e._x0,c=e._y0,f=e._x1,h=e._y1,g,d,_,y,w,m,b,C;if(!o)return e._root=a,e;for(;o.length;)if((w=t>=(g=(u+f)/2))?u=g:f=g,(m=n>=(d=(c+h)/2))?c=d:h=d,i=o,!(o=o[b=m<<1|w]))return i[b]=a,e;if(_=+e._x.call(null,o.data),y=+e._y.call(null,o.data),t===_&&n===y)return a.next=o,i?i[b]=a:e._root=a,e;do i=i?i[b]=new Array(4):e._root=new Array(4),(w=t>=(g=(u+f)/2))?u=g:f=g,(m=n>=(d=(c+h)/2))?c=d:h=d;while((b=m<<1|w)===(C=(y>=d)<<1|_>=g));return i[C]=o,i[b]=a,e}function SB(e){var t,n,r=e.length,i,o,a=new Array(r),u=new Array(r),c=1/0,f=1/0,h=-1/0,g=-1/0;for(n=0;n<r;++n)isNaN(i=+this._x.call(null,t=e[n]))||isNaN(o=+this._y.call(null,t))||(a[n]=i,u[n]=o,i<c&&(c=i),i>h&&(h=i),o<f&&(f=o),o>g&&(g=o));if(c>h||f>g)return this;for(this.cover(c,f).cover(h,g),n=0;n<r;++n)GT(this,a[n],u[n],e[n]);return this}function AB(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,r=this._y0,i=this._x1,o=this._y1;if(isNaN(n))i=(n=Math.floor(e))+1,o=(r=Math.floor(t))+1;else{for(var a=i-n||1,u=this._root,c,f;n>e||e>=i||r>t||t>=o;)switch(f=(t<r)<<1|e<n,c=new Array(4),c[f]=u,u=c,a*=2,f){case 0:i=n+a,o=r+a;break;case 1:n=i-a,o=r+a;break;case 2:i=n+a,r=o-a;break;case 3:n=i-a,r=o-a;break}this._root&&this._root.length&&(this._root=u)}return this._x0=n,this._y0=r,this._x1=i,this._y1=o,this}function MB(){var e=[];return this.visit(function(t){if(!t.length)do e.push(t.data);while(t=t.next)}),e}function IB(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function nn(e,t,n,r,i){this.node=e,this.x0=t,this.y0=n,this.x1=r,this.y1=i}function RB(e,t,n){var r,i=this._x0,o=this._y0,a,u,c,f,h=this._x1,g=this._y1,d=[],_=this._root,y,w;for(_&&d.push(new nn(_,i,o,h,g)),n==null?n=1/0:(i=e-n,o=t-n,h=e+n,g=t+n,n*=n);y=d.pop();)if(!(!(_=y.node)||(a=y.x0)>h||(u=y.y0)>g||(c=y.x1)<i||(f=y.y1)<o))if(_.length){var m=(a+c)/2,b=(u+f)/2;d.push(new nn(_[3],m,b,c,f),new nn(_[2],a,b,m,f),new nn(_[1],m,u,c,b),new nn(_[0],a,u,m,b)),(w=(t>=b)<<1|e>=m)&&(y=d[d.length-1],d[d.length-1]=d[d.length-1-w],d[d.length-1-w]=y)}else{var C=e-+this._x.call(null,_.data),T=t-+this._y.call(null,_.data),x=C*C+T*T;if(x<n){var S=Math.sqrt(n=x);i=e-S,o=t-S,h=e+S,g=t+S,r=_.data}}return r}function NB(e){if(isNaN(h=+this._x.call(null,e))||isNaN(g=+this._y.call(null,e)))return this;var t,n=this._root,r,i,o,a=this._x0,u=this._y0,c=this._x1,f=this._y1,h,g,d,_,y,w,m,b;if(!n)return this;if(n.length)for(;;){if((y=h>=(d=(a+c)/2))?a=d:c=d,(w=g>=(_=(u+f)/2))?u=_:f=_,t=n,!(n=n[m=w<<1|y]))return this;if(!n.length)break;(t[m+1&3]||t[m+2&3]||t[m+3&3])&&(r=t,b=m)}for(;n.data!==e;)if(i=n,!(n=n.next))return this;return(o=n.next)&&delete n.next,i?(o?i.next=o:delete i.next,this):t?(o?t[m]=o:delete t[m],(n=t[0]||t[1]||t[2]||t[3])&&n===(t[3]||t[2]||t[1]||t[0])&&!n.length&&(r?r[b]=n:this._root=n),this):(this._root=o,this)}function PB(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this}function kB(){return this._root}function DB(){var e=0;return this.visit(function(t){if(!t.length)do++e;while(t=t.next)}),e}function OB(e){var t=[],n,r=this._root,i,o,a,u,c;for(r&&t.push(new nn(r,this._x0,this._y0,this._x1,this._y1));n=t.pop();)if(!e(r=n.node,o=n.x0,a=n.y0,u=n.x1,c=n.y1)&&r.length){var f=(o+u)/2,h=(a+c)/2;(i=r[3])&&t.push(new nn(i,f,h,u,c)),(i=r[2])&&t.push(new nn(i,o,h,f,c)),(i=r[1])&&t.push(new nn(i,f,a,u,h)),(i=r[0])&&t.push(new nn(i,o,a,f,h))}return this}function LB(e){var t=[],n=[],r;for(this._root&&t.push(new nn(this._root,this._x0,this._y0,this._x1,this._y1));r=t.pop();){var i=r.node;if(i.length){var o,a=r.x0,u=r.y0,c=r.x1,f=r.y1,h=(a+c)/2,g=(u+f)/2;(o=i[0])&&t.push(new nn(o,a,u,h,g)),(o=i[1])&&t.push(new nn(o,h,u,c,g)),(o=i[2])&&t.push(new nn(o,a,g,h,f)),(o=i[3])&&t.push(new nn(o,h,g,c,f))}n.push(r)}for(;r=n.pop();)e(r.node,r.x0,r.y0,r.x1,r.y1);return this}function $B(e){return e[0]}function FB(e){return arguments.length?(this._x=e,this):this._x}function BB(e){return e[1]}function UB(e){return arguments.length?(this._y=e,this):this._y}function Of(e,t,n){var r=new Qg(t??$B,n??BB,NaN,NaN,NaN,NaN);return e==null?r:r.addAll(e)}function Qg(e,t,n,r,i,o){this._x=e,this._y=t,this._x0=n,this._y0=r,this._x1=i,this._y1=o,this._root=void 0}function ib(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}var ln=Of.prototype=Qg.prototype;ln.copy=function(){var e=new Qg(this._x,this._y,this._x0,this._y0,this._x1,this._y1),t=this._root,n,r;if(!t)return e;if(!t.length)return e._root=ib(t),e;for(n=[{source:t,target:e._root=new Array(4)}];t=n.pop();)for(var i=0;i<4;++i)(r=t.source[i])&&(r.length?n.push({source:r,target:t.target[i]=new Array(4)}):t.target[i]=ib(r));return e};ln.add=EB;ln.addAll=SB;ln.cover=AB;ln.data=MB;ln.extent=IB;ln.find=RB;ln.remove=NB;ln.removeAll=PB;ln.root=kB;ln.size=DB;ln.visit=OB;ln.visitAfter=LB;ln.x=FB;ln.y=UB;function Et(e){return function(){return e}}function ui(e){return(e()-.5)*1e-6}function WB(e){return e.x+e.vx}function zB(e){return e.y+e.vy}function GB(e){var t,n,r,i=1,o=1;typeof e!="function"&&(e=Et(e==null?1:+e));function a(){for(var f,h=t.length,g,d,_,y,w,m,b=0;b<o;++b)for(g=Of(t,WB,zB).visitAfter(u),f=0;f<h;++f)d=t[f],w=n[d.index],m=w*w,_=d.x+d.vx,y=d.y+d.vy,g.visit(C);function C(T,x,S,R,D){var $=T.data,F=T.r,U=w+F;if($){if($.index>d.index){var A=_-$.x-$.vx,W=y-$.y-$.vy,k=A*A+W*W;k<U*U&&(A===0&&(A=ui(r),k+=A*A),W===0&&(W=ui(r),k+=W*W),k=(U-(k=Math.sqrt(k)))/k*i,d.vx+=(A*=k)*(U=(F*=F)/(m+F)),d.vy+=(W*=k)*U,$.vx-=A*(U=1-U),$.vy-=W*U)}return}return x>_+U||R<_-U||S>y+U||D<y-U}}function u(f){if(f.data)return f.r=n[f.data.index];for(var h=f.r=0;h<4;++h)f[h]&&f[h].r>f.r&&(f.r=f[h].r)}function c(){if(t){var f,h=t.length,g;for(n=new Array(h),f=0;f<h;++f)g=t[f],n[g.index]=+e(g,f,t)}}return a.initialize=function(f,h){t=f,r=h,c()},a.iterations=function(f){return arguments.length?(o=+f,a):o},a.strength=function(f){return arguments.length?(i=+f,a):i},a.radius=function(f){return arguments.length?(e=typeof f=="function"?f:Et(+f),c(),a):e},a}function VB(e){return e.index}function ob(e,t){var n=e.get(t);if(!n)throw new Error("node not found: "+t);return n}function HB(e){var t=VB,n=g,r,i=Et(30),o,a,u,c,f,h=1;e==null&&(e=[]);function g(m){return 1/Math.min(u[m.source.index],u[m.target.index])}function d(m){for(var b=0,C=e.length;b<h;++b)for(var T=0,x,S,R,D,$,F,U;T<C;++T)x=e[T],S=x.source,R=x.target,D=R.x+R.vx-S.x-S.vx||ui(f),$=R.y+R.vy-S.y-S.vy||ui(f),F=Math.sqrt(D*D+$*$),F=(F-o[T])/F*m*r[T],D*=F,$*=F,R.vx-=D*(U=c[T]),R.vy-=$*U,S.vx+=D*(U=1-U),S.vy+=$*U}function _(){if(a){var m,b=a.length,C=e.length,T=new Map(a.map((S,R)=>[t(S,R,a),S])),x;for(m=0,u=new Array(b);m<C;++m)x=e[m],x.index=m,typeof x.source!="object"&&(x.source=ob(T,x.source)),typeof x.target!="object"&&(x.target=ob(T,x.target)),u[x.source.index]=(u[x.source.index]||0)+1,u[x.target.index]=(u[x.target.index]||0)+1;for(m=0,c=new Array(C);m<C;++m)x=e[m],c[m]=u[x.source.index]/(u[x.source.index]+u[x.target.index]);r=new Array(C),y(),o=new Array(C),w()}}function y(){if(a)for(var m=0,b=e.length;m<b;++m)r[m]=+n(e[m],m,e)}function w(){if(a)for(var m=0,b=e.length;m<b;++m)o[m]=+i(e[m],m,e)}return d.initialize=function(m,b){a=m,f=b,_()},d.links=function(m){return arguments.length?(e=m,_(),d):e},d.id=function(m){return arguments.length?(t=m,d):t},d.iterations=function(m){return arguments.length?(h=+m,d):h},d.strength=function(m){return arguments.length?(n=typeof m=="function"?m:Et(+m),y(),d):n},d.distance=function(m){return arguments.length?(i=typeof m=="function"?m:Et(+m),w(),d):i},d}const qB=1664525,YB=1013904223,sb=4294967296;function KB(){let e=1;return()=>(e=(qB*e+YB)%sb)/sb}function XB(e){return e.x}function jB(e){return e.y}var QB=10,JB=Math.PI*(3-Math.sqrt(5));function ZB(e){var t,n=1,r=.001,i=1-Math.pow(r,1/300),o=0,a=.6,u=new Map,c=Nf(g),f=fo("tick","end"),h=KB();e==null&&(e=[]);function g(){d(),f.call("tick",t),n<r&&(c.stop(),f.call("end",t))}function d(w){var m,b=e.length,C;w===void 0&&(w=1);for(var T=0;T<w;++T)for(n+=(o-n)*i,u.forEach(function(x){x(n)}),m=0;m<b;++m)C=e[m],C.fx==null?C.x+=C.vx*=a:(C.x=C.fx,C.vx=0),C.fy==null?C.y+=C.vy*=a:(C.y=C.fy,C.vy=0);return t}function _(){for(var w=0,m=e.length,b;w<m;++w){if(b=e[w],b.index=w,b.fx!=null&&(b.x=b.fx),b.fy!=null&&(b.y=b.fy),isNaN(b.x)||isNaN(b.y)){var C=QB*Math.sqrt(.5+w),T=w*JB;b.x=C*Math.cos(T),b.y=C*Math.sin(T)}(isNaN(b.vx)||isNaN(b.vy))&&(b.vx=b.vy=0)}}function y(w){return w.initialize&&w.initialize(e,h),w}return _(),t={tick:d,restart:function(){return c.restart(g),t},stop:function(){return c.stop(),t},nodes:function(w){return arguments.length?(e=w,_(),u.forEach(y),t):e},alpha:function(w){return arguments.length?(n=+w,t):n},alphaMin:function(w){return arguments.length?(r=+w,t):r},alphaDecay:function(w){return arguments.length?(i=+w,t):+i},alphaTarget:function(w){return arguments.length?(o=+w,t):o},velocityDecay:function(w){return arguments.length?(a=1-w,t):1-a},randomSource:function(w){return arguments.length?(h=w,u.forEach(y),t):h},force:function(w,m){return arguments.length>1?(m==null?u.delete(w):u.set(w,y(m)),t):u.get(w)},find:function(w,m,b){var C=0,T=e.length,x,S,R,D,$;for(b==null?b=1/0:b*=b,C=0;C<T;++C)D=e[C],x=w-D.x,S=m-D.y,R=x*x+S*S,R<b&&($=D,b=R);return $},on:function(w,m){return arguments.length>1?(f.on(w,m),t):f.on(w)}}}function eU(){var e,t,n,r,i=Et(-30),o,a=1,u=1/0,c=.81;function f(_){var y,w=e.length,m=Of(e,XB,jB).visitAfter(g);for(r=_,y=0;y<w;++y)t=e[y],m.visit(d)}function h(){if(e){var _,y=e.length,w;for(o=new Array(y),_=0;_<y;++_)w=e[_],o[w.index]=+i(w,_,e)}}function g(_){var y=0,w,m,b=0,C,T,x;if(_.length){for(C=T=x=0;x<4;++x)(w=_[x])&&(m=Math.abs(w.value))&&(y+=w.value,b+=m,C+=m*w.x,T+=m*w.y);_.x=C/b,_.y=T/b}else{w=_,w.x=w.data.x,w.y=w.data.y;do y+=o[w.data.index];while(w=w.next)}_.value=y}function d(_,y,w,m){if(!_.value)return!0;var b=_.x-t.x,C=_.y-t.y,T=m-y,x=b*b+C*C;if(T*T/c<x)return x<u&&(b===0&&(b=ui(n),x+=b*b),C===0&&(C=ui(n),x+=C*C),x<a&&(x=Math.sqrt(a*x)),t.vx+=b*_.value*r/x,t.vy+=C*_.value*r/x),!0;if(_.length||x>=u)return;(_.data!==t||_.next)&&(b===0&&(b=ui(n),x+=b*b),C===0&&(C=ui(n),x+=C*C),x<a&&(x=Math.sqrt(a*x)));do _.data!==t&&(T=o[_.data.index]*r/x,t.vx+=b*T,t.vy+=C*T);while(_=_.next)}return f.initialize=function(_,y){e=_,n=y,h()},f.strength=function(_){return arguments.length?(i=typeof _=="function"?_:Et(+_),h(),f):i},f.distanceMin=function(_){return arguments.length?(a=_*_,f):Math.sqrt(a)},f.distanceMax=function(_){return arguments.length?(u=_*_,f):Math.sqrt(u)},f.theta=function(_){return arguments.length?(c=_*_,f):Math.sqrt(c)},f}function tU(e,t,n){var r,i=Et(.1),o,a;typeof e!="function"&&(e=Et(+e)),t==null&&(t=0),n==null&&(n=0);function u(f){for(var h=0,g=r.length;h<g;++h){var d=r[h],_=d.x-t||1e-6,y=d.y-n||1e-6,w=Math.sqrt(_*_+y*y),m=(a[h]-w)*o[h]*f/w;d.vx+=_*m,d.vy+=y*m}}function c(){if(r){var f,h=r.length;for(o=new Array(h),a=new Array(h),f=0;f<h;++f)a[f]=+e(r[f],f,r),o[f]=isNaN(a[f])?0:+i(r[f],f,r)}}return u.initialize=function(f){r=f,c()},u.strength=function(f){return arguments.length?(i=typeof f=="function"?f:Et(+f),c(),u):i},u.radius=function(f){return arguments.length?(e=typeof f=="function"?f:Et(+f),c(),u):e},u.x=function(f){return arguments.length?(t=+f,u):t},u.y=function(f){return arguments.length?(n=+f,u):n},u}function nU(e){var t=Et(.1),n,r,i;typeof e!="function"&&(e=Et(e==null?0:+e));function o(u){for(var c=0,f=n.length,h;c<f;++c)h=n[c],h.vx+=(i[c]-h.x)*r[c]*u}function a(){if(n){var u,c=n.length;for(r=new Array(c),i=new Array(c),u=0;u<c;++u)r[u]=isNaN(i[u]=+e(n[u],u,n))?0:+t(n[u],u,n)}}return o.initialize=function(u){n=u,a()},o.strength=function(u){return arguments.length?(t=typeof u=="function"?u:Et(+u),a(),o):t},o.x=function(u){return arguments.length?(e=typeof u=="function"?u:Et(+u),a(),o):e},o}function rU(e){var t=Et(.1),n,r,i;typeof e!="function"&&(e=Et(e==null?0:+e));function o(u){for(var c=0,f=n.length,h;c<f;++c)h=n[c],h.vy+=(i[c]-h.y)*r[c]*u}function a(){if(n){var u,c=n.length;for(r=new Array(c),i=new Array(c),u=0;u<c;++u)r[u]=isNaN(i[u]=+e(n[u],u,n))?0:+t(n[u],u,n)}}return o.initialize=function(u){n=u,a()},o.strength=function(u){return arguments.length?(t=typeof u=="function"?u:Et(+u),a(),o):t},o.y=function(u){return arguments.length?(e=typeof u=="function"?u:Et(+u),a(),o):e},o}function iU(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Rc(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function _s(e){return e=Rc(Math.abs(e)),e?e[1]:NaN}function oU(e,t){return function(n,r){for(var i=n.length,o=[],a=0,u=e[0],c=0;i>0&&u>0&&(c+u+1>r&&(u=Math.max(1,r-c)),o.push(n.substring(i-=u,i+u)),!((c+=u+1)>r));)u=e[a=(a+1)%e.length];return o.reverse().join(t)}}function sU(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var aU=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function ms(e){if(!(t=aU.exec(e)))throw new Error("invalid format: "+e);var t;return new Lf({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}ms.prototype=Lf.prototype;function Lf(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}Lf.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function uU(e){e:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var VT;function lU(e,t){var n=Rc(e,t);if(!n)return e+"";var r=n[0],i=n[1],o=i-(VT=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,a=r.length;return o===a?r:o>a?r+new Array(o-a+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+Rc(e,Math.max(0,t+o-1))[0]}function ab(e,t){var n=Rc(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const ub={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:iU,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>ab(e*100,t),r:ab,s:lU,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function lb(e){return e}var cb=Array.prototype.map,fb=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function HT(e){var t=e.grouping===void 0||e.thousands===void 0?lb:oU(cb.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",o=e.numerals===void 0?lb:sU(cb.call(e.numerals,String)),a=e.percent===void 0?"%":e.percent+"",u=e.minus===void 0?"":e.minus+"",c=e.nan===void 0?"NaN":e.nan+"";function f(g){g=ms(g);var d=g.fill,_=g.align,y=g.sign,w=g.symbol,m=g.zero,b=g.width,C=g.comma,T=g.precision,x=g.trim,S=g.type;S==="n"?(C=!0,S="g"):ub[S]||(T===void 0&&(T=12),x=!0,S="g"),(m||d==="0"&&_==="=")&&(m=!0,d="0",_="=");var R=w==="$"?n:w==="#"&&/[boxX]/.test(S)?"0"+S.toLowerCase():"",D=w==="$"?r:/[%p]/.test(S)?a:"",$=ub[S],F=/[defgprs%]/.test(S);T=T===void 0?6:/[gprs]/.test(S)?Math.max(1,Math.min(21,T)):Math.max(0,Math.min(20,T));function U(A){var W=R,k=D,N,P,L;if(S==="c")k=$(A)+k,A="";else{A=+A;var q=A<0||1/A<0;if(A=isNaN(A)?c:$(Math.abs(A),T),x&&(A=uU(A)),q&&+A==0&&y!=="+"&&(q=!1),W=(q?y==="("?y:u:y==="-"||y==="("?"":y)+W,k=(S==="s"?fb[8+VT/3]:"")+k+(q&&y==="("?")":""),F){for(N=-1,P=A.length;++N<P;)if(L=A.charCodeAt(N),48>L||L>57){k=(L===46?i+A.slice(N+1):A.slice(N))+k,A=A.slice(0,N);break}}}C&&!m&&(A=t(A,1/0));var Y=W.length+A.length+k.length,j=Y<b?new Array(b-Y+1).join(d):"";switch(C&&m&&(A=t(j+A,j.length?b-k.length:1/0),j=""),_){case"<":A=W+A+k+j;break;case"=":A=W+j+A+k;break;case"^":A=j.slice(0,Y=j.length>>1)+W+A+k+j.slice(Y);break;default:A=j+W+A+k;break}return o(A)}return U.toString=function(){return g+""},U}function h(g,d){var _=f((g=ms(g),g.type="f",g)),y=Math.max(-8,Math.min(8,Math.floor(_s(d)/3)))*3,w=Math.pow(10,-y),m=fb[8+y/3];return function(b){return _(w*b)+m}}return{format:f,formatPrefix:h}}var Al,$f,Jg;qT({thousands:",",grouping:[3],currency:["$",""]});function qT(e){return Al=HT(e),$f=Al.format,Jg=Al.formatPrefix,Al}function YT(e){return Math.max(0,-_s(Math.abs(e)))}function KT(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(_s(t)/3)))*3-_s(Math.abs(e)))}function XT(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,_s(t)-_s(e))+1}var we=1e-6,tu=1e-12,Fe=Math.PI,_t=Fe/2,Nc=Fe/4,sn=Fe*2,Ze=180/Fe,xe=Fe/180,Ve=Math.abs,Ps=Math.atan,an=Math.atan2,ve=Math.cos,Ml=Math.ceil,jT=Math.exp,gp=Math.hypot,Pc=Math.log,s0=Math.pow,de=Math.sin,Hn=Math.sign||function(e){return e>0?1:e<0?-1:0},Dt=Math.sqrt,Zg=Math.tan;function QT(e){return e>1?0:e<-1?Fe:Math.acos(e)}function un(e){return e>1?_t:e<-1?-_t:Math.asin(e)}function hb(e){return(e=de(e/2))*e}function ht(){}function kc(e,t){e&&pb.hasOwnProperty(e.type)&&pb[e.type](e,t)}var db={Feature:function(e,t){kc(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)kc(n[r].geometry,t)}},pb={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){_p(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)_p(n[r],t,0)},Polygon:function(e,t){gb(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)gb(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)kc(n[r],t)}};function _p(e,t,n){var r=-1,i=e.length-n,o;for(t.lineStart();++r<i;)o=e[r],t.point(o[0],o[1],o[2]);t.lineEnd()}function gb(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)_p(e[n],t,1);t.polygonEnd()}function er(e,t){e&&db.hasOwnProperty(e.type)?db[e.type](e,t):kc(e,t)}var Dc=new St,Oc=new St,JT,ZT,mp,vp,yp,mr={point:ht,lineStart:ht,lineEnd:ht,polygonStart:function(){Dc=new St,mr.lineStart=cU,mr.lineEnd=fU},polygonEnd:function(){var e=+Dc;Oc.add(e<0?sn+e:e),this.lineStart=this.lineEnd=this.point=ht},sphere:function(){Oc.add(sn)}};function cU(){mr.point=hU}function fU(){eC(JT,ZT)}function hU(e,t){mr.point=eC,JT=e,ZT=t,e*=xe,t*=xe,mp=e,vp=ve(t=t/2+Nc),yp=de(t)}function eC(e,t){e*=xe,t*=xe,t=t/2+Nc;var n=e-mp,r=n>=0?1:-1,i=r*n,o=ve(t),a=de(t),u=yp*a,c=vp*o+u*ve(i),f=u*r*de(i);Dc.add(an(f,c)),mp=e,vp=o,yp=a}function dU(e){return Oc=new St,er(e,mr),Oc*2}function Lc(e){return[an(e[1],e[0]),un(e[2])]}function ro(e){var t=e[0],n=e[1],r=ve(n);return[r*ve(t),r*de(t),de(n)]}function Il(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function vs(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function a0(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function Rl(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function $c(e){var t=Dt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}var ft,yn,gt,Nn,Fi,tC,nC,is,Ia,si,Hr,Lr={point:bp,lineStart:_b,lineEnd:mb,polygonStart:function(){Lr.point=iC,Lr.lineStart=pU,Lr.lineEnd=gU,Ia=new St,mr.polygonStart()},polygonEnd:function(){mr.polygonEnd(),Lr.point=bp,Lr.lineStart=_b,Lr.lineEnd=mb,Dc<0?(ft=-(gt=180),yn=-(Nn=90)):Ia>we?Nn=90:Ia<-we&&(yn=-90),Hr[0]=ft,Hr[1]=gt},sphere:function(){ft=-(gt=180),yn=-(Nn=90)}};function bp(e,t){si.push(Hr=[ft=e,gt=e]),t<yn&&(yn=t),t>Nn&&(Nn=t)}function rC(e,t){var n=ro([e*xe,t*xe]);if(is){var r=vs(is,n),i=[r[1],-r[0],0],o=vs(i,r);$c(o),o=Lc(o);var a=e-Fi,u=a>0?1:-1,c=o[0]*Ze*u,f,h=Ve(a)>180;h^(u*Fi<c&&c<u*e)?(f=o[1]*Ze,f>Nn&&(Nn=f)):(c=(c+360)%360-180,h^(u*Fi<c&&c<u*e)?(f=-o[1]*Ze,f<yn&&(yn=f)):(t<yn&&(yn=t),t>Nn&&(Nn=t))),h?e<Fi?In(ft,e)>In(ft,gt)&&(gt=e):In(e,gt)>In(ft,gt)&&(ft=e):gt>=ft?(e<ft&&(ft=e),e>gt&&(gt=e)):e>Fi?In(ft,e)>In(ft,gt)&&(gt=e):In(e,gt)>In(ft,gt)&&(ft=e)}else si.push(Hr=[ft=e,gt=e]);t<yn&&(yn=t),t>Nn&&(Nn=t),is=n,Fi=e}function _b(){Lr.point=rC}function mb(){Hr[0]=ft,Hr[1]=gt,Lr.point=bp,is=null}function iC(e,t){if(is){var n=e-Fi;Ia.add(Ve(n)>180?n+(n>0?360:-360):n)}else tC=e,nC=t;mr.point(e,t),rC(e,t)}function pU(){mr.lineStart()}function gU(){iC(tC,nC),mr.lineEnd(),Ve(Ia)>we&&(ft=-(gt=180)),Hr[0]=ft,Hr[1]=gt,is=null}function In(e,t){return(t-=e)<0?t+360:t}function _U(e,t){return e[0]-t[0]}function vb(e,t){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}function mU(e){var t,n,r,i,o,a,u;if(Nn=gt=-(ft=yn=1/0),si=[],er(e,Lr),n=si.length){for(si.sort(_U),t=1,r=si[0],o=[r];t<n;++t)i=si[t],vb(r,i[0])||vb(r,i[1])?(In(r[0],i[1])>In(r[0],r[1])&&(r[1]=i[1]),In(i[0],r[1])>In(r[0],r[1])&&(r[0]=i[0])):o.push(r=i);for(a=-1/0,n=o.length-1,t=0,r=o[n];t<=n;r=i,++t)i=o[t],(u=In(r[1],i[0]))>a&&(a=u,ft=i[0],gt=r[1])}return si=Hr=null,ft===1/0||yn===1/0?[[NaN,NaN],[NaN,NaN]]:[[ft,yn],[gt,Nn]]}var pa,Fc,Bc,Uc,Wc,zc,Gc,Vc,wp,xp,Tp,oC,sC,Zt,en,tn,rr={sphere:ht,point:e_,lineStart:yb,lineEnd:bb,polygonStart:function(){rr.lineStart=bU,rr.lineEnd=wU},polygonEnd:function(){rr.lineStart=yb,rr.lineEnd=bb}};function e_(e,t){e*=xe,t*=xe;var n=ve(t);bu(n*ve(e),n*de(e),de(t))}function bu(e,t,n){++pa,Bc+=(e-Bc)/pa,Uc+=(t-Uc)/pa,Wc+=(n-Wc)/pa}function yb(){rr.point=vU}function vU(e,t){e*=xe,t*=xe;var n=ve(t);Zt=n*ve(e),en=n*de(e),tn=de(t),rr.point=yU,bu(Zt,en,tn)}function yU(e,t){e*=xe,t*=xe;var n=ve(t),r=n*ve(e),i=n*de(e),o=de(t),a=an(Dt((a=en*o-tn*i)*a+(a=tn*r-Zt*o)*a+(a=Zt*i-en*r)*a),Zt*r+en*i+tn*o);Fc+=a,zc+=a*(Zt+(Zt=r)),Gc+=a*(en+(en=i)),Vc+=a*(tn+(tn=o)),bu(Zt,en,tn)}function bb(){rr.point=e_}function bU(){rr.point=xU}function wU(){aC(oC,sC),rr.point=e_}function xU(e,t){oC=e,sC=t,e*=xe,t*=xe,rr.point=aC;var n=ve(t);Zt=n*ve(e),en=n*de(e),tn=de(t),bu(Zt,en,tn)}function aC(e,t){e*=xe,t*=xe;var n=ve(t),r=n*ve(e),i=n*de(e),o=de(t),a=en*o-tn*i,u=tn*r-Zt*o,c=Zt*i-en*r,f=gp(a,u,c),h=un(f),g=f&&-h/f;wp.add(g*a),xp.add(g*u),Tp.add(g*c),Fc+=h,zc+=h*(Zt+(Zt=r)),Gc+=h*(en+(en=i)),Vc+=h*(tn+(tn=o)),bu(Zt,en,tn)}function TU(e){pa=Fc=Bc=Uc=Wc=zc=Gc=Vc=0,wp=new St,xp=new St,Tp=new St,er(e,rr);var t=+wp,n=+xp,r=+Tp,i=gp(t,n,r);return i<tu&&(t=zc,n=Gc,r=Vc,Fc<we&&(t=Bc,n=Uc,r=Wc),i=gp(t,n,r),i<tu)?[NaN,NaN]:[an(n,t)*Ze,un(r/i)*Ze]}function Go(e){return function(){return e}}function Cp(e,t){function n(r,i){return r=e(r,i),t(r[0],r[1])}return e.invert&&t.invert&&(n.invert=function(r,i){return r=t.invert(r,i),r&&e.invert(r[0],r[1])}),n}function Ep(e,t){return Ve(e)>Fe&&(e-=Math.round(e/sn)*sn),[e,t]}Ep.invert=Ep;function t_(e,t,n){return(e%=sn)?t||n?Cp(xb(e),Tb(t,n)):xb(e):t||n?Tb(t,n):Ep}function wb(e){return function(t,n){return t+=e,Ve(t)>Fe&&(t-=Math.round(t/sn)*sn),[t,n]}}function xb(e){var t=wb(e);return t.invert=wb(-e),t}function Tb(e,t){var n=ve(e),r=de(e),i=ve(t),o=de(t);function a(u,c){var f=ve(c),h=ve(u)*f,g=de(u)*f,d=de(c),_=d*n+h*r;return[an(g*i-_*o,h*n-d*r),un(_*i+g*o)]}return a.invert=function(u,c){var f=ve(c),h=ve(u)*f,g=de(u)*f,d=de(c),_=d*i-g*o;return[an(g*i+d*o,h*n+_*r),un(_*n-h*r)]},a}function uC(e){e=t_(e[0]*xe,e[1]*xe,e.length>2?e[2]*xe:0);function t(n){return n=e(n[0]*xe,n[1]*xe),n[0]*=Ze,n[1]*=Ze,n}return t.invert=function(n){return n=e.invert(n[0]*xe,n[1]*xe),n[0]*=Ze,n[1]*=Ze,n},t}function lC(e,t,n,r,i,o){if(n){var a=ve(t),u=de(t),c=r*n;i==null?(i=t+r*sn,o=t-c/2):(i=Cb(a,i),o=Cb(a,o),(r>0?i<o:i>o)&&(i+=r*sn));for(var f,h=i;r>0?h>o:h<o;h-=c)f=Lc([a,-u*ve(h),-u*de(h)]),e.point(f[0],f[1])}}function Cb(e,t){t=ro(t),t[0]-=e,$c(t);var n=QT(-t[1]);return((-t[2]<0?-n:n)+sn-we)%sn}function CU(){var e=Go([0,0]),t=Go(90),n=Go(2),r,i,o={point:a};function a(c,f){r.push(c=i(c,f)),c[0]*=Ze,c[1]*=Ze}function u(){var c=e.apply(this,arguments),f=t.apply(this,arguments)*xe,h=n.apply(this,arguments)*xe;return r=[],i=t_(-c[0]*xe,-c[1]*xe,0).invert,lC(o,f,h,1),c={type:"Polygon",coordinates:[r]},r=i=null,c}return u.center=function(c){return arguments.length?(e=typeof c=="function"?c:Go([+c[0],+c[1]]),u):e},u.radius=function(c){return arguments.length?(t=typeof c=="function"?c:Go(+c),u):t},u.precision=function(c){return arguments.length?(n=typeof c=="function"?c:Go(+c),u):n},u}function cC(){var e=[],t;return{point:function(n,r,i){t.push([n,r,i])},lineStart:function(){e.push(t=[])},lineEnd:ht,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function Xl(e,t){return Ve(e[0]-t[0])<we&&Ve(e[1]-t[1])<we}function Nl(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function fC(e,t,n,r,i){var o=[],a=[],u,c;if(e.forEach(function(y){if(!((w=y.length-1)<=0)){var w,m=y[0],b=y[w],C;if(Xl(m,b)){if(!m[2]&&!b[2]){for(i.lineStart(),u=0;u<w;++u)i.point((m=y[u])[0],m[1]);i.lineEnd();return}b[0]+=2*we}o.push(C=new Nl(m,y,null,!0)),a.push(C.o=new Nl(m,null,C,!1)),o.push(C=new Nl(b,y,null,!1)),a.push(C.o=new Nl(b,null,C,!0))}}),!!o.length){for(a.sort(t),Eb(o),Eb(a),u=0,c=a.length;u<c;++u)a[u].e=n=!n;for(var f=o[0],h,g;;){for(var d=f,_=!0;d.v;)if((d=d.n)===f)return;h=d.z,i.lineStart();do{if(d.v=d.o.v=!0,d.e){if(_)for(u=0,c=h.length;u<c;++u)i.point((g=h[u])[0],g[1]);else r(d.x,d.n.x,1,i);d=d.n}else{if(_)for(h=d.p.z,u=h.length-1;u>=0;--u)i.point((g=h[u])[0],g[1]);else r(d.x,d.p.x,-1,i);d=d.p}d=d.o,h=d.z,_=!_}while(!d.v);i.lineEnd()}}}function Eb(e){if(t=e.length){for(var t,n=0,r=e[0],i;++n<t;)r.n=i=e[n],i.p=r,r=i;r.n=i=e[0],i.p=r}}function u0(e){return Ve(e[0])<=Fe?e[0]:Hn(e[0])*((Ve(e[0])+Fe)%sn-Fe)}function hC(e,t){var n=u0(t),r=t[1],i=de(r),o=[de(n),-ve(n),0],a=0,u=0,c=new St;i===1?r=_t+we:i===-1&&(r=-_t-we);for(var f=0,h=e.length;f<h;++f)if(d=(g=e[f]).length)for(var g,d,_=g[d-1],y=u0(_),w=_[1]/2+Nc,m=de(w),b=ve(w),C=0;C<d;++C,y=x,m=R,b=D,_=T){var T=g[C],x=u0(T),S=T[1]/2+Nc,R=de(S),D=ve(S),$=x-y,F=$>=0?1:-1,U=F*$,A=U>Fe,W=m*R;if(c.add(an(W*F*de(U),b*D+W*ve(U))),a+=A?$+F*sn:$,A^y>=n^x>=n){var k=vs(ro(_),ro(T));$c(k);var N=vs(o,k);$c(N);var P=(A^$>=0?-1:1)*un(N[2]);(r>P||r===P&&(k[0]||k[1]))&&(u+=A^$>=0?1:-1)}}return(a<-we||a<we&&c<-tu)^u&1}function dC(e,t,n,r){return function(i){var o=t(i),a=cC(),u=t(a),c=!1,f,h,g,d={point:_,lineStart:w,lineEnd:m,polygonStart:function(){d.point=b,d.lineStart=C,d.lineEnd=T,h=[],f=[]},polygonEnd:function(){d.point=_,d.lineStart=w,d.lineEnd=m,h=Ig(h);var x=hC(f,r);h.length?(c||(i.polygonStart(),c=!0),fC(h,SU,x,n,i)):x&&(c||(i.polygonStart(),c=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),c&&(i.polygonEnd(),c=!1),h=f=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function _(x,S){e(x,S)&&i.point(x,S)}function y(x,S){o.point(x,S)}function w(){d.point=y,o.lineStart()}function m(){d.point=_,o.lineEnd()}function b(x,S){g.push([x,S]),u.point(x,S)}function C(){u.lineStart(),g=[]}function T(){b(g[0][0],g[0][1]),u.lineEnd();var x=u.clean(),S=a.result(),R,D=S.length,$,F,U;if(g.pop(),f.push(g),g=null,!!D){if(x&1){if(F=S[0],($=F.length-1)>0){for(c||(i.polygonStart(),c=!0),i.lineStart(),R=0;R<$;++R)i.point((U=F[R])[0],U[1]);i.lineEnd()}return}D>1&&x&2&&S.push(S.pop().concat(S.shift())),h.push(S.filter(EU))}}return d}}function EU(e){return e.length>1}function SU(e,t){return((e=e.x)[0]<0?e[1]-_t-we:_t-e[1])-((t=t.x)[0]<0?t[1]-_t-we:_t-t[1])}const Sp=dC(function(){return!0},AU,IU,[-Fe,-_t]);function AU(e){var t=NaN,n=NaN,r=NaN,i;return{lineStart:function(){e.lineStart(),i=1},point:function(o,a){var u=o>0?Fe:-Fe,c=Ve(o-t);Ve(c-Fe)<we?(e.point(t,n=(n+a)/2>0?_t:-_t),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(u,n),e.point(o,n),i=0):r!==u&&c>=Fe&&(Ve(t-r)<we&&(t-=r*we),Ve(o-u)<we&&(o-=u*we),n=MU(t,n,o,a),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(u,n),i=0),e.point(t=o,n=a),r=u},lineEnd:function(){e.lineEnd(),t=n=NaN},clean:function(){return 2-i}}}function MU(e,t,n,r){var i,o,a=de(e-n);return Ve(a)>we?Ps((de(t)*(o=ve(r))*de(n)-de(r)*(i=ve(t))*de(e))/(i*o*a)):(t+r)/2}function IU(e,t,n,r){var i;if(e==null)i=n*_t,r.point(-Fe,i),r.point(0,i),r.point(Fe,i),r.point(Fe,0),r.point(Fe,-i),r.point(0,-i),r.point(-Fe,-i),r.point(-Fe,0),r.point(-Fe,i);else if(Ve(e[0]-t[0])>we){var o=e[0]<t[0]?Fe:-Fe;i=n*o/2,r.point(-o,i),r.point(0,i),r.point(o,i)}else r.point(t[0],t[1])}function pC(e){var t=ve(e),n=2*xe,r=t>0,i=Ve(t)>we;function o(h,g,d,_){lC(_,e,n,d,h,g)}function a(h,g){return ve(h)*ve(g)>t}function u(h){var g,d,_,y,w;return{lineStart:function(){y=_=!1,w=1},point:function(m,b){var C=[m,b],T,x=a(m,b),S=r?x?0:f(m,b):x?f(m+(m<0?Fe:-Fe),b):0;if(!g&&(y=_=x)&&h.lineStart(),x!==_&&(T=c(g,C),(!T||Xl(g,T)||Xl(C,T))&&(C[2]=1)),x!==_)w=0,x?(h.lineStart(),T=c(C,g),h.point(T[0],T[1])):(T=c(g,C),h.point(T[0],T[1],2),h.lineEnd()),g=T;else if(i&&g&&r^x){var R;!(S&d)&&(R=c(C,g,!0))&&(w=0,r?(h.lineStart(),h.point(R[0][0],R[0][1]),h.point(R[1][0],R[1][1]),h.lineEnd()):(h.point(R[1][0],R[1][1]),h.lineEnd(),h.lineStart(),h.point(R[0][0],R[0][1],3)))}x&&(!g||!Xl(g,C))&&h.point(C[0],C[1]),g=C,_=x,d=S},lineEnd:function(){_&&h.lineEnd(),g=null},clean:function(){return w|(y&&_)<<1}}}function c(h,g,d){var _=ro(h),y=ro(g),w=[1,0,0],m=vs(_,y),b=Il(m,m),C=m[0],T=b-C*C;if(!T)return!d&&h;var x=t*b/T,S=-t*C/T,R=vs(w,m),D=Rl(w,x),$=Rl(m,S);a0(D,$);var F=R,U=Il(D,F),A=Il(F,F),W=U*U-A*(Il(D,D)-1);if(!(W<0)){var k=Dt(W),N=Rl(F,(-U-k)/A);if(a0(N,D),N=Lc(N),!d)return N;var P=h[0],L=g[0],q=h[1],Y=g[1],j;L<P&&(j=P,P=L,L=j);var B=L-P,G=Ve(B-Fe)<we,X=G||B<we;if(!G&&Y<q&&(j=q,q=Y,Y=j),X?G?q+Y>0^N[1]<(Ve(N[0]-P)<we?q:Y):q<=N[1]&&N[1]<=Y:B>Fe^(P<=N[0]&&N[0]<=L)){var J=Rl(F,(-U+k)/A);return a0(J,D),[N,Lc(J)]}}}function f(h,g){var d=r?e:Fe-e,_=0;return h<-d?_|=1:h>d&&(_|=2),g<-d?_|=4:g>d&&(_|=8),_}return dC(a,u,o,r?[0,-e]:[-Fe,e-Fe])}function RU(e,t,n,r,i,o){var a=e[0],u=e[1],c=t[0],f=t[1],h=0,g=1,d=c-a,_=f-u,y;if(y=n-a,!(!d&&y>0)){if(y/=d,d<0){if(y<h)return;y<g&&(g=y)}else if(d>0){if(y>g)return;y>h&&(h=y)}if(y=i-a,!(!d&&y<0)){if(y/=d,d<0){if(y>g)return;y>h&&(h=y)}else if(d>0){if(y<h)return;y<g&&(g=y)}if(y=r-u,!(!_&&y>0)){if(y/=_,_<0){if(y<h)return;y<g&&(g=y)}else if(_>0){if(y>g)return;y>h&&(h=y)}if(y=o-u,!(!_&&y<0)){if(y/=_,_<0){if(y>g)return;y>h&&(h=y)}else if(_>0){if(y<h)return;y<g&&(g=y)}return h>0&&(e[0]=a+h*d,e[1]=u+h*_),g<1&&(t[0]=a+g*d,t[1]=u+g*_),!0}}}}}var ga=1e9,Pl=-ga;function Ff(e,t,n,r){function i(f,h){return e<=f&&f<=n&&t<=h&&h<=r}function o(f,h,g,d){var _=0,y=0;if(f==null||(_=a(f,g))!==(y=a(h,g))||c(f,h)<0^g>0)do d.point(_===0||_===3?e:n,_>1?r:t);while((_=(_+g+4)%4)!==y);else d.point(h[0],h[1])}function a(f,h){return Ve(f[0]-e)<we?h>0?0:3:Ve(f[0]-n)<we?h>0?2:1:Ve(f[1]-t)<we?h>0?1:0:h>0?3:2}function u(f,h){return c(f.x,h.x)}function c(f,h){var g=a(f,1),d=a(h,1);return g!==d?g-d:g===0?h[1]-f[1]:g===1?f[0]-h[0]:g===2?f[1]-h[1]:h[0]-f[0]}return function(f){var h=f,g=cC(),d,_,y,w,m,b,C,T,x,S,R,D={point:$,lineStart:W,lineEnd:k,polygonStart:U,polygonEnd:A};function $(P,L){i(P,L)&&h.point(P,L)}function F(){for(var P=0,L=0,q=_.length;L<q;++L)for(var Y=_[L],j=1,B=Y.length,G=Y[0],X,J,ie=G[0],oe=G[1];j<B;++j)X=ie,J=oe,G=Y[j],ie=G[0],oe=G[1],J<=r?oe>r&&(ie-X)*(r-J)>(oe-J)*(e-X)&&++P:oe<=r&&(ie-X)*(r-J)<(oe-J)*(e-X)&&--P;return P}function U(){h=g,d=[],_=[],R=!0}function A(){var P=F(),L=R&&P,q=(d=Ig(d)).length;(L||q)&&(f.polygonStart(),L&&(f.lineStart(),o(null,null,1,f),f.lineEnd()),q&&fC(d,u,P,o,f),f.polygonEnd()),h=f,d=_=y=null}function W(){D.point=N,_&&_.push(y=[]),S=!0,x=!1,C=T=NaN}function k(){d&&(N(w,m),b&&x&&g.rejoin(),d.push(g.result())),D.point=$,x&&h.lineEnd()}function N(P,L){var q=i(P,L);if(_&&y.push([P,L]),S)w=P,m=L,b=q,S=!1,q&&(h.lineStart(),h.point(P,L));else if(q&&x)h.point(P,L);else{var Y=[C=Math.max(Pl,Math.min(ga,C)),T=Math.max(Pl,Math.min(ga,T))],j=[P=Math.max(Pl,Math.min(ga,P)),L=Math.max(Pl,Math.min(ga,L))];RU(Y,j,e,t,n,r)?(x||(h.lineStart(),h.point(Y[0],Y[1])),h.point(j[0],j[1]),q||h.lineEnd(),R=!1):q&&(h.lineStart(),h.point(P,L),R=!1)}C=P,T=L,x=q}return D}}function NU(){var e=0,t=0,n=960,r=500,i,o,a;return a={stream:function(u){return i&&o===u?i:i=Ff(e,t,n,r)(o=u)},extent:function(u){return arguments.length?(e=+u[0][0],t=+u[0][1],n=+u[1][0],r=+u[1][1],i=o=null,a):[[e,t],[n,r]]}}}var Ap,Mp,jl,Ql,ys={sphere:ht,point:ht,lineStart:PU,lineEnd:ht,polygonStart:ht,polygonEnd:ht};function PU(){ys.point=DU,ys.lineEnd=kU}function kU(){ys.point=ys.lineEnd=ht}function DU(e,t){e*=xe,t*=xe,Mp=e,jl=de(t),Ql=ve(t),ys.point=OU}function OU(e,t){e*=xe,t*=xe;var n=de(t),r=ve(t),i=Ve(e-Mp),o=ve(i),a=de(i),u=r*a,c=Ql*n-jl*r*o,f=jl*n+Ql*r*o;Ap.add(an(Dt(u*u+c*c),f)),Mp=e,jl=n,Ql=r}function gC(e){return Ap=new St,er(e,ys),+Ap}var Ip=[null,null],LU={type:"LineString",coordinates:Ip};function Hc(e,t){return Ip[0]=e,Ip[1]=t,gC(LU)}var Sb={Feature:function(e,t){return qc(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)if(qc(n[r].geometry,t))return!0;return!1}},Ab={Sphere:function(){return!0},Point:function(e,t){return Mb(e.coordinates,t)},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)if(Mb(n[r],t))return!0;return!1},LineString:function(e,t){return Ib(e.coordinates,t)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)if(Ib(n[r],t))return!0;return!1},Polygon:function(e,t){return Rb(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)if(Rb(n[r],t))return!0;return!1},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)if(qc(n[r],t))return!0;return!1}};function qc(e,t){return e&&Ab.hasOwnProperty(e.type)?Ab[e.type](e,t):!1}function Mb(e,t){return Hc(e,t)===0}function Ib(e,t){for(var n,r,i,o=0,a=e.length;o<a;o++){if(r=Hc(e[o],t),r===0||o>0&&(i=Hc(e[o],e[o-1]),i>0&&n<=i&&r<=i&&(n+r-i)*(1-Math.pow((n-r)/i,2))<tu*i))return!0;n=r}return!1}function Rb(e,t){return!!hC(e.map($U),_C(t))}function $U(e){return e=e.map(_C),e.pop(),e}function _C(e){return[e[0]*xe,e[1]*xe]}function FU(e,t){return(e&&Sb.hasOwnProperty(e.type)?Sb[e.type]:qc)(e,t)}function Nb(e,t,n){var r=ai(e,t-we,n).concat(t);return function(i){return r.map(function(o){return[i,o]})}}function Pb(e,t,n){var r=ai(e,t-we,n).concat(t);return function(i){return r.map(function(o){return[o,i]})}}function mC(){var e,t,n,r,i,o,a,u,c=10,f=c,h=90,g=360,d,_,y,w,m=2.5;function b(){return{type:"MultiLineString",coordinates:C()}}function C(){return ai(Ml(r/h)*h,n,h).map(y).concat(ai(Ml(u/g)*g,a,g).map(w)).concat(ai(Ml(t/c)*c,e,c).filter(function(T){return Ve(T%h)>we}).map(d)).concat(ai(Ml(o/f)*f,i,f).filter(function(T){return Ve(T%g)>we}).map(_))}return b.lines=function(){return C().map(function(T){return{type:"LineString",coordinates:T}})},b.outline=function(){return{type:"Polygon",coordinates:[y(r).concat(w(a).slice(1),y(n).reverse().slice(1),w(u).reverse().slice(1))]}},b.extent=function(T){return arguments.length?b.extentMajor(T).extentMinor(T):b.extentMinor()},b.extentMajor=function(T){return arguments.length?(r=+T[0][0],n=+T[1][0],u=+T[0][1],a=+T[1][1],r>n&&(T=r,r=n,n=T),u>a&&(T=u,u=a,a=T),b.precision(m)):[[r,u],[n,a]]},b.extentMinor=function(T){return arguments.length?(t=+T[0][0],e=+T[1][0],o=+T[0][1],i=+T[1][1],t>e&&(T=t,t=e,e=T),o>i&&(T=o,o=i,i=T),b.precision(m)):[[t,o],[e,i]]},b.step=function(T){return arguments.length?b.stepMajor(T).stepMinor(T):b.stepMinor()},b.stepMajor=function(T){return arguments.length?(h=+T[0],g=+T[1],b):[h,g]},b.stepMinor=function(T){return arguments.length?(c=+T[0],f=+T[1],b):[c,f]},b.precision=function(T){return arguments.length?(m=+T,d=Nb(o,i,90),_=Pb(t,e,m),y=Nb(u,a,90),w=Pb(r,n,m),b):m},b.extentMajor([[-180,-90+we],[180,90-we]]).extentMinor([[-180,-80-we],[180,80+we]])}function BU(){return mC()()}function UU(e,t){var n=e[0]*xe,r=e[1]*xe,i=t[0]*xe,o=t[1]*xe,a=ve(r),u=de(r),c=ve(o),f=de(o),h=a*ve(n),g=a*de(n),d=c*ve(i),_=c*de(i),y=2*un(Dt(hb(o-r)+a*c*hb(i-n))),w=de(y),m=y?function(b){var C=de(b*=y)/w,T=de(y-b)/w,x=T*h+C*d,S=T*g+C*_,R=T*u+C*f;return[an(S,x)*Ze,an(R,Dt(x*x+S*S))*Ze]}:function(){return[n*Ze,r*Ze]};return m.distance=y,m}const nu=e=>e;var l0=new St,Rp=new St,vC,yC,Np,Pp,$r={point:ht,lineStart:ht,lineEnd:ht,polygonStart:function(){$r.lineStart=WU,$r.lineEnd=GU},polygonEnd:function(){$r.lineStart=$r.lineEnd=$r.point=ht,l0.add(Ve(Rp)),Rp=new St},result:function(){var e=l0/2;return l0=new St,e}};function WU(){$r.point=zU}function zU(e,t){$r.point=bC,vC=Np=e,yC=Pp=t}function bC(e,t){Rp.add(Pp*e-Np*t),Np=e,Pp=t}function GU(){bC(vC,yC)}var bs=1/0,Yc=bs,ru=-bs,Kc=ru,Xc={point:VU,lineStart:ht,lineEnd:ht,polygonStart:ht,polygonEnd:ht,result:function(){var e=[[bs,Yc],[ru,Kc]];return ru=Kc=-(Yc=bs=1/0),e}};function VU(e,t){e<bs&&(bs=e),e>ru&&(ru=e),t<Yc&&(Yc=t),t>Kc&&(Kc=t)}var kp=0,Dp=0,_a=0,jc=0,Qc=0,jo=0,Op=0,Lp=0,ma=0,wC,xC,fr,hr,Vn={point:io,lineStart:kb,lineEnd:Db,polygonStart:function(){Vn.lineStart=YU,Vn.lineEnd=KU},polygonEnd:function(){Vn.point=io,Vn.lineStart=kb,Vn.lineEnd=Db},result:function(){var e=ma?[Op/ma,Lp/ma]:jo?[jc/jo,Qc/jo]:_a?[kp/_a,Dp/_a]:[NaN,NaN];return kp=Dp=_a=jc=Qc=jo=Op=Lp=ma=0,e}};function io(e,t){kp+=e,Dp+=t,++_a}function kb(){Vn.point=HU}function HU(e,t){Vn.point=qU,io(fr=e,hr=t)}function qU(e,t){var n=e-fr,r=t-hr,i=Dt(n*n+r*r);jc+=i*(fr+e)/2,Qc+=i*(hr+t)/2,jo+=i,io(fr=e,hr=t)}function Db(){Vn.point=io}function YU(){Vn.point=XU}function KU(){TC(wC,xC)}function XU(e,t){Vn.point=TC,io(wC=fr=e,xC=hr=t)}function TC(e,t){var n=e-fr,r=t-hr,i=Dt(n*n+r*r);jc+=i*(fr+e)/2,Qc+=i*(hr+t)/2,jo+=i,i=hr*e-fr*t,Op+=i*(fr+e),Lp+=i*(hr+t),ma+=i*3,io(fr=e,hr=t)}function CC(e){this._context=e}CC.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._context.moveTo(e,t),this._point=1;break}case 1:{this._context.lineTo(e,t);break}default:{this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,sn);break}}},result:ht};var $p=new St,c0,EC,SC,va,ya,iu={point:ht,lineStart:function(){iu.point=jU},lineEnd:function(){c0&&AC(EC,SC),iu.point=ht},polygonStart:function(){c0=!0},polygonEnd:function(){c0=null},result:function(){var e=+$p;return $p=new St,e}};function jU(e,t){iu.point=AC,EC=va=e,SC=ya=t}function AC(e,t){va-=e,ya-=t,$p.add(Dt(va*va+ya*ya)),va=e,ya=t}let Ob,Jc,Lb,$b;class Fb{constructor(t){this._append=t==null?MC:QU(t),this._radius=4.5,this._=""}pointRadius(t){return this._radius=+t,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(t,n){switch(this._point){case 0:{this._append`M${t},${n}`,this._point=1;break}case 1:{this._append`L${t},${n}`;break}default:{if(this._append`M${t},${n}`,this._radius!==Lb||this._append!==Jc){const r=this._radius,i=this._;this._="",this._append`m0,${r}a${r},${r} 0 1,1 0,${-2*r}a${r},${r} 0 1,1 0,${2*r}z`,Lb=r,Jc=this._append,$b=this._,this._=i}this._+=$b;break}}}result(){const t=this._;return this._="",t.length?t:null}}function MC(e){let t=1;this._+=e[0];for(const n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function QU(e){const t=Math.floor(e);if(!(t>=0))throw new RangeError(`invalid digits: ${e}`);if(t>15)return MC;if(t!==Ob){const n=10**t;Ob=t,Jc=function(i){let o=1;this._+=i[0];for(const a=i.length;o<a;++o)this._+=Math.round(arguments[o]*n)/n+i[o]}}return Jc}function JU(e,t){let n=3,r=4.5,i,o;function a(u){return u&&(typeof r=="function"&&o.pointRadius(+r.apply(this,arguments)),er(u,i(o))),o.result()}return a.area=function(u){return er(u,i($r)),$r.result()},a.measure=function(u){return er(u,i(iu)),iu.result()},a.bounds=function(u){return er(u,i(Xc)),Xc.result()},a.centroid=function(u){return er(u,i(Vn)),Vn.result()},a.projection=function(u){return arguments.length?(i=u==null?(e=null,nu):(e=u).stream,a):e},a.context=function(u){return arguments.length?(o=u==null?(t=null,new Fb(n)):new CC(t=u),typeof r!="function"&&o.pointRadius(r),a):t},a.pointRadius=function(u){return arguments.length?(r=typeof u=="function"?u:(o.pointRadius(+u),+u),a):r},a.digits=function(u){if(!arguments.length)return n;if(u==null)n=null;else{const c=Math.floor(u);if(!(c>=0))throw new RangeError(`invalid digits: ${u}`);n=c}return t===null&&(o=new Fb(n)),a},a.projection(e).digits(n).context(t)}function ZU(e){return{stream:wu(e)}}function wu(e){return function(t){var n=new Fp;for(var r in e)n[r]=e[r];return n.stream=t,n}}function Fp(){}Fp.prototype={constructor:Fp,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function n_(e,t,n){var r=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),r!=null&&e.clipExtent(null),er(n,e.stream(Xc)),t(Xc.result()),r!=null&&e.clipExtent(r),e}function Bf(e,t,n){return n_(e,function(r){var i=t[1][0]-t[0][0],o=t[1][1]-t[0][1],a=Math.min(i/(r[1][0]-r[0][0]),o/(r[1][1]-r[0][1])),u=+t[0][0]+(i-a*(r[1][0]+r[0][0]))/2,c=+t[0][1]+(o-a*(r[1][1]+r[0][1]))/2;e.scale(150*a).translate([u,c])},n)}function r_(e,t,n){return Bf(e,[[0,0],t],n)}function i_(e,t,n){return n_(e,function(r){var i=+t,o=i/(r[1][0]-r[0][0]),a=(i-o*(r[1][0]+r[0][0]))/2,u=-o*r[0][1];e.scale(150*o).translate([a,u])},n)}function o_(e,t,n){return n_(e,function(r){var i=+t,o=i/(r[1][1]-r[0][1]),a=-o*r[0][0],u=(i-o*(r[1][1]+r[0][1]))/2;e.scale(150*o).translate([a,u])},n)}var Bb=16,eW=ve(30*xe);function Ub(e,t){return+t?nW(e,t):tW(e)}function tW(e){return wu({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}function nW(e,t){function n(r,i,o,a,u,c,f,h,g,d,_,y,w,m){var b=f-r,C=h-i,T=b*b+C*C;if(T>4*t&&w--){var x=a+d,S=u+_,R=c+y,D=Dt(x*x+S*S+R*R),$=un(R/=D),F=Ve(Ve(R)-1)<we||Ve(o-g)<we?(o+g)/2:an(S,x),U=e(F,$),A=U[0],W=U[1],k=A-r,N=W-i,P=C*k-b*N;(P*P/T>t||Ve((b*k+C*N)/T-.5)>.3||a*d+u*_+c*y<eW)&&(n(r,i,o,a,u,c,A,W,F,x/=D,S/=D,R,w,m),m.point(A,W),n(A,W,F,x,S,R,f,h,g,d,_,y,w,m))}}return function(r){var i,o,a,u,c,f,h,g,d,_,y,w,m={point:b,lineStart:C,lineEnd:x,polygonStart:function(){r.polygonStart(),m.lineStart=S},polygonEnd:function(){r.polygonEnd(),m.lineStart=C}};function b($,F){$=e($,F),r.point($[0],$[1])}function C(){g=NaN,m.point=T,r.lineStart()}function T($,F){var U=ro([$,F]),A=e($,F);n(g,d,h,_,y,w,g=A[0],d=A[1],h=$,_=U[0],y=U[1],w=U[2],Bb,r),r.point(g,d)}function x(){m.point=b,r.lineEnd()}function S(){C(),m.point=R,m.lineEnd=D}function R($,F){T(i=$,F),o=g,a=d,u=_,c=y,f=w,m.point=T}function D(){n(g,d,h,_,y,w,o,a,i,u,c,f,Bb,r),m.lineEnd=x,x()}return m}}var rW=wu({point:function(e,t){this.stream.point(e*xe,t*xe)}});function iW(e){return wu({point:function(t,n){var r=e(t,n);return this.stream.point(r[0],r[1])}})}function oW(e,t,n,r,i){function o(a,u){return a*=r,u*=i,[t+e*a,n-e*u]}return o.invert=function(a,u){return[(a-t)/e*r,(n-u)/e*i]},o}function Wb(e,t,n,r,i,o){if(!o)return oW(e,t,n,r,i);var a=ve(o),u=de(o),c=a*e,f=u*e,h=a/e,g=u/e,d=(u*n-a*t)/e,_=(u*t+a*n)/e;function y(w,m){return w*=r,m*=i,[c*w-f*m+t,n-f*w-c*m]}return y.invert=function(w,m){return[r*(h*w-g*m+d),i*(_-g*w-h*m)]},y}function wr(e){return s_(function(){return e})()}function s_(e){var t,n=150,r=480,i=250,o=0,a=0,u=0,c=0,f=0,h,g=0,d=1,_=1,y=null,w=Sp,m=null,b,C,T,x=nu,S=.5,R,D,$,F,U;function A(P){return $(P[0]*xe,P[1]*xe)}function W(P){return P=$.invert(P[0],P[1]),P&&[P[0]*Ze,P[1]*Ze]}A.stream=function(P){return F&&U===P?F:F=rW(iW(h)(w(R(x(U=P)))))},A.preclip=function(P){return arguments.length?(w=P,y=void 0,N()):w},A.postclip=function(P){return arguments.length?(x=P,m=b=C=T=null,N()):x},A.clipAngle=function(P){return arguments.length?(w=+P?pC(y=P*xe):(y=null,Sp),N()):y*Ze},A.clipExtent=function(P){return arguments.length?(x=P==null?(m=b=C=T=null,nu):Ff(m=+P[0][0],b=+P[0][1],C=+P[1][0],T=+P[1][1]),N()):m==null?null:[[m,b],[C,T]]},A.scale=function(P){return arguments.length?(n=+P,k()):n},A.translate=function(P){return arguments.length?(r=+P[0],i=+P[1],k()):[r,i]},A.center=function(P){return arguments.length?(o=P[0]%360*xe,a=P[1]%360*xe,k()):[o*Ze,a*Ze]},A.rotate=function(P){return arguments.length?(u=P[0]%360*xe,c=P[1]%360*xe,f=P.length>2?P[2]%360*xe:0,k()):[u*Ze,c*Ze,f*Ze]},A.angle=function(P){return arguments.length?(g=P%360*xe,k()):g*Ze},A.reflectX=function(P){return arguments.length?(d=P?-1:1,k()):d<0},A.reflectY=function(P){return arguments.length?(_=P?-1:1,k()):_<0},A.precision=function(P){return arguments.length?(R=Ub(D,S=P*P),N()):Dt(S)},A.fitExtent=function(P,L){return Bf(A,P,L)},A.fitSize=function(P,L){return r_(A,P,L)},A.fitWidth=function(P,L){return i_(A,P,L)},A.fitHeight=function(P,L){return o_(A,P,L)};function k(){var P=Wb(n,0,0,d,_,g).apply(null,t(o,a)),L=Wb(n,r-P[0],i-P[1],d,_,g);return h=t_(u,c,f),D=Cp(t,L),$=Cp(h,D),R=Ub(D,S),N()}function N(){return F=U=null,A}return function(){return t=e.apply(this,arguments),A.invert=t.invert&&W,k()}}function a_(e){var t=0,n=Fe/3,r=s_(e),i=r(t,n);return i.parallels=function(o){return arguments.length?r(t=o[0]*xe,n=o[1]*xe):[t*Ze,n*Ze]},i}function sW(e){var t=ve(e);function n(r,i){return[r*t,de(i)/t]}return n.invert=function(r,i){return[r/t,un(i*t)]},n}function IC(e,t){var n=de(e),r=(n+de(t))/2;if(Ve(r)<we)return sW(e);var i=1+n*(2*r-n),o=Dt(i)/r;function a(u,c){var f=Dt(i-2*r*de(c))/r;return[f*de(u*=r),o-f*ve(u)]}return a.invert=function(u,c){var f=o-c,h=an(u,Ve(f))*Hn(f);return f*r<0&&(h-=Fe*Hn(u)*Hn(f)),[h/r,un((i-(u*u+f*f)*r*r)/(2*r))]},a}function Zc(){return a_(IC).scale(155.424).center([0,33.6442])}function RC(){return Zc().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function aW(e){var t=e.length;return{point:function(n,r){for(var i=-1;++i<t;)e[i].point(n,r)},sphere:function(){for(var n=-1;++n<t;)e[n].sphere()},lineStart:function(){for(var n=-1;++n<t;)e[n].lineStart()},lineEnd:function(){for(var n=-1;++n<t;)e[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<t;)e[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<t;)e[n].polygonEnd()}}}function uW(){var e,t,n=RC(),r,i=Zc().rotate([154,0]).center([-2,58.5]).parallels([55,65]),o,a=Zc().rotate([157,0]).center([-3,19.9]).parallels([8,18]),u,c,f={point:function(d,_){c=[d,_]}};function h(d){var _=d[0],y=d[1];return c=null,r.point(_,y),c||(o.point(_,y),c)||(u.point(_,y),c)}h.invert=function(d){var _=n.scale(),y=n.translate(),w=(d[0]-y[0])/_,m=(d[1]-y[1])/_;return(m>=.12&&m<.234&&w>=-.425&&w<-.214?i:m>=.166&&m<.234&&w>=-.214&&w<-.115?a:n).invert(d)},h.stream=function(d){return e&&t===d?e:e=aW([n.stream(t=d),i.stream(d),a.stream(d)])},h.precision=function(d){return arguments.length?(n.precision(d),i.precision(d),a.precision(d),g()):n.precision()},h.scale=function(d){return arguments.length?(n.scale(d),i.scale(d*.35),a.scale(d),h.translate(n.translate())):n.scale()},h.translate=function(d){if(!arguments.length)return n.translate();var _=n.scale(),y=+d[0],w=+d[1];return r=n.translate(d).clipExtent([[y-.455*_,w-.238*_],[y+.455*_,w+.238*_]]).stream(f),o=i.translate([y-.307*_,w+.201*_]).clipExtent([[y-.425*_+we,w+.12*_+we],[y-.214*_-we,w+.234*_-we]]).stream(f),u=a.translate([y-.205*_,w+.212*_]).clipExtent([[y-.214*_+we,w+.166*_+we],[y-.115*_-we,w+.234*_-we]]).stream(f),g()},h.fitExtent=function(d,_){return Bf(h,d,_)},h.fitSize=function(d,_){return r_(h,d,_)},h.fitWidth=function(d,_){return i_(h,d,_)},h.fitHeight=function(d,_){return o_(h,d,_)};function g(){return e=t=null,h}return h.scale(1070)}function NC(e){return function(t,n){var r=ve(t),i=ve(n),o=e(r*i);return o===1/0?[2,0]:[o*i*de(t),o*de(n)]}}function xu(e){return function(t,n){var r=Dt(t*t+n*n),i=e(r),o=de(i),a=ve(i);return[an(t*o,r*a),un(r&&n*o/r)]}}var u_=NC(function(e){return Dt(2/(1+e))});u_.invert=xu(function(e){return 2*un(e/2)});function lW(){return wr(u_).scale(124.75).clipAngle(180-.001)}var l_=NC(function(e){return(e=QT(e))&&e/de(e)});l_.invert=xu(function(e){return e});function cW(){return wr(l_).scale(79.4188).clipAngle(180-.001)}function Tu(e,t){return[e,Pc(Zg((_t+t)/2))]}Tu.invert=function(e,t){return[e,2*Ps(jT(t))-_t]};function fW(){return PC(Tu).scale(961/sn)}function PC(e){var t=wr(e),n=t.center,r=t.scale,i=t.translate,o=t.clipExtent,a=null,u,c,f;t.scale=function(g){return arguments.length?(r(g),h()):r()},t.translate=function(g){return arguments.length?(i(g),h()):i()},t.center=function(g){return arguments.length?(n(g),h()):n()},t.clipExtent=function(g){return arguments.length?(g==null?a=u=c=f=null:(a=+g[0][0],u=+g[0][1],c=+g[1][0],f=+g[1][1]),h()):a==null?null:[[a,u],[c,f]]};function h(){var g=Fe*r(),d=t(uC(t.rotate()).invert([0,0]));return o(a==null?[[d[0]-g,d[1]-g],[d[0]+g,d[1]+g]]:e===Tu?[[Math.max(d[0]-g,a),u],[Math.min(d[0]+g,c),f]]:[[a,Math.max(d[1]-g,u)],[c,Math.min(d[1]+g,f)]])}return h()}function kl(e){return Zg((_t+e)/2)}function kC(e,t){var n=ve(e),r=e===t?de(e):Pc(n/ve(t))/Pc(kl(t)/kl(e)),i=n*s0(kl(e),r)/r;if(!r)return Tu;function o(a,u){i>0?u<-_t+we&&(u=-_t+we):u>_t-we&&(u=_t-we);var c=i/s0(kl(u),r);return[c*de(r*a),i-c*ve(r*a)]}return o.invert=function(a,u){var c=i-u,f=Hn(r)*Dt(a*a+c*c),h=an(a,Ve(c))*Hn(c);return c*r<0&&(h-=Fe*Hn(a)*Hn(c)),[h/r,2*Ps(s0(i/f,1/r))-_t]},o}function hW(){return a_(kC).scale(109.5).parallels([30,30])}function ou(e,t){return[e,t]}ou.invert=ou;function dW(){return wr(ou).scale(152.63)}function DC(e,t){var n=ve(e),r=e===t?de(e):(n-ve(t))/(t-e),i=n/r+e;if(Ve(r)<we)return ou;function o(a,u){var c=i-u,f=r*a;return[c*de(f),i-c*ve(f)]}return o.invert=function(a,u){var c=i-u,f=an(a,Ve(c))*Hn(c);return c*r<0&&(f-=Fe*Hn(a)*Hn(c)),[f/r,i-Hn(r)*Dt(a*a+c*c)]},o}function pW(){return a_(DC).scale(131.154).center([0,13.9389])}var Ra=1.340264,Na=-.081106,Pa=893e-6,ka=.003796,ef=Dt(3)/2,gW=12;function c_(e,t){var n=un(ef*de(t)),r=n*n,i=r*r*r;return[e*ve(n)/(ef*(Ra+3*Na*r+i*(7*Pa+9*ka*r))),n*(Ra+Na*r+i*(Pa+ka*r))]}c_.invert=function(e,t){for(var n=t,r=n*n,i=r*r*r,o=0,a,u,c;o<gW&&(u=n*(Ra+Na*r+i*(Pa+ka*r))-t,c=Ra+3*Na*r+i*(7*Pa+9*ka*r),n-=a=u/c,r=n*n,i=r*r*r,!(Ve(a)<tu));++o);return[ef*e*(Ra+3*Na*r+i*(7*Pa+9*ka*r))/ve(n),un(de(n)/ef)]};function _W(){return wr(c_).scale(177.158)}function f_(e,t){var n=ve(t),r=ve(e)*n;return[n*de(e)/r,de(t)/r]}f_.invert=xu(Ps);function mW(){return wr(f_).scale(144.049).clipAngle(60)}function vW(){var e=1,t=0,n=0,r=1,i=1,o=0,a,u,c=null,f,h,g,d=1,_=1,y=wu({point:function(x,S){var R=T([x,S]);this.stream.point(R[0],R[1])}}),w=nu,m,b;function C(){return d=e*r,_=e*i,m=b=null,T}function T(x){var S=x[0]*d,R=x[1]*_;if(o){var D=R*a-S*u;S=S*a+R*u,R=D}return[S+t,R+n]}return T.invert=function(x){var S=x[0]-t,R=x[1]-n;if(o){var D=R*a+S*u;S=S*a-R*u,R=D}return[S/d,R/_]},T.stream=function(x){return m&&b===x?m:m=y(w(b=x))},T.postclip=function(x){return arguments.length?(w=x,c=f=h=g=null,C()):w},T.clipExtent=function(x){return arguments.length?(w=x==null?(c=f=h=g=null,nu):Ff(c=+x[0][0],f=+x[0][1],h=+x[1][0],g=+x[1][1]),C()):c==null?null:[[c,f],[h,g]]},T.scale=function(x){return arguments.length?(e=+x,C()):e},T.translate=function(x){return arguments.length?(t=+x[0],n=+x[1],C()):[t,n]},T.angle=function(x){return arguments.length?(o=x%360*xe,u=de(o),a=ve(o),C()):o*Ze},T.reflectX=function(x){return arguments.length?(r=x?-1:1,C()):r<0},T.reflectY=function(x){return arguments.length?(i=x?-1:1,C()):i<0},T.fitExtent=function(x,S){return Bf(T,x,S)},T.fitSize=function(x,S){return r_(T,x,S)},T.fitWidth=function(x,S){return i_(T,x,S)},T.fitHeight=function(x,S){return o_(T,x,S)},T}function h_(e,t){var n=t*t,r=n*n;return[e*(.8707-.131979*n+r*(-.013791+r*(.003971*n-.001529*r))),t*(1.007226+n*(.015085+r*(-.044475+.028874*n-.005916*r)))]}h_.invert=function(e,t){var n=t,r=25,i;do{var o=n*n,a=o*o;n-=i=(n*(1.007226+o*(.015085+a*(-.044475+.028874*o-.005916*a)))-t)/(1.007226+o*(.015085*3+a*(-.044475*7+.028874*9*o-.005916*11*a)))}while(Ve(i)>we&&--r>0);return[e/(.8707+(o=n*n)*(-.131979+o*(-.013791+o*o*o*(.003971-.001529*o)))),n]};function yW(){return wr(h_).scale(175.295)}function d_(e,t){return[ve(t)*de(e),de(t)]}d_.invert=xu(un);function bW(){return wr(d_).scale(249.5).clipAngle(90+we)}function p_(e,t){var n=ve(t),r=1+ve(e)*n;return[n*de(e)/r,de(t)/r]}p_.invert=xu(function(e){return 2*Ps(e)});function wW(){return wr(p_).scale(250).clipAngle(142)}function g_(e,t){return[Pc(Zg((_t+t)/2)),-e]}g_.invert=function(e,t){return[-t,2*Ps(jT(e))-_t]};function xW(){var e=PC(g_),t=e.center,n=e.rotate;return e.center=function(r){return arguments.length?t([-r[1],r[0]]):(r=t(),[r[1],-r[0]])},e.rotate=function(r){return arguments.length?n([r[0],r[1],r.length>2?r[2]+90:90]):(r=n(),[r[0],r[1],r[2]-90])},n([0,0,90]).scale(159.155)}function TW(e,t){return e.parent===t.parent?1:2}function CW(e){return e.reduce(EW,0)/e.length}function EW(e,t){return e+t.x}function SW(e){return 1+e.reduce(AW,0)}function AW(e,t){return Math.max(e,t.y)}function MW(e){for(var t;t=e.children;)e=t[0];return e}function IW(e){for(var t;t=e.children;)e=t[t.length-1];return e}function RW(){var e=TW,t=1,n=1,r=!1;function i(o){var a,u=0;o.eachAfter(function(d){var _=d.children;_?(d.x=CW(_),d.y=SW(_)):(d.x=a?u+=e(d,a):0,d.y=0,a=d)});var c=MW(o),f=IW(o),h=c.x-e(c,f)/2,g=f.x+e(f,c)/2;return o.eachAfter(r?function(d){d.x=(d.x-o.x)*t,d.y=(o.y-d.y)*n}:function(d){d.x=(d.x-h)/(g-h)*t,d.y=(1-(o.y?d.y/o.y:1))*n})}return i.separation=function(o){return arguments.length?(e=o,i):e},i.size=function(o){return arguments.length?(r=!1,t=+o[0],n=+o[1],i):r?null:[t,n]},i.nodeSize=function(o){return arguments.length?(r=!0,t=+o[0],n=+o[1],i):r?[t,n]:null},i}function NW(e){var t=0,n=e.children,r=n&&n.length;if(!r)t=1;else for(;--r>=0;)t+=n[r].value;e.value=t}function PW(){return this.eachAfter(NW)}function kW(e,t){let n=-1;for(const r of this)e.call(t,r,++n,this);return this}function DW(e,t){for(var n=this,r=[n],i,o,a=-1;n=r.pop();)if(e.call(t,n,++a,this),i=n.children)for(o=i.length-1;o>=0;--o)r.push(i[o]);return this}function OW(e,t){for(var n=this,r=[n],i=[],o,a,u,c=-1;n=r.pop();)if(i.push(n),o=n.children)for(a=0,u=o.length;a<u;++a)r.push(o[a]);for(;n=i.pop();)e.call(t,n,++c,this);return this}function LW(e,t){let n=-1;for(const r of this)if(e.call(t,r,++n,this))return r}function $W(e){return this.eachAfter(function(t){for(var n=+e(t.data)||0,r=t.children,i=r&&r.length;--i>=0;)n+=r[i].value;t.value=n})}function FW(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})}function BW(e){for(var t=this,n=UW(t,e),r=[t];t!==n;)t=t.parent,r.push(t);for(var i=r.length;e!==n;)r.splice(i,0,e),e=e.parent;return r}function UW(e,t){if(e===t)return e;var n=e.ancestors(),r=t.ancestors(),i=null;for(e=n.pop(),t=r.pop();e===t;)i=e,e=n.pop(),t=r.pop();return i}function WW(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t}function zW(){return Array.from(this)}function GW(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e}function VW(){var e=this,t=[];return e.each(function(n){n!==e&&t.push({source:n.parent,target:n})}),t}function*HW(){var e=this,t,n=[e],r,i,o;do for(t=n.reverse(),n=[];e=t.pop();)if(yield e,r=e.children)for(i=0,o=r.length;i<o;++i)n.push(r[i]);while(n.length)}function __(e,t){e instanceof Map?(e=[void 0,e],t===void 0&&(t=KW)):t===void 0&&(t=YW);for(var n=new oo(e),r,i=[n],o,a,u,c;r=i.pop();)if((a=t(r.data))&&(c=(a=Array.from(a)).length))for(r.children=a,u=c-1;u>=0;--u)i.push(o=a[u]=new oo(a[u])),o.parent=r,o.depth=r.depth+1;return n.eachBefore(OC)}function qW(){return __(this).eachBefore(XW)}function YW(e){return e.children}function KW(e){return Array.isArray(e)?e[1]:null}function XW(e){e.data.value!==void 0&&(e.value=e.data.value),e.data=e.data.data}function OC(e){var t=0;do e.height=t;while((e=e.parent)&&e.height<++t)}function oo(e){this.data=e,this.depth=this.height=0,this.parent=null}oo.prototype=__.prototype={constructor:oo,count:PW,each:kW,eachAfter:OW,eachBefore:DW,find:LW,sum:$W,sort:FW,path:BW,ancestors:WW,descendants:zW,leaves:GW,links:VW,copy:qW,[Symbol.iterator]:HW};function Jl(e){return e==null?null:LC(e)}function LC(e){if(typeof e!="function")throw new Error;return e}function Bi(){return 0}function qo(e){return function(){return e}}const jW=1664525,QW=1013904223,zb=4294967296;function m_(){let e=1;return()=>(e=(jW*e+QW)%zb)/zb}function JW(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function ZW(e,t){let n=e.length,r,i;for(;n;)i=t()*n--|0,r=e[n],e[n]=e[i],e[i]=r;return e}function ez(e){return $C(e,m_())}function $C(e,t){for(var n=0,r=(e=ZW(Array.from(e),t)).length,i=[],o,a;n<r;)o=e[n],a&&FC(a,o)?++n:(a=nz(i=tz(i,o)),n=0);return a}function tz(e,t){var n,r;if(f0(t,e))return[t];for(n=0;n<e.length;++n)if(Dl(t,e[n])&&f0(ba(e[n],t),e))return[e[n],t];for(n=0;n<e.length-1;++n)for(r=n+1;r<e.length;++r)if(Dl(ba(e[n],e[r]),t)&&Dl(ba(e[n],t),e[r])&&Dl(ba(e[r],t),e[n])&&f0(BC(e[n],e[r],t),e))return[e[n],e[r],t];throw new Error}function Dl(e,t){var n=e.r-t.r,r=t.x-e.x,i=t.y-e.y;return n<0||n*n<r*r+i*i}function FC(e,t){var n=e.r-t.r+Math.max(e.r,t.r,1)*1e-9,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function f0(e,t){for(var n=0;n<t.length;++n)if(!FC(e,t[n]))return!1;return!0}function nz(e){switch(e.length){case 1:return rz(e[0]);case 2:return ba(e[0],e[1]);case 3:return BC(e[0],e[1],e[2])}}function rz(e){return{x:e.x,y:e.y,r:e.r}}function ba(e,t){var n=e.x,r=e.y,i=e.r,o=t.x,a=t.y,u=t.r,c=o-n,f=a-r,h=u-i,g=Math.sqrt(c*c+f*f);return{x:(n+o+c/g*h)/2,y:(r+a+f/g*h)/2,r:(g+i+u)/2}}function BC(e,t,n){var r=e.x,i=e.y,o=e.r,a=t.x,u=t.y,c=t.r,f=n.x,h=n.y,g=n.r,d=r-a,_=r-f,y=i-u,w=i-h,m=c-o,b=g-o,C=r*r+i*i-o*o,T=C-a*a-u*u+c*c,x=C-f*f-h*h+g*g,S=_*y-d*w,R=(y*x-w*T)/(S*2)-r,D=(w*m-y*b)/S,$=(_*T-d*x)/(S*2)-i,F=(d*b-_*m)/S,U=D*D+F*F-1,A=2*(o+R*D+$*F),W=R*R+$*$-o*o,k=-(Math.abs(U)>1e-6?(A+Math.sqrt(A*A-4*U*W))/(2*U):W/A);return{x:r+R+D*k,y:i+$+F*k,r:k}}function Gb(e,t,n){var r=e.x-t.x,i,o,a=e.y-t.y,u,c,f=r*r+a*a;f?(o=t.r+n.r,o*=o,c=e.r+n.r,c*=c,o>c?(i=(f+c-o)/(2*f),u=Math.sqrt(Math.max(0,c/f-i*i)),n.x=e.x-i*r-u*a,n.y=e.y-i*a+u*r):(i=(f+o-c)/(2*f),u=Math.sqrt(Math.max(0,o/f-i*i)),n.x=t.x+i*r-u*a,n.y=t.y+i*a+u*r)):(n.x=t.x+n.r,n.y=t.y)}function Vb(e,t){var n=e.r+t.r-1e-6,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function Hb(e){var t=e._,n=e.next._,r=t.r+n.r,i=(t.x*n.r+n.x*t.r)/r,o=(t.y*n.r+n.y*t.r)/r;return i*i+o*o}function Ol(e){this._=e,this.next=null,this.previous=null}function UC(e,t){if(!(o=(e=JW(e)).length))return 0;var n,r,i,o,a,u,c,f,h,g,d;if(n=e[0],n.x=0,n.y=0,!(o>1))return n.r;if(r=e[1],n.x=-r.r,r.x=n.r,r.y=0,!(o>2))return n.r+r.r;Gb(r,n,i=e[2]),n=new Ol(n),r=new Ol(r),i=new Ol(i),n.next=i.previous=r,r.next=n.previous=i,i.next=r.previous=n;e:for(c=3;c<o;++c){Gb(n._,r._,i=e[c]),i=new Ol(i),f=r.next,h=n.previous,g=r._.r,d=n._.r;do if(g<=d){if(Vb(f._,i._)){r=f,n.next=r,r.previous=n,--c;continue e}g+=f._.r,f=f.next}else{if(Vb(h._,i._)){n=h,n.next=r,r.previous=n,--c;continue e}d+=h._.r,h=h.previous}while(f!==h.next);for(i.previous=n,i.next=r,n.next=r.previous=r=i,a=Hb(n);(i=i.next)!==r;)(u=Hb(i))<a&&(n=i,a=u);r=n.next}for(n=[r._],i=r;(i=i.next)!==r;)n.push(i._);for(i=$C(n,t),c=0;c<o;++c)n=e[c],n.x-=i.x,n.y-=i.y;return i.r}function iz(e){return UC(e,m_()),e}function oz(e){return Math.sqrt(e.value)}function sz(){var e=null,t=1,n=1,r=Bi;function i(o){const a=m_();return o.x=t/2,o.y=n/2,e?o.eachBefore(qb(e)).eachAfter(h0(r,.5,a)).eachBefore(Yb(1)):o.eachBefore(qb(oz)).eachAfter(h0(Bi,1,a)).eachAfter(h0(r,o.r/Math.min(t,n),a)).eachBefore(Yb(Math.min(t,n)/(2*o.r))),o}return i.radius=function(o){return arguments.length?(e=Jl(o),i):e},i.size=function(o){return arguments.length?(t=+o[0],n=+o[1],i):[t,n]},i.padding=function(o){return arguments.length?(r=typeof o=="function"?o:qo(+o),i):r},i}function qb(e){return function(t){t.children||(t.r=Math.max(0,+e(t)||0))}}function h0(e,t,n){return function(r){if(i=r.children){var i,o,a=i.length,u=e(r)*t||0,c;if(u)for(o=0;o<a;++o)i[o].r+=u;if(c=UC(i,n),u)for(o=0;o<a;++o)i[o].r-=u;r.r=c+u}}}function Yb(e){return function(t){var n=t.parent;t.r*=e,n&&(t.x=n.x+e*t.x,t.y=n.y+e*t.y)}}function WC(e){e.x0=Math.round(e.x0),e.y0=Math.round(e.y0),e.x1=Math.round(e.x1),e.y1=Math.round(e.y1)}function Cu(e,t,n,r,i){for(var o=e.children,a,u=-1,c=o.length,f=e.value&&(r-t)/e.value;++u<c;)a=o[u],a.y0=n,a.y1=i,a.x0=t,a.x1=t+=a.value*f}function az(){var e=1,t=1,n=0,r=!1;function i(a){var u=a.height+1;return a.x0=a.y0=n,a.x1=e,a.y1=t/u,a.eachBefore(o(t,u)),r&&a.eachBefore(WC),a}function o(a,u){return function(c){c.children&&Cu(c,c.x0,a*(c.depth+1)/u,c.x1,a*(c.depth+2)/u);var f=c.x0,h=c.y0,g=c.x1-n,d=c.y1-n;g<f&&(f=g=(f+g)/2),d<h&&(h=d=(h+d)/2),c.x0=f,c.y0=h,c.x1=g,c.y1=d}}return i.round=function(a){return arguments.length?(r=!!a,i):r},i.size=function(a){return arguments.length?(e=+a[0],t=+a[1],i):[e,t]},i.padding=function(a){return arguments.length?(n=+a,i):n},i}var uz={depth:-1},Kb={},d0={};function lz(e){return e.id}function cz(e){return e.parentId}function fz(){var e=lz,t=cz,n;function r(i){var o=Array.from(i),a=e,u=t,c,f,h,g,d,_,y,w,m=new Map;if(n!=null){const b=o.map((x,S)=>hz(n(x,S,i))),C=b.map(Xb),T=new Set(b).add("");for(const x of C)T.has(x)||(T.add(x),b.push(x),C.push(Xb(x)),o.push(d0));a=(x,S)=>b[S],u=(x,S)=>C[S]}for(h=0,c=o.length;h<c;++h)f=o[h],_=o[h]=new oo(f),(y=a(f,h,i))!=null&&(y+="")&&(w=_.id=y,m.set(w,m.has(w)?Kb:_)),(y=u(f,h,i))!=null&&(y+="")&&(_.parent=y);for(h=0;h<c;++h)if(_=o[h],y=_.parent){if(d=m.get(y),!d)throw new Error("missing: "+y);if(d===Kb)throw new Error("ambiguous: "+y);d.children?d.children.push(_):d.children=[_],_.parent=d}else{if(g)throw new Error("multiple roots");g=_}if(!g)throw new Error("no root");if(n!=null){for(;g.data===d0&&g.children.length===1;)g=g.children[0],--c;for(let b=o.length-1;b>=0&&(_=o[b],_.data===d0);--b)_.data=null}if(g.parent=uz,g.eachBefore(function(b){b.depth=b.parent.depth+1,--c}).eachBefore(OC),g.parent=null,c>0)throw new Error("cycle");return g}return r.id=function(i){return arguments.length?(e=Jl(i),r):e},r.parentId=function(i){return arguments.length?(t=Jl(i),r):t},r.path=function(i){return arguments.length?(n=Jl(i),r):n},r}function hz(e){e=`${e}`;let t=e.length;return Bp(e,t-1)&&!Bp(e,t-2)&&(e=e.slice(0,-1)),e[0]==="/"?e:`/${e}`}function Xb(e){let t=e.length;if(t<2)return"";for(;--t>1&&!Bp(e,t););return e.slice(0,t)}function Bp(e,t){if(e[t]==="/"){let n=0;for(;t>0&&e[--t]==="\\";)++n;if(!(n&1))return!0}return!1}function dz(e,t){return e.parent===t.parent?1:2}function p0(e){var t=e.children;return t?t[0]:e.t}function g0(e){var t=e.children;return t?t[t.length-1]:e.t}function pz(e,t,n){var r=n/(t.i-e.i);t.c-=r,t.s+=n,e.c+=r,t.z+=n,t.m+=n}function gz(e){for(var t=0,n=0,r=e.children,i=r.length,o;--i>=0;)o=r[i],o.z+=t,o.m+=t,t+=o.s+(n+=o.c)}function _z(e,t,n){return e.a.parent===t.parent?e.a:n}function Zl(e,t){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}Zl.prototype=Object.create(oo.prototype);function mz(e){for(var t=new Zl(e,0),n,r=[t],i,o,a,u;n=r.pop();)if(o=n._.children)for(n.children=new Array(u=o.length),a=u-1;a>=0;--a)r.push(i=n.children[a]=new Zl(o[a],a)),i.parent=n;return(t.parent=new Zl(null,0)).children=[t],t}function vz(){var e=dz,t=1,n=1,r=null;function i(f){var h=mz(f);if(h.eachAfter(o),h.parent.m=-h.z,h.eachBefore(a),r)f.eachBefore(c);else{var g=f,d=f,_=f;f.eachBefore(function(C){C.x<g.x&&(g=C),C.x>d.x&&(d=C),C.depth>_.depth&&(_=C)});var y=g===d?1:e(g,d)/2,w=y-g.x,m=t/(d.x+y+w),b=n/(_.depth||1);f.eachBefore(function(C){C.x=(C.x+w)*m,C.y=C.depth*b})}return f}function o(f){var h=f.children,g=f.parent.children,d=f.i?g[f.i-1]:null;if(h){gz(f);var _=(h[0].z+h[h.length-1].z)/2;d?(f.z=d.z+e(f._,d._),f.m=f.z-_):f.z=_}else d&&(f.z=d.z+e(f._,d._));f.parent.A=u(f,d,f.parent.A||g[0])}function a(f){f._.x=f.z+f.parent.m,f.m+=f.parent.m}function u(f,h,g){if(h){for(var d=f,_=f,y=h,w=d.parent.children[0],m=d.m,b=_.m,C=y.m,T=w.m,x;y=g0(y),d=p0(d),y&&d;)w=p0(w),_=g0(_),_.a=f,x=y.z+C-d.z-m+e(y._,d._),x>0&&(pz(_z(y,f,g),f,x),m+=x,b+=x),C+=y.m,m+=d.m,T+=w.m,b+=_.m;y&&!g0(_)&&(_.t=y,_.m+=C-b),d&&!p0(w)&&(w.t=d,w.m+=m-T,g=f)}return g}function c(f){f.x*=t,f.y=f.depth*n}return i.separation=function(f){return arguments.length?(e=f,i):e},i.size=function(f){return arguments.length?(r=!1,t=+f[0],n=+f[1],i):r?null:[t,n]},i.nodeSize=function(f){return arguments.length?(r=!0,t=+f[0],n=+f[1],i):r?[t,n]:null},i}function Uf(e,t,n,r,i){for(var o=e.children,a,u=-1,c=o.length,f=e.value&&(i-n)/e.value;++u<c;)a=o[u],a.x0=t,a.x1=r,a.y0=n,a.y1=n+=a.value*f}var zC=(1+Math.sqrt(5))/2;function GC(e,t,n,r,i,o){for(var a=[],u=t.children,c,f,h=0,g=0,d=u.length,_,y,w=t.value,m,b,C,T,x,S,R;h<d;){_=i-n,y=o-r;do m=u[g++].value;while(!m&&g<d);for(b=C=m,S=Math.max(y/_,_/y)/(w*e),R=m*m*S,x=Math.max(C/R,R/b);g<d;++g){if(m+=f=u[g].value,f<b&&(b=f),f>C&&(C=f),R=m*m*S,T=Math.max(C/R,R/b),T>x){m-=f;break}x=T}a.push(c={value:m,dice:_<y,children:u.slice(h,g)}),c.dice?Cu(c,n,r,i,w?r+=y*m/w:o):Uf(c,n,r,w?n+=_*m/w:i,o),w-=m,h=g}return a}const VC=function e(t){function n(r,i,o,a,u){GC(t,r,i,o,a,u)}return n.ratio=function(r){return e((r=+r)>1?r:1)},n}(zC);function yz(){var e=VC,t=!1,n=1,r=1,i=[0],o=Bi,a=Bi,u=Bi,c=Bi,f=Bi;function h(d){return d.x0=d.y0=0,d.x1=n,d.y1=r,d.eachBefore(g),i=[0],t&&d.eachBefore(WC),d}function g(d){var _=i[d.depth],y=d.x0+_,w=d.y0+_,m=d.x1-_,b=d.y1-_;m<y&&(y=m=(y+m)/2),b<w&&(w=b=(w+b)/2),d.x0=y,d.y0=w,d.x1=m,d.y1=b,d.children&&(_=i[d.depth+1]=o(d)/2,y+=f(d)-_,w+=a(d)-_,m-=u(d)-_,b-=c(d)-_,m<y&&(y=m=(y+m)/2),b<w&&(w=b=(w+b)/2),e(d,y,w,m,b))}return h.round=function(d){return arguments.length?(t=!!d,h):t},h.size=function(d){return arguments.length?(n=+d[0],r=+d[1],h):[n,r]},h.tile=function(d){return arguments.length?(e=LC(d),h):e},h.padding=function(d){return arguments.length?h.paddingInner(d).paddingOuter(d):h.paddingInner()},h.paddingInner=function(d){return arguments.length?(o=typeof d=="function"?d:qo(+d),h):o},h.paddingOuter=function(d){return arguments.length?h.paddingTop(d).paddingRight(d).paddingBottom(d).paddingLeft(d):h.paddingTop()},h.paddingTop=function(d){return arguments.length?(a=typeof d=="function"?d:qo(+d),h):a},h.paddingRight=function(d){return arguments.length?(u=typeof d=="function"?d:qo(+d),h):u},h.paddingBottom=function(d){return arguments.length?(c=typeof d=="function"?d:qo(+d),h):c},h.paddingLeft=function(d){return arguments.length?(f=typeof d=="function"?d:qo(+d),h):f},h}function bz(e,t,n,r,i){var o=e.children,a,u=o.length,c,f=new Array(u+1);for(f[0]=c=a=0;a<u;++a)f[a+1]=c+=o[a].value;h(0,u,e.value,t,n,r,i);function h(g,d,_,y,w,m,b){if(g>=d-1){var C=o[g];C.x0=y,C.y0=w,C.x1=m,C.y1=b;return}for(var T=f[g],x=_/2+T,S=g+1,R=d-1;S<R;){var D=S+R>>>1;f[D]<x?S=D+1:R=D}x-f[S-1]<f[S]-x&&g+1<S&&--S;var $=f[S]-T,F=_-$;if(m-y>b-w){var U=_?(y*F+m*$)/_:m;h(g,S,$,y,w,U,b),h(S,d,F,U,w,m,b)}else{var A=_?(w*F+b*$)/_:b;h(g,S,$,y,w,m,A),h(S,d,F,y,A,m,b)}}}function wz(e,t,n,r,i){(e.depth&1?Uf:Cu)(e,t,n,r,i)}const xz=function e(t){function n(r,i,o,a,u){if((c=r._squarify)&&c.ratio===t)for(var c,f,h,g,d=-1,_,y=c.length,w=r.value;++d<y;){for(f=c[d],h=f.children,g=f.value=0,_=h.length;g<_;++g)f.value+=h[g].value;f.dice?Cu(f,i,o,a,w?o+=(u-o)*f.value/w:u):Uf(f,i,o,w?i+=(a-i)*f.value/w:a,u),w-=f.value}else r._squarify=c=GC(t,r,i,o,a,u),c.ratio=t}return n.ratio=function(r){return e((r=+r)>1?r:1)},n}(zC);function Tz(e){for(var t=-1,n=e.length,r,i=e[n-1],o=0;++t<n;)r=i,i=e[t],o+=r[1]*i[0]-r[0]*i[1];return o/2}function Cz(e){for(var t=-1,n=e.length,r=0,i=0,o,a=e[n-1],u,c=0;++t<n;)o=a,a=e[t],c+=u=o[0]*a[1]-a[0]*o[1],r+=(o[0]+a[0])*u,i+=(o[1]+a[1])*u;return c*=3,[r/c,i/c]}function Ez(e,t,n){return(t[0]-e[0])*(n[1]-e[1])-(t[1]-e[1])*(n[0]-e[0])}function Sz(e,t){return e[0]-t[0]||e[1]-t[1]}function jb(e){const t=e.length,n=[0,1];let r=2,i;for(i=2;i<t;++i){for(;r>1&&Ez(e[n[r-2]],e[n[r-1]],e[i])<=0;)--r;n[r++]=i}return n.slice(0,r)}function Az(e){if((n=e.length)<3)return null;var t,n,r=new Array(n),i=new Array(n);for(t=0;t<n;++t)r[t]=[+e[t][0],+e[t][1],t];for(r.sort(Sz),t=0;t<n;++t)i[t]=[r[t][0],-r[t][1]];var o=jb(r),a=jb(i),u=a[0]===o[0],c=a[a.length-1]===o[o.length-1],f=[];for(t=o.length-1;t>=0;--t)f.push(e[r[o[t]][2]]);for(t=+u;t<a.length-c;++t)f.push(e[r[a[t]][2]]);return f}function Mz(e,t){for(var n=e.length,r=e[n-1],i=t[0],o=t[1],a=r[0],u=r[1],c,f,h=!1,g=0;g<n;++g)r=e[g],c=r[0],f=r[1],f>o!=u>o&&i<(a-c)*(o-f)/(u-f)+c&&(h=!h),a=c,u=f;return h}function Iz(e){for(var t=-1,n=e.length,r=e[n-1],i,o,a=r[0],u=r[1],c=0;++t<n;)i=a,o=u,r=e[t],a=r[0],u=r[1],i-=a,o-=u,c+=Math.hypot(i,o);return c}const Ft=Math.random,Rz=function e(t){function n(r,i){return r=r==null?0:+r,i=i==null?1:+i,arguments.length===1?(i=r,r=0):i-=r,function(){return t()*i+r}}return n.source=e,n}(Ft),Nz=function e(t){function n(r,i){return arguments.length<2&&(i=r,r=0),r=Math.floor(r),i=Math.floor(i)-r,function(){return Math.floor(t()*i+r)}}return n.source=e,n}(Ft),v_=function e(t){function n(r,i){var o,a;return r=r==null?0:+r,i=i==null?1:+i,function(){var u;if(o!=null)u=o,o=null;else do o=t()*2-1,u=t()*2-1,a=o*o+u*u;while(!a||a>1);return r+i*u*Math.sqrt(-2*Math.log(a)/a)}}return n.source=e,n}(Ft),Pz=function e(t){var n=v_.source(t);function r(){var i=n.apply(this,arguments);return function(){return Math.exp(i())}}return r.source=e,r}(Ft),HC=function e(t){function n(r){return(r=+r)<=0?()=>0:function(){for(var i=0,o=r;o>1;--o)i+=t();return i+o*t()}}return n.source=e,n}(Ft),kz=function e(t){var n=HC.source(t);function r(i){if((i=+i)==0)return t;var o=n(i);return function(){return o()/i}}return r.source=e,r}(Ft),Dz=function e(t){function n(r){return function(){return-Math.log1p(-t())/r}}return n.source=e,n}(Ft),Oz=function e(t){function n(r){if((r=+r)<0)throw new RangeError("invalid alpha");return r=1/-r,function(){return Math.pow(1-t(),r)}}return n.source=e,n}(Ft),Lz=function e(t){function n(r){if((r=+r)<0||r>1)throw new RangeError("invalid p");return function(){return Math.floor(t()+r)}}return n.source=e,n}(Ft),qC=function e(t){function n(r){if((r=+r)<0||r>1)throw new RangeError("invalid p");return r===0?()=>1/0:r===1?()=>1:(r=Math.log1p(-r),function(){return 1+Math.floor(Math.log1p(-t())/r)})}return n.source=e,n}(Ft),y_=function e(t){var n=v_.source(t)();function r(i,o){if((i=+i)<0)throw new RangeError("invalid k");if(i===0)return()=>0;if(o=o==null?1:+o,i===1)return()=>-Math.log1p(-t())*o;var a=(i<1?i+1:i)-1/3,u=1/(3*Math.sqrt(a)),c=i<1?()=>Math.pow(t(),1/i):()=>1;return function(){do{do var f=n(),h=1+u*f;while(h<=0);h*=h*h;var g=1-t()}while(g>=1-.0331*f*f*f*f&&Math.log(g)>=.5*f*f+a*(1-h+Math.log(h)));return a*h*c()*o}}return r.source=e,r}(Ft),YC=function e(t){var n=y_.source(t);function r(i,o){var a=n(i),u=n(o);return function(){var c=a();return c===0?0:c/(c+u())}}return r.source=e,r}(Ft),KC=function e(t){var n=qC.source(t),r=YC.source(t);function i(o,a){return o=+o,(a=+a)>=1?()=>o:a<=0?()=>0:function(){for(var u=0,c=o,f=a;c*f>16&&c*(1-f)>16;){var h=Math.floor((c+1)*f),g=r(h,c-h+1)();g<=f?(u+=h,c-=h,f=(f-g)/(1-g)):(c=h-1,f/=g)}for(var d=f<.5,_=d?f:1-f,y=n(_),w=y(),m=0;w<=c;++m)w+=y();return u+(d?m:c-m)}}return i.source=e,i}(Ft),$z=function e(t){function n(r,i,o){var a;return(r=+r)==0?a=u=>-Math.log(u):(r=1/r,a=u=>Math.pow(u,r)),i=i==null?0:+i,o=o==null?1:+o,function(){return i+o*a(-Math.log1p(-t()))}}return n.source=e,n}(Ft),Fz=function e(t){function n(r,i){return r=r==null?0:+r,i=i==null?1:+i,function(){return r+i*Math.tan(Math.PI*t())}}return n.source=e,n}(Ft),Bz=function e(t){function n(r,i){return r=r==null?0:+r,i=i==null?1:+i,function(){var o=t();return r+i*Math.log(o/(1-o))}}return n.source=e,n}(Ft),Uz=function e(t){var n=y_.source(t),r=KC.source(t);function i(o){return function(){for(var a=0,u=o;u>16;){var c=Math.floor(.875*u),f=n(c)();if(f>u)return a+r(c-1,u/f)();a+=c,u-=f}for(var h=-Math.log1p(-t()),g=0;h<=u;++g)h-=Math.log1p(-t());return a+g}}return i.source=e,i}(Ft),Wz=1664525,zz=1013904223,Qb=1/4294967296;function Gz(e=Math.random()){let t=(0<=e&&e<1?e/Qb:Math.abs(e))|0;return()=>(t=Wz*t+zz|0,Qb*(t>>>0))}function Yn(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Kr(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const Up=Symbol("implicit");function b_(){var e=new Va,t=[],n=[],r=Up;function i(o){let a=e.get(o);if(a===void 0){if(r!==Up)return r;e.set(o,a=t.push(o)-1)}return n[a%n.length]}return i.domain=function(o){if(!arguments.length)return t.slice();t=[],e=new Va;for(const a of o)e.has(a)||e.set(a,t.push(a)-1);return i},i.range=function(o){return arguments.length?(n=Array.from(o),i):n.slice()},i.unknown=function(o){return arguments.length?(r=o,i):r},i.copy=function(){return b_(t,n).unknown(r)},Yn.apply(i,arguments),i}function w_(){var e=b_().unknown(void 0),t=e.domain,n=e.range,r=0,i=1,o,a,u=!1,c=0,f=0,h=.5;delete e.unknown;function g(){var d=t().length,_=i<r,y=_?i:r,w=_?r:i;o=(w-y)/Math.max(1,d-c+f*2),u&&(o=Math.floor(o)),y+=(w-y-o*(d-c))*h,a=o*(1-c),u&&(y=Math.round(y),a=Math.round(a));var m=ai(d).map(function(b){return y+o*b});return n(_?m.reverse():m)}return e.domain=function(d){return arguments.length?(t(d),g()):t()},e.range=function(d){return arguments.length?([r,i]=d,r=+r,i=+i,g()):[r,i]},e.rangeRound=function(d){return[r,i]=d,r=+r,i=+i,u=!0,g()},e.bandwidth=function(){return a},e.step=function(){return o},e.round=function(d){return arguments.length?(u=!!d,g()):u},e.padding=function(d){return arguments.length?(c=Math.min(1,f=+d),g()):c},e.paddingInner=function(d){return arguments.length?(c=Math.min(1,d),g()):c},e.paddingOuter=function(d){return arguments.length?(f=+d,g()):f},e.align=function(d){return arguments.length?(h=Math.max(0,Math.min(1,d)),g()):h},e.copy=function(){return w_(t(),[r,i]).round(u).paddingInner(c).paddingOuter(f).align(h)},Yn.apply(g(),arguments)}function XC(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return XC(t())},e}function Vz(){return XC(w_.apply(null,arguments).paddingInner(1))}function Hz(e){return function(){return e}}function tf(e){return+e}var Jb=[0,1];function rn(e){return e}function Wp(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:Hz(isNaN(t)?NaN:.5)}function qz(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function Yz(e,t,n){var r=e[0],i=e[1],o=t[0],a=t[1];return i<r?(r=Wp(i,r),o=n(a,o)):(r=Wp(r,i),o=n(o,a)),function(u){return o(r(u))}}function Kz(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),o=new Array(r),a=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++a<r;)i[a]=Wp(e[a],e[a+1]),o[a]=n(t[a],t[a+1]);return function(u){var c=co(e,u,1,r)-1;return o[c](i[c](u))}}function Eu(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Wf(){var e=Jb,t=Jb,n=wi,r,i,o,a=rn,u,c,f;function h(){var d=Math.min(e.length,t.length);return a!==rn&&(a=qz(e[0],e[d-1])),u=d>2?Kz:Yz,c=f=null,g}function g(d){return d==null||isNaN(d=+d)?o:(c||(c=u(e.map(r),t,n)))(r(a(d)))}return g.invert=function(d){return a(i((f||(f=u(t,e.map(r),Gn)))(d)))},g.domain=function(d){return arguments.length?(e=Array.from(d,tf),h()):e.slice()},g.range=function(d){return arguments.length?(t=Array.from(d),h()):t.slice()},g.rangeRound=function(d){return t=Array.from(d),n=Mf,h()},g.clamp=function(d){return arguments.length?(a=d?!0:rn,h()):a!==rn},g.interpolate=function(d){return arguments.length?(n=d,h()):n},g.unknown=function(d){return arguments.length?(o=d,g):o},function(d,_){return r=d,i=_,h()}}function x_(){return Wf()(rn,rn)}function jC(e,t,n,r){var i=yc(e,t,n),o;switch(r=ms(r??",f"),r.type){case"s":{var a=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(o=KT(i,a))&&(r.precision=o),Jg(r,a)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(o=XT(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=o-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(o=YT(i))&&(r.precision=o-(r.type==="%")*2);break}}return $f(r)}function xi(e){var t=e.domain;return e.ticks=function(n){var r=t();return Ji(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var i=t();return jC(i[0],i[i.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),i=0,o=r.length-1,a=r[i],u=r[o],c,f,h=10;for(u<a&&(f=a,a=u,u=f,f=i,i=o,o=f);h-- >0;){if(f=Zi(a,u,n),f===c)return r[i]=a,r[o]=u,t(r);if(f>0)a=Math.floor(a/f)*f,u=Math.ceil(u/f)*f;else if(f<0)a=Math.ceil(a*f)/f,u=Math.floor(u*f)/f;else break;c=f}return e},e}function QC(){var e=x_();return e.copy=function(){return Eu(e,QC())},Yn.apply(e,arguments),xi(e)}function JC(e){var t;function n(r){return r==null||isNaN(r=+r)?t:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(e=Array.from(r,tf),n):e.slice()},n.unknown=function(r){return arguments.length?(t=r,n):t},n.copy=function(){return JC(e).unknown(t)},e=arguments.length?Array.from(e,tf):[0,1],xi(n)}function ZC(e,t){e=e.slice();var n=0,r=e.length-1,i=e[n],o=e[r],a;return o<i&&(a=n,n=r,r=a,a=i,i=o,o=a),e[n]=t.floor(i),e[r]=t.ceil(o),e}function Zb(e){return Math.log(e)}function e2(e){return Math.exp(e)}function Xz(e){return-Math.log(-e)}function jz(e){return-Math.exp(-e)}function Qz(e){return isFinite(e)?+("1e"+e):e<0?0:e}function Jz(e){return e===10?Qz:e===Math.E?Math.exp:t=>Math.pow(e,t)}function Zz(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function t2(e){return(t,n)=>-e(-t,n)}function T_(e){const t=e(Zb,e2),n=t.domain;let r=10,i,o;function a(){return i=Zz(r),o=Jz(r),n()[0]<0?(i=t2(i),o=t2(o),e(Xz,jz)):e(Zb,e2),t}return t.base=function(u){return arguments.length?(r=+u,a()):r},t.domain=function(u){return arguments.length?(n(u),a()):n()},t.ticks=u=>{const c=n();let f=c[0],h=c[c.length-1];const g=h<f;g&&([f,h]=[h,f]);let d=i(f),_=i(h),y,w;const m=u==null?10:+u;let b=[];if(!(r%1)&&_-d<m){if(d=Math.floor(d),_=Math.ceil(_),f>0){for(;d<=_;++d)for(y=1;y<r;++y)if(w=d<0?y/o(-d):y*o(d),!(w<f)){if(w>h)break;b.push(w)}}else for(;d<=_;++d)for(y=r-1;y>=1;--y)if(w=d>0?y/o(-d):y*o(d),!(w<f)){if(w>h)break;b.push(w)}b.length*2<m&&(b=Ji(f,h,m))}else b=Ji(d,_,Math.min(_-d,m)).map(o);return g?b.reverse():b},t.tickFormat=(u,c)=>{if(u==null&&(u=10),c==null&&(c=r===10?"s":","),typeof c!="function"&&(!(r%1)&&(c=ms(c)).precision==null&&(c.trim=!0),c=$f(c)),u===1/0)return c;const f=Math.max(1,r*u/t.ticks().length);return h=>{let g=h/o(Math.round(i(h)));return g*r<r-.5&&(g*=r),g<=f?c(h):""}},t.nice=()=>n(ZC(n(),{floor:u=>o(Math.floor(i(u))),ceil:u=>o(Math.ceil(i(u)))})),t}function eE(){const e=T_(Wf()).domain([1,10]);return e.copy=()=>Eu(e,eE()).base(e.base()),Yn.apply(e,arguments),e}function n2(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function r2(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function C_(e){var t=1,n=e(n2(t),r2(t));return n.constant=function(r){return arguments.length?e(n2(t=+r),r2(t)):t},xi(n)}function tE(){var e=C_(Wf());return e.copy=function(){return Eu(e,tE()).constant(e.constant())},Yn.apply(e,arguments)}function i2(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function eG(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function tG(e){return e<0?-e*e:e*e}function E_(e){var t=e(rn,rn),n=1;function r(){return n===1?e(rn,rn):n===.5?e(eG,tG):e(i2(n),i2(1/n))}return t.exponent=function(i){return arguments.length?(n=+i,r()):n},xi(t)}function S_(){var e=E_(Wf());return e.copy=function(){return Eu(e,S_()).exponent(e.exponent())},Yn.apply(e,arguments),e}function nG(){return S_.apply(null,arguments).exponent(.5)}function o2(e){return Math.sign(e)*e*e}function rG(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function nE(){var e=x_(),t=[0,1],n=!1,r;function i(o){var a=rG(e(o));return isNaN(a)?r:n?Math.round(a):a}return i.invert=function(o){return e.invert(o2(o))},i.domain=function(o){return arguments.length?(e.domain(o),i):e.domain()},i.range=function(o){return arguments.length?(e.range((t=Array.from(o,tf)).map(o2)),i):t.slice()},i.rangeRound=function(o){return i.range(o).round(!0)},i.round=function(o){return arguments.length?(n=!!o,i):n},i.clamp=function(o){return arguments.length?(e.clamp(o),i):e.clamp()},i.unknown=function(o){return arguments.length?(r=o,i):r},i.copy=function(){return nE(e.domain(),t).round(n).clamp(e.clamp()).unknown(r)},Yn.apply(i,arguments),xi(i)}function rE(){var e=[],t=[],n=[],r;function i(){var a=0,u=Math.max(1,t.length);for(n=new Array(u-1);++a<u;)n[a-1]=Nx(e,a/u);return o}function o(a){return a==null||isNaN(a=+a)?r:t[co(n,a)]}return o.invertExtent=function(a){var u=t.indexOf(a);return u<0?[NaN,NaN]:[u>0?n[u-1]:e[0],u<n.length?n[u]:e[e.length-1]]},o.domain=function(a){if(!arguments.length)return e.slice();e=[];for(let u of a)u!=null&&!isNaN(u=+u)&&e.push(u);return e.sort(dt),i()},o.range=function(a){return arguments.length?(t=Array.from(a),i()):t.slice()},o.unknown=function(a){return arguments.length?(r=a,o):r},o.quantiles=function(){return n.slice()},o.copy=function(){return rE().domain(e).range(t).unknown(r)},Yn.apply(o,arguments)}function iE(){var e=0,t=1,n=1,r=[.5],i=[0,1],o;function a(c){return c!=null&&c<=c?i[co(r,c,0,n)]:o}function u(){var c=-1;for(r=new Array(n);++c<n;)r[c]=((c+1)*t-(c-n)*e)/(n+1);return a}return a.domain=function(c){return arguments.length?([e,t]=c,e=+e,t=+t,u()):[e,t]},a.range=function(c){return arguments.length?(n=(i=Array.from(c)).length-1,u()):i.slice()},a.invertExtent=function(c){var f=i.indexOf(c);return f<0?[NaN,NaN]:f<1?[e,r[0]]:f>=n?[r[n-1],t]:[r[f-1],r[f]]},a.unknown=function(c){return arguments.length&&(o=c),a},a.thresholds=function(){return r.slice()},a.copy=function(){return iE().domain([e,t]).range(i).unknown(o)},Yn.apply(xi(a),arguments)}function oE(){var e=[.5],t=[0,1],n,r=1;function i(o){return o!=null&&o<=o?t[co(e,o,0,r)]:n}return i.domain=function(o){return arguments.length?(e=Array.from(o),r=Math.min(e.length,t.length-1),i):e.slice()},i.range=function(o){return arguments.length?(t=Array.from(o),r=Math.min(e.length,t.length-1),i):t.slice()},i.invertExtent=function(o){var a=t.indexOf(o);return[e[a-1],e[a]]},i.unknown=function(o){return arguments.length?(n=o,i):n},i.copy=function(){return oE().domain(e).range(t).unknown(n)},Yn.apply(i,arguments)}const _0=new Date,m0=new Date;function wt(e,t,n,r){function i(o){return e(o=arguments.length===0?new Date:new Date(+o)),o}return i.floor=o=>(e(o=new Date(+o)),o),i.ceil=o=>(e(o=new Date(o-1)),t(o,1),e(o),o),i.round=o=>{const a=i(o),u=i.ceil(o);return o-a<u-o?a:u},i.offset=(o,a)=>(t(o=new Date(+o),a==null?1:Math.floor(a)),o),i.range=(o,a,u)=>{const c=[];if(o=i.ceil(o),u=u==null?1:Math.floor(u),!(o<a)||!(u>0))return c;let f;do c.push(f=new Date(+o)),t(o,u),e(o);while(f<o&&o<a);return c},i.filter=o=>wt(a=>{if(a>=a)for(;e(a),!o(a);)a.setTime(a-1)},(a,u)=>{if(a>=a)if(u<0)for(;++u<=0;)for(;t(a,-1),!o(a););else for(;--u>=0;)for(;t(a,1),!o(a););}),n&&(i.count=(o,a)=>(_0.setTime(+o),m0.setTime(+a),e(_0),e(m0),Math.floor(n(_0,m0))),i.every=o=>(o=Math.floor(o),!isFinite(o)||!(o>0)?null:o>1?i.filter(r?a=>r(a)%o===0:a=>i.count(0,a)%o===0):i)),i}const ws=wt(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);ws.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?wt(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):ws);const s2=ws.range,Br=1e3,qn=Br*60,Ur=qn*60,qr=Ur*24,A_=qr*7,a2=qr*30,v0=qr*365,Wr=wt(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Br)},(e,t)=>(t-e)/Br,e=>e.getUTCSeconds()),u2=Wr.range,zf=wt(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Br)},(e,t)=>{e.setTime(+e+t*qn)},(e,t)=>(t-e)/qn,e=>e.getMinutes()),iG=zf.range,Gf=wt(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*qn)},(e,t)=>(t-e)/qn,e=>e.getUTCMinutes()),oG=Gf.range,Vf=wt(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Br-e.getMinutes()*qn)},(e,t)=>{e.setTime(+e+t*Ur)},(e,t)=>(t-e)/Ur,e=>e.getHours()),sG=Vf.range,Hf=wt(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Ur)},(e,t)=>(t-e)/Ur,e=>e.getUTCHours()),aG=Hf.range,ks=wt(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*qn)/qr,e=>e.getDate()-1),uG=ks.range,Su=wt(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/qr,e=>e.getUTCDate()-1),lG=Su.range,M_=wt(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/qr,e=>Math.floor(e/qr)),cG=M_.range;function _o(e){return wt(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*qn)/A_)}const xs=_o(0),su=_o(1),sE=_o(2),aE=_o(3),so=_o(4),uE=_o(5),lE=_o(6),l2=xs.range,fG=su.range,hG=sE.range,dG=aE.range,pG=so.range,gG=uE.range,_G=lE.range;function mo(e){return wt(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/A_)}const Ts=mo(0),au=mo(1),cE=mo(2),fE=mo(3),ao=mo(4),hE=mo(5),dE=mo(6),c2=Ts.range,mG=au.range,vG=cE.range,yG=fE.range,bG=ao.range,wG=hE.range,xG=dE.range,qf=wt(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth()),TG=qf.range,Yf=wt(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth()),CG=Yf.range,vr=wt(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());vr.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:wt(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});const EG=vr.range,yr=wt(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());yr.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:wt(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});const SG=yr.range;function pE(e,t,n,r,i,o){const a=[[Wr,1,Br],[Wr,5,5*Br],[Wr,15,15*Br],[Wr,30,30*Br],[o,1,qn],[o,5,5*qn],[o,15,15*qn],[o,30,30*qn],[i,1,Ur],[i,3,3*Ur],[i,6,6*Ur],[i,12,12*Ur],[r,1,qr],[r,2,2*qr],[n,1,A_],[t,1,a2],[t,3,3*a2],[e,1,v0]];function u(f,h,g){const d=h<f;d&&([f,h]=[h,f]);const _=g&&typeof g.range=="function"?g:c(f,h,g),y=_?_.range(f,+h+1):[];return d?y.reverse():y}function c(f,h,g){const d=Math.abs(h-f)/g,_=mf(([,,m])=>m).right(a,d);if(_===a.length)return e.every(yc(f/v0,h/v0,g));if(_===0)return ws.every(Math.max(yc(f,h,g),1));const[y,w]=a[d/a[_-1][2]<a[_][2]/d?_-1:_];return y.every(w)}return[u,c]}const[gE,_E]=pE(yr,Yf,Ts,M_,Hf,Gf),[mE,vE]=pE(vr,qf,xs,ks,Vf,zf);function y0(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function b0(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function sa(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function yE(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,o=e.days,a=e.shortDays,u=e.months,c=e.shortMonths,f=aa(i),h=ua(i),g=aa(o),d=ua(o),_=aa(a),y=ua(a),w=aa(u),m=ua(u),b=aa(c),C=ua(c),T={a:q,A:Y,b:j,B,c:null,d:_2,e:_2,f:XG,g:oV,G:aV,H:qG,I:YG,j:KG,L:bE,m:jG,M:QG,p:G,q:X,Q:y2,s:b2,S:JG,u:ZG,U:eV,V:tV,w:nV,W:rV,x:null,X:null,y:iV,Y:sV,Z:uV,"%":v2},x={a:J,A:ie,b:oe,B:pe,c:null,d:m2,e:m2,f:hV,g:xV,G:CV,H:lV,I:cV,j:fV,L:xE,m:dV,M:pV,p:le,q:_e,Q:y2,s:b2,S:gV,u:_V,U:mV,V:vV,w:yV,W:bV,x:null,X:null,y:wV,Y:TV,Z:EV,"%":v2},S={a:U,A,b:W,B:k,c:N,d:p2,e:p2,f:zG,g:d2,G:h2,H:g2,I:g2,j:FG,L:WG,m:$G,M:BG,p:F,q:LG,Q:VG,s:HG,S:UG,u:NG,U:PG,V:kG,w:RG,W:DG,x:P,X:L,y:d2,Y:h2,Z:OG,"%":GG};T.x=R(n,T),T.X=R(r,T),T.c=R(t,T),x.x=R(n,x),x.X=R(r,x),x.c=R(t,x);function R(ne,se){return function(ce){var te=[],ge=-1,ye=0,Me=ne.length,Ie,ue,be;for(ce instanceof Date||(ce=new Date(+ce));++ge<Me;)ne.charCodeAt(ge)===37&&(te.push(ne.slice(ye,ge)),(ue=f2[Ie=ne.charAt(++ge)])!=null?Ie=ne.charAt(++ge):ue=Ie==="e"?" ":"0",(be=se[Ie])&&(Ie=be(ce,ue)),te.push(Ie),ye=ge+1);return te.push(ne.slice(ye,ge)),te.join("")}}function D(ne,se){return function(ce){var te=sa(1900,void 0,1),ge=$(te,ne,ce+="",0),ye,Me;if(ge!=ce.length)return null;if("Q"in te)return new Date(te.Q);if("s"in te)return new Date(te.s*1e3+("L"in te?te.L:0));if(se&&!("Z"in te)&&(te.Z=0),"p"in te&&(te.H=te.H%12+te.p*12),te.m===void 0&&(te.m="q"in te?te.q:0),"V"in te){if(te.V<1||te.V>53)return null;"w"in te||(te.w=1),"Z"in te?(ye=b0(sa(te.y,0,1)),Me=ye.getUTCDay(),ye=Me>4||Me===0?au.ceil(ye):au(ye),ye=Su.offset(ye,(te.V-1)*7),te.y=ye.getUTCFullYear(),te.m=ye.getUTCMonth(),te.d=ye.getUTCDate()+(te.w+6)%7):(ye=y0(sa(te.y,0,1)),Me=ye.getDay(),ye=Me>4||Me===0?su.ceil(ye):su(ye),ye=ks.offset(ye,(te.V-1)*7),te.y=ye.getFullYear(),te.m=ye.getMonth(),te.d=ye.getDate()+(te.w+6)%7)}else("W"in te||"U"in te)&&("w"in te||(te.w="u"in te?te.u%7:"W"in te?1:0),Me="Z"in te?b0(sa(te.y,0,1)).getUTCDay():y0(sa(te.y,0,1)).getDay(),te.m=0,te.d="W"in te?(te.w+6)%7+te.W*7-(Me+5)%7:te.w+te.U*7-(Me+6)%7);return"Z"in te?(te.H+=te.Z/100|0,te.M+=te.Z%100,b0(te)):y0(te)}}function $(ne,se,ce,te){for(var ge=0,ye=se.length,Me=ce.length,Ie,ue;ge<ye;){if(te>=Me)return-1;if(Ie=se.charCodeAt(ge++),Ie===37){if(Ie=se.charAt(ge++),ue=S[Ie in f2?se.charAt(ge++):Ie],!ue||(te=ue(ne,ce,te))<0)return-1}else if(Ie!=ce.charCodeAt(te++))return-1}return te}function F(ne,se,ce){var te=f.exec(se.slice(ce));return te?(ne.p=h.get(te[0].toLowerCase()),ce+te[0].length):-1}function U(ne,se,ce){var te=_.exec(se.slice(ce));return te?(ne.w=y.get(te[0].toLowerCase()),ce+te[0].length):-1}function A(ne,se,ce){var te=g.exec(se.slice(ce));return te?(ne.w=d.get(te[0].toLowerCase()),ce+te[0].length):-1}function W(ne,se,ce){var te=b.exec(se.slice(ce));return te?(ne.m=C.get(te[0].toLowerCase()),ce+te[0].length):-1}function k(ne,se,ce){var te=w.exec(se.slice(ce));return te?(ne.m=m.get(te[0].toLowerCase()),ce+te[0].length):-1}function N(ne,se,ce){return $(ne,t,se,ce)}function P(ne,se,ce){return $(ne,n,se,ce)}function L(ne,se,ce){return $(ne,r,se,ce)}function q(ne){return a[ne.getDay()]}function Y(ne){return o[ne.getDay()]}function j(ne){return c[ne.getMonth()]}function B(ne){return u[ne.getMonth()]}function G(ne){return i[+(ne.getHours()>=12)]}function X(ne){return 1+~~(ne.getMonth()/3)}function J(ne){return a[ne.getUTCDay()]}function ie(ne){return o[ne.getUTCDay()]}function oe(ne){return c[ne.getUTCMonth()]}function pe(ne){return u[ne.getUTCMonth()]}function le(ne){return i[+(ne.getUTCHours()>=12)]}function _e(ne){return 1+~~(ne.getUTCMonth()/3)}return{format:function(ne){var se=R(ne+="",T);return se.toString=function(){return ne},se},parse:function(ne){var se=D(ne+="",!1);return se.toString=function(){return ne},se},utcFormat:function(ne){var se=R(ne+="",x);return se.toString=function(){return ne},se},utcParse:function(ne){var se=D(ne+="",!0);return se.toString=function(){return ne},se}}}var f2={"-":"",_:" ",0:"0"},Ot=/^\s*\d+/,AG=/^%/,MG=/[\\^$*+?|[\]().{}]/g;function qe(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",o=i.length;return r+(o<n?new Array(n-o+1).join(t)+i:i)}function IG(e){return e.replace(MG,"\\$&")}function aa(e){return new RegExp("^(?:"+e.map(IG).join("|")+")","i")}function ua(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function RG(e,t,n){var r=Ot.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function NG(e,t,n){var r=Ot.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function PG(e,t,n){var r=Ot.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function kG(e,t,n){var r=Ot.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function DG(e,t,n){var r=Ot.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function h2(e,t,n){var r=Ot.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function d2(e,t,n){var r=Ot.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function OG(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function LG(e,t,n){var r=Ot.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function $G(e,t,n){var r=Ot.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function p2(e,t,n){var r=Ot.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function FG(e,t,n){var r=Ot.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function g2(e,t,n){var r=Ot.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function BG(e,t,n){var r=Ot.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function UG(e,t,n){var r=Ot.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function WG(e,t,n){var r=Ot.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function zG(e,t,n){var r=Ot.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function GG(e,t,n){var r=AG.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function VG(e,t,n){var r=Ot.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function HG(e,t,n){var r=Ot.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function _2(e,t){return qe(e.getDate(),t,2)}function qG(e,t){return qe(e.getHours(),t,2)}function YG(e,t){return qe(e.getHours()%12||12,t,2)}function KG(e,t){return qe(1+ks.count(vr(e),e),t,3)}function bE(e,t){return qe(e.getMilliseconds(),t,3)}function XG(e,t){return bE(e,t)+"000"}function jG(e,t){return qe(e.getMonth()+1,t,2)}function QG(e,t){return qe(e.getMinutes(),t,2)}function JG(e,t){return qe(e.getSeconds(),t,2)}function ZG(e){var t=e.getDay();return t===0?7:t}function eV(e,t){return qe(xs.count(vr(e)-1,e),t,2)}function wE(e){var t=e.getDay();return t>=4||t===0?so(e):so.ceil(e)}function tV(e,t){return e=wE(e),qe(so.count(vr(e),e)+(vr(e).getDay()===4),t,2)}function nV(e){return e.getDay()}function rV(e,t){return qe(su.count(vr(e)-1,e),t,2)}function iV(e,t){return qe(e.getFullYear()%100,t,2)}function oV(e,t){return e=wE(e),qe(e.getFullYear()%100,t,2)}function sV(e,t){return qe(e.getFullYear()%1e4,t,4)}function aV(e,t){var n=e.getDay();return e=n>=4||n===0?so(e):so.ceil(e),qe(e.getFullYear()%1e4,t,4)}function uV(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+qe(t/60|0,"0",2)+qe(t%60,"0",2)}function m2(e,t){return qe(e.getUTCDate(),t,2)}function lV(e,t){return qe(e.getUTCHours(),t,2)}function cV(e,t){return qe(e.getUTCHours()%12||12,t,2)}function fV(e,t){return qe(1+Su.count(yr(e),e),t,3)}function xE(e,t){return qe(e.getUTCMilliseconds(),t,3)}function hV(e,t){return xE(e,t)+"000"}function dV(e,t){return qe(e.getUTCMonth()+1,t,2)}function pV(e,t){return qe(e.getUTCMinutes(),t,2)}function gV(e,t){return qe(e.getUTCSeconds(),t,2)}function _V(e){var t=e.getUTCDay();return t===0?7:t}function mV(e,t){return qe(Ts.count(yr(e)-1,e),t,2)}function TE(e){var t=e.getUTCDay();return t>=4||t===0?ao(e):ao.ceil(e)}function vV(e,t){return e=TE(e),qe(ao.count(yr(e),e)+(yr(e).getUTCDay()===4),t,2)}function yV(e){return e.getUTCDay()}function bV(e,t){return qe(au.count(yr(e)-1,e),t,2)}function wV(e,t){return qe(e.getUTCFullYear()%100,t,2)}function xV(e,t){return e=TE(e),qe(e.getUTCFullYear()%100,t,2)}function TV(e,t){return qe(e.getUTCFullYear()%1e4,t,4)}function CV(e,t){var n=e.getUTCDay();return e=n>=4||n===0?ao(e):ao.ceil(e),qe(e.getUTCFullYear()%1e4,t,4)}function EV(){return"+0000"}function v2(){return"%"}function y2(e){return+e}function b2(e){return Math.floor(+e/1e3)}var Vo,I_,CE,Kf,R_;EE({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function EE(e){return Vo=yE(e),I_=Vo.format,CE=Vo.parse,Kf=Vo.utcFormat,R_=Vo.utcParse,Vo}var SE="%Y-%m-%dT%H:%M:%S.%LZ";function SV(e){return e.toISOString()}var AV=Date.prototype.toISOString?SV:Kf(SE);const MV=AV;function IV(e){var t=new Date(e);return isNaN(t)?null:t}var RV=+new Date("2000-01-01T00:00:00.000Z")?IV:R_(SE);const NV=RV;function PV(e){return new Date(e)}function kV(e){return e instanceof Date?+e:+new Date(+e)}function N_(e,t,n,r,i,o,a,u,c,f){var h=x_(),g=h.invert,d=h.domain,_=f(".%L"),y=f(":%S"),w=f("%I:%M"),m=f("%I %p"),b=f("%a %d"),C=f("%b %d"),T=f("%B"),x=f("%Y");function S(R){return(c(R)<R?_:u(R)<R?y:a(R)<R?w:o(R)<R?m:r(R)<R?i(R)<R?b:C:n(R)<R?T:x)(R)}return h.invert=function(R){return new Date(g(R))},h.domain=function(R){return arguments.length?d(Array.from(R,kV)):d().map(PV)},h.ticks=function(R){var D=d();return e(D[0],D[D.length-1],R??10)},h.tickFormat=function(R,D){return D==null?S:f(D)},h.nice=function(R){var D=d();return(!R||typeof R.range!="function")&&(R=t(D[0],D[D.length-1],R??10)),R?d(ZC(D,R)):h},h.copy=function(){return Eu(h,N_(e,t,n,r,i,o,a,u,c,f))},h}function DV(){return Yn.apply(N_(mE,vE,vr,qf,xs,ks,Vf,zf,Wr,I_).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function OV(){return Yn.apply(N_(gE,_E,yr,Yf,Ts,Su,Hf,Gf,Wr,Kf).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Xf(){var e=0,t=1,n,r,i,o,a=rn,u=!1,c;function f(g){return g==null||isNaN(g=+g)?c:a(i===0?.5:(g=(o(g)-n)*i,u?Math.max(0,Math.min(1,g)):g))}f.domain=function(g){return arguments.length?([e,t]=g,n=o(e=+e),r=o(t=+t),i=n===r?0:1/(r-n),f):[e,t]},f.clamp=function(g){return arguments.length?(u=!!g,f):u},f.interpolator=function(g){return arguments.length?(a=g,f):a};function h(g){return function(d){var _,y;return arguments.length?([_,y]=d,a=g(_,y),f):[a(0),a(1)]}}return f.range=h(wi),f.rangeRound=h(Mf),f.unknown=function(g){return arguments.length?(c=g,f):c},function(g){return o=g,n=g(e),r=g(t),i=n===r?0:1/(r-n),f}}function Ti(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function AE(){var e=xi(Xf()(rn));return e.copy=function(){return Ti(e,AE())},Kr.apply(e,arguments)}function ME(){var e=T_(Xf()).domain([1,10]);return e.copy=function(){return Ti(e,ME()).base(e.base())},Kr.apply(e,arguments)}function IE(){var e=C_(Xf());return e.copy=function(){return Ti(e,IE()).constant(e.constant())},Kr.apply(e,arguments)}function P_(){var e=E_(Xf());return e.copy=function(){return Ti(e,P_()).exponent(e.exponent())},Kr.apply(e,arguments)}function LV(){return P_.apply(null,arguments).exponent(.5)}function RE(){var e=[],t=rn;function n(r){if(r!=null&&!isNaN(r=+r))return t((co(e,r,1)-1)/(e.length-1))}return n.domain=function(r){if(!arguments.length)return e.slice();e=[];for(let i of r)i!=null&&!isNaN(i=+i)&&e.push(i);return e.sort(dt),n},n.interpolator=function(r){return arguments.length?(t=r,n):t},n.range=function(){return e.map((r,i)=>t(i/(e.length-1)))},n.quantiles=function(r){return Array.from({length:r+1},(i,o)=>qa(e,o/r))},n.copy=function(){return RE(t).domain(e)},Kr.apply(n,arguments)}function jf(){var e=0,t=.5,n=1,r=1,i,o,a,u,c,f=rn,h,g=!1,d;function _(w){return isNaN(w=+w)?d:(w=.5+((w=+h(w))-o)*(r*w<r*o?u:c),f(g?Math.max(0,Math.min(1,w)):w))}_.domain=function(w){return arguments.length?([e,t,n]=w,i=h(e=+e),o=h(t=+t),a=h(n=+n),u=i===o?0:.5/(o-i),c=o===a?0:.5/(a-o),r=o<i?-1:1,_):[e,t,n]},_.clamp=function(w){return arguments.length?(g=!!w,_):g},_.interpolator=function(w){return arguments.length?(f=w,_):f};function y(w){return function(m){var b,C,T;return arguments.length?([b,C,T]=m,f=TT(w,[b,C,T]),_):[f(0),f(.5),f(1)]}}return _.range=y(wi),_.rangeRound=y(Mf),_.unknown=function(w){return arguments.length?(d=w,_):d},function(w){return h=w,i=w(e),o=w(t),a=w(n),u=i===o?0:.5/(o-i),c=o===a?0:.5/(a-o),r=o<i?-1:1,_}}function NE(){var e=xi(jf()(rn));return e.copy=function(){return Ti(e,NE())},Kr.apply(e,arguments)}function PE(){var e=T_(jf()).domain([.1,1,10]);return e.copy=function(){return Ti(e,PE()).base(e.base())},Kr.apply(e,arguments)}function kE(){var e=C_(jf());return e.copy=function(){return Ti(e,kE()).constant(e.constant())},Kr.apply(e,arguments)}function k_(){var e=E_(jf());return e.copy=function(){return Ti(e,k_()).exponent(e.exponent())},Kr.apply(e,arguments)}function $V(){return k_.apply(null,arguments).exponent(.5)}function De(e){for(var t=e.length/6|0,n=new Array(t),r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}const FV=De("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),BV=De("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),UV=De("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),WV=De("4269d0efb118ff725c6cc5b03ca951ff8ab7a463f297bbf59c6b4e9498a0"),zV=De("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),GV=De("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),VV=De("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),HV=De("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),qV=De("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),YV=De("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),KV=De("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab"),tt=e=>cT(e[e.length-1]);var DE=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(De);const XV=tt(DE);var OE=new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(De);const jV=tt(OE);var LE=new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(De);const QV=tt(LE);var $E=new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(De);const JV=tt($E);var FE=new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(De);const ZV=tt(FE);var BE=new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(De);const eH=tt(BE);var UE=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(De);const tH=tt(UE);var WE=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(De);const nH=tt(WE);var zE=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(De);const rH=tt(zE);var GE=new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(De);const iH=tt(GE);var VE=new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(De);const oH=tt(VE);var HE=new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(De);const sH=tt(HE);var qE=new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(De);const aH=tt(qE);var YE=new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(De);const uH=tt(YE);var KE=new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(De);const lH=tt(KE);var XE=new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(De);const cH=tt(XE);var jE=new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(De);const fH=tt(jE);var QE=new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(De);const hH=tt(QE);var JE=new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(De);const dH=tt(JE);var ZE=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(De);const pH=tt(ZE);var e3=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(De);const gH=tt(e3);var t3=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(De);const _H=tt(t3);var n3=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(De);const mH=tt(n3);var r3=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(De);const vH=tt(r3);var i3=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(De);const yH=tt(i3);var o3=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(De);const bH=tt(o3);var s3=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(De);const wH=tt(s3);function xH(e){return e=Math.max(0,Math.min(1,e)),"rgb("+Math.max(0,Math.min(255,Math.round(-4.54-e*(35.34-e*(2381.73-e*(6402.7-e*(7024.72-e*2710.57)))))))+", "+Math.max(0,Math.min(255,Math.round(32.49+e*(170.73+e*(52.82-e*(131.46-e*(176.58-e*67.37)))))))+", "+Math.max(0,Math.min(255,Math.round(81.24+e*(442.36-e*(2482.43-e*(6167.24-e*(6614.94-e*2475.67)))))))+")"}const TH=If(sr(300,.5,0),sr(-240,.5,1));var CH=If(sr(-100,.75,.35),sr(80,1.5,.8)),EH=If(sr(260,.75,.35),sr(80,1.5,.8)),Ll=sr();function SH(e){(e<0||e>1)&&(e-=Math.floor(e));var t=Math.abs(e-.5);return Ll.h=360*e-100,Ll.s=1.5-1.5*t,Ll.l=.8-.9*t,Ll+""}var $l=ds(),AH=Math.PI/3,MH=Math.PI*2/3;function IH(e){var t;return e=(.5-e)*Math.PI,$l.r=255*(t=Math.sin(e))*t,$l.g=255*(t=Math.sin(e+AH))*t,$l.b=255*(t=Math.sin(e+MH))*t,$l+""}function RH(e){return e=Math.max(0,Math.min(1,e)),"rgb("+Math.max(0,Math.min(255,Math.round(34.61+e*(1172.33-e*(10793.56-e*(33300.12-e*(38394.49-e*14825.05)))))))+", "+Math.max(0,Math.min(255,Math.round(23.31+e*(557.33+e*(1225.33-e*(3574.96-e*(1073.77+e*707.56)))))))+", "+Math.max(0,Math.min(255,Math.round(27.2+e*(3211.1-e*(15327.97-e*(27814-e*(22569.18-e*6838.66)))))))+")"}function Qf(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}const NH=Qf(De("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725"));var PH=Qf(De("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),kH=Qf(De("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),DH=Qf(De("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));function ke(e){return function(){return e}}const w2=Math.abs,Vt=Math.atan2,Or=Math.cos,OH=Math.max,os=Math.min,vn=Math.sin,at=Math.sqrt,Ht=1e-12,mi=Math.PI,nf=mi/2,hi=2*mi;function LH(e){return e>1?0:e<-1?mi:Math.acos(e)}function x2(e){return e>=1?nf:e<=-1?-nf:Math.asin(e)}function Au(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new vu(t)}function $H(e){return e.innerRadius}function FH(e){return e.outerRadius}function BH(e){return e.startAngle}function UH(e){return e.endAngle}function WH(e){return e&&e.padAngle}function zH(e,t,n,r,i,o,a,u){var c=n-e,f=r-t,h=a-i,g=u-o,d=g*c-h*f;if(!(d*d<Ht))return d=(h*(t-o)-g*(e-i))/d,[e+d*c,t+d*f]}function Fl(e,t,n,r,i,o,a){var u=e-n,c=t-r,f=(a?o:-o)/at(u*u+c*c),h=f*c,g=-f*u,d=e+h,_=t+g,y=n+h,w=r+g,m=(d+y)/2,b=(_+w)/2,C=y-d,T=w-_,x=C*C+T*T,S=i-o,R=d*w-y*_,D=(T<0?-1:1)*at(OH(0,S*S*x-R*R)),$=(R*T-C*D)/x,F=(-R*C-T*D)/x,U=(R*T+C*D)/x,A=(-R*C+T*D)/x,W=$-m,k=F-b,N=U-m,P=A-b;return W*W+k*k>N*N+P*P&&($=U,F=A),{cx:$,cy:F,x01:-h,y01:-g,x11:$*(i/S-1),y11:F*(i/S-1)}}function GH(){var e=$H,t=FH,n=ke(0),r=null,i=BH,o=UH,a=WH,u=null,c=Au(f);function f(){var h,g,d=+e.apply(this,arguments),_=+t.apply(this,arguments),y=i.apply(this,arguments)-nf,w=o.apply(this,arguments)-nf,m=w2(w-y),b=w>y;if(u||(u=h=c()),_<d&&(g=_,_=d,d=g),!(_>Ht))u.moveTo(0,0);else if(m>hi-Ht)u.moveTo(_*Or(y),_*vn(y)),u.arc(0,0,_,y,w,!b),d>Ht&&(u.moveTo(d*Or(w),d*vn(w)),u.arc(0,0,d,w,y,b));else{var C=y,T=w,x=y,S=w,R=m,D=m,$=a.apply(this,arguments)/2,F=$>Ht&&(r?+r.apply(this,arguments):at(d*d+_*_)),U=os(w2(_-d)/2,+n.apply(this,arguments)),A=U,W=U,k,N;if(F>Ht){var P=x2(F/d*vn($)),L=x2(F/_*vn($));(R-=P*2)>Ht?(P*=b?1:-1,x+=P,S-=P):(R=0,x=S=(y+w)/2),(D-=L*2)>Ht?(L*=b?1:-1,C+=L,T-=L):(D=0,C=T=(y+w)/2)}var q=_*Or(C),Y=_*vn(C),j=d*Or(S),B=d*vn(S);if(U>Ht){var G=_*Or(T),X=_*vn(T),J=d*Or(x),ie=d*vn(x),oe;if(m<mi)if(oe=zH(q,Y,J,ie,G,X,j,B)){var pe=q-oe[0],le=Y-oe[1],_e=G-oe[0],ne=X-oe[1],se=1/vn(LH((pe*_e+le*ne)/(at(pe*pe+le*le)*at(_e*_e+ne*ne)))/2),ce=at(oe[0]*oe[0]+oe[1]*oe[1]);A=os(U,(d-ce)/(se-1)),W=os(U,(_-ce)/(se+1))}else A=W=0}D>Ht?W>Ht?(k=Fl(J,ie,q,Y,_,W,b),N=Fl(G,X,j,B,_,W,b),u.moveTo(k.cx+k.x01,k.cy+k.y01),W<U?u.arc(k.cx,k.cy,W,Vt(k.y01,k.x01),Vt(N.y01,N.x01),!b):(u.arc(k.cx,k.cy,W,Vt(k.y01,k.x01),Vt(k.y11,k.x11),!b),u.arc(0,0,_,Vt(k.cy+k.y11,k.cx+k.x11),Vt(N.cy+N.y11,N.cx+N.x11),!b),u.arc(N.cx,N.cy,W,Vt(N.y11,N.x11),Vt(N.y01,N.x01),!b))):(u.moveTo(q,Y),u.arc(0,0,_,C,T,!b)):u.moveTo(q,Y),!(d>Ht)||!(R>Ht)?u.lineTo(j,B):A>Ht?(k=Fl(j,B,G,X,d,-A,b),N=Fl(q,Y,J,ie,d,-A,b),u.lineTo(k.cx+k.x01,k.cy+k.y01),A<U?u.arc(k.cx,k.cy,A,Vt(k.y01,k.x01),Vt(N.y01,N.x01),!b):(u.arc(k.cx,k.cy,A,Vt(k.y01,k.x01),Vt(k.y11,k.x11),!b),u.arc(0,0,d,Vt(k.cy+k.y11,k.cx+k.x11),Vt(N.cy+N.y11,N.cx+N.x11),b),u.arc(N.cx,N.cy,A,Vt(N.y11,N.x11),Vt(N.y01,N.x01),!b))):u.arc(0,0,d,S,x,b)}if(u.closePath(),h)return u=null,h+""||null}return f.centroid=function(){var h=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,g=(+i.apply(this,arguments)+ +o.apply(this,arguments))/2-mi/2;return[Or(g)*h,vn(g)*h]},f.innerRadius=function(h){return arguments.length?(e=typeof h=="function"?h:ke(+h),f):e},f.outerRadius=function(h){return arguments.length?(t=typeof h=="function"?h:ke(+h),f):t},f.cornerRadius=function(h){return arguments.length?(n=typeof h=="function"?h:ke(+h),f):n},f.padRadius=function(h){return arguments.length?(r=h==null?null:typeof h=="function"?h:ke(+h),f):r},f.startAngle=function(h){return arguments.length?(i=typeof h=="function"?h:ke(+h),f):i},f.endAngle=function(h){return arguments.length?(o=typeof h=="function"?h:ke(+h),f):o},f.padAngle=function(h){return arguments.length?(a=typeof h=="function"?h:ke(+h),f):a},f.context=function(h){return arguments.length?(u=h??null,f):u},f}var VH=Array.prototype.slice;function Jf(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function a3(e){this._context=e}a3.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function Zf(e){return new a3(e)}function D_(e){return e[0]}function O_(e){return e[1]}function L_(e,t){var n=ke(!0),r=null,i=Zf,o=null,a=Au(u);e=typeof e=="function"?e:e===void 0?D_:ke(e),t=typeof t=="function"?t:t===void 0?O_:ke(t);function u(c){var f,h=(c=Jf(c)).length,g,d=!1,_;for(r==null&&(o=i(_=a())),f=0;f<=h;++f)!(f<h&&n(g=c[f],f,c))===d&&((d=!d)?o.lineStart():o.lineEnd()),d&&o.point(+e(g,f,c),+t(g,f,c));if(_)return o=null,_+""||null}return u.x=function(c){return arguments.length?(e=typeof c=="function"?c:ke(+c),u):e},u.y=function(c){return arguments.length?(t=typeof c=="function"?c:ke(+c),u):t},u.defined=function(c){return arguments.length?(n=typeof c=="function"?c:ke(!!c),u):n},u.curve=function(c){return arguments.length?(i=c,r!=null&&(o=i(r)),u):i},u.context=function(c){return arguments.length?(c==null?r=o=null:o=i(r=c),u):r},u}function u3(e,t,n){var r=null,i=ke(!0),o=null,a=Zf,u=null,c=Au(f);e=typeof e=="function"?e:e===void 0?D_:ke(+e),t=typeof t=="function"?t:ke(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?O_:ke(+n);function f(g){var d,_,y,w=(g=Jf(g)).length,m,b=!1,C,T=new Array(w),x=new Array(w);for(o==null&&(u=a(C=c())),d=0;d<=w;++d){if(!(d<w&&i(m=g[d],d,g))===b)if(b=!b)_=d,u.areaStart(),u.lineStart();else{for(u.lineEnd(),u.lineStart(),y=d-1;y>=_;--y)u.point(T[y],x[y]);u.lineEnd(),u.areaEnd()}b&&(T[d]=+e(m,d,g),x[d]=+t(m,d,g),u.point(r?+r(m,d,g):T[d],n?+n(m,d,g):x[d]))}if(C)return u=null,C+""||null}function h(){return L_().defined(i).curve(a).context(o)}return f.x=function(g){return arguments.length?(e=typeof g=="function"?g:ke(+g),r=null,f):e},f.x0=function(g){return arguments.length?(e=typeof g=="function"?g:ke(+g),f):e},f.x1=function(g){return arguments.length?(r=g==null?null:typeof g=="function"?g:ke(+g),f):r},f.y=function(g){return arguments.length?(t=typeof g=="function"?g:ke(+g),n=null,f):t},f.y0=function(g){return arguments.length?(t=typeof g=="function"?g:ke(+g),f):t},f.y1=function(g){return arguments.length?(n=g==null?null:typeof g=="function"?g:ke(+g),f):n},f.lineX0=f.lineY0=function(){return h().x(e).y(t)},f.lineY1=function(){return h().x(e).y(n)},f.lineX1=function(){return h().x(r).y(t)},f.defined=function(g){return arguments.length?(i=typeof g=="function"?g:ke(!!g),f):i},f.curve=function(g){return arguments.length?(a=g,o!=null&&(u=a(o)),f):a},f.context=function(g){return arguments.length?(g==null?o=u=null:u=a(o=g),f):o},f}function HH(e,t){return t<e?-1:t>e?1:t>=e?0:NaN}function qH(e){return e}function YH(){var e=qH,t=HH,n=null,r=ke(0),i=ke(hi),o=ke(0);function a(u){var c,f=(u=Jf(u)).length,h,g,d=0,_=new Array(f),y=new Array(f),w=+r.apply(this,arguments),m=Math.min(hi,Math.max(-hi,i.apply(this,arguments)-w)),b,C=Math.min(Math.abs(m)/f,o.apply(this,arguments)),T=C*(m<0?-1:1),x;for(c=0;c<f;++c)(x=y[_[c]=c]=+e(u[c],c,u))>0&&(d+=x);for(t!=null?_.sort(function(S,R){return t(y[S],y[R])}):n!=null&&_.sort(function(S,R){return n(u[S],u[R])}),c=0,g=d?(m-f*T)/d:0;c<f;++c,w=b)h=_[c],x=y[h],b=w+(x>0?x*g:0)+T,y[h]={data:u[h],index:c,value:x,startAngle:w,endAngle:b,padAngle:C};return y}return a.value=function(u){return arguments.length?(e=typeof u=="function"?u:ke(+u),a):e},a.sortValues=function(u){return arguments.length?(t=u,n=null,a):t},a.sort=function(u){return arguments.length?(n=u,t=null,a):n},a.startAngle=function(u){return arguments.length?(r=typeof u=="function"?u:ke(+u),a):r},a.endAngle=function(u){return arguments.length?(i=typeof u=="function"?u:ke(+u),a):i},a.padAngle=function(u){return arguments.length?(o=typeof u=="function"?u:ke(+u),a):o},a}var l3=$_(Zf);function c3(e){this._curve=e}c3.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(e,t){this._curve.point(t*Math.sin(e),t*-Math.cos(e))}};function $_(e){function t(n){return new c3(e(n))}return t._curve=e,t}function wa(e){var t=e.curve;return e.angle=e.x,delete e.x,e.radius=e.y,delete e.y,e.curve=function(n){return arguments.length?t($_(n)):t()._curve},e}function T2(){return wa(L_().curve(l3))}function C2(){var e=u3().curve(l3),t=e.curve,n=e.lineX0,r=e.lineX1,i=e.lineY0,o=e.lineY1;return e.angle=e.x,delete e.x,e.startAngle=e.x0,delete e.x0,e.endAngle=e.x1,delete e.x1,e.radius=e.y,delete e.y,e.innerRadius=e.y0,delete e.y0,e.outerRadius=e.y1,delete e.y1,e.lineStartAngle=function(){return wa(n())},delete e.lineX0,e.lineEndAngle=function(){return wa(r())},delete e.lineX1,e.lineInnerRadius=function(){return wa(i())},delete e.lineY0,e.lineOuterRadius=function(){return wa(o())},delete e.lineY1,e.curve=function(a){return arguments.length?t($_(a)):t()._curve},e}function xa(e,t){return[(t=+t)*Math.cos(e-=Math.PI/2),t*Math.sin(e)]}class f3{constructor(t,n){this._context=t,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,n){switch(t=+t,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,n,t,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,t,this._y0,t,n);break}}this._x0=t,this._y0=n}}class KH{constructor(t){this._context=t}lineStart(){this._point=0}lineEnd(){}point(t,n){if(t=+t,n=+n,this._point===0)this._point=1;else{const r=xa(this._x0,this._y0),i=xa(this._x0,this._y0=(this._y0+n)/2),o=xa(t,this._y0),a=xa(t,n);this._context.moveTo(...r),this._context.bezierCurveTo(...i,...o,...a)}this._x0=t,this._y0=n}}function h3(e){return new f3(e,!0)}function d3(e){return new f3(e,!1)}function XH(e){return new KH(e)}function jH(e){return e.source}function QH(e){return e.target}function eh(e){let t=jH,n=QH,r=D_,i=O_,o=null,a=null,u=Au(c);function c(){let f;const h=VH.call(arguments),g=t.apply(this,h),d=n.apply(this,h);if(o==null&&(a=e(f=u())),a.lineStart(),h[0]=g,a.point(+r.apply(this,h),+i.apply(this,h)),h[0]=d,a.point(+r.apply(this,h),+i.apply(this,h)),a.lineEnd(),f)return a=null,f+""||null}return c.source=function(f){return arguments.length?(t=f,c):t},c.target=function(f){return arguments.length?(n=f,c):n},c.x=function(f){return arguments.length?(r=typeof f=="function"?f:ke(+f),c):r},c.y=function(f){return arguments.length?(i=typeof f=="function"?f:ke(+f),c):i},c.context=function(f){return arguments.length?(f==null?o=a=null:a=e(o=f),c):o},c}function JH(){return eh(h3)}function ZH(){return eh(d3)}function eq(){const e=eh(XH);return e.angle=e.x,delete e.x,e.radius=e.y,delete e.y,e}const tq=at(3),p3={draw(e,t){const n=at(t+os(t/28,.75))*.59436,r=n/2,i=r*tq;e.moveTo(0,n),e.lineTo(0,-n),e.moveTo(-i,-r),e.lineTo(i,r),e.moveTo(-i,r),e.lineTo(i,-r)}},th={draw(e,t){const n=at(t/mi);e.moveTo(n,0),e.arc(0,0,n,0,hi)}},g3={draw(e,t){const n=at(t/5)/2;e.moveTo(-3*n,-n),e.lineTo(-n,-n),e.lineTo(-n,-3*n),e.lineTo(n,-3*n),e.lineTo(n,-n),e.lineTo(3*n,-n),e.lineTo(3*n,n),e.lineTo(n,n),e.lineTo(n,3*n),e.lineTo(-n,3*n),e.lineTo(-n,n),e.lineTo(-3*n,n),e.closePath()}},_3=at(1/3),nq=_3*2,m3={draw(e,t){const n=at(t/nq),r=n*_3;e.moveTo(0,-n),e.lineTo(r,0),e.lineTo(0,n),e.lineTo(-r,0),e.closePath()}},v3={draw(e,t){const n=at(t)*.62625;e.moveTo(0,-n),e.lineTo(n,0),e.lineTo(0,n),e.lineTo(-n,0),e.closePath()}},y3={draw(e,t){const n=at(t-os(t/7,2))*.87559;e.moveTo(-n,0),e.lineTo(n,0),e.moveTo(0,n),e.lineTo(0,-n)}},b3={draw(e,t){const n=at(t),r=-n/2;e.rect(r,r,n,n)}},w3={draw(e,t){const n=at(t)*.4431;e.moveTo(n,n),e.lineTo(n,-n),e.lineTo(-n,-n),e.lineTo(-n,n),e.closePath()}},rq=.8908130915292852,x3=vn(mi/10)/vn(7*mi/10),iq=vn(hi/10)*x3,oq=-Or(hi/10)*x3,T3={draw(e,t){const n=at(t*rq),r=iq*n,i=oq*n;e.moveTo(0,-n),e.lineTo(r,i);for(let o=1;o<5;++o){const a=hi*o/5,u=Or(a),c=vn(a);e.lineTo(c*n,-u*n),e.lineTo(u*r-c*i,c*r+u*i)}e.closePath()}},w0=at(3),C3={draw(e,t){const n=-at(t/(w0*3));e.moveTo(0,n*2),e.lineTo(-w0*n,-n),e.lineTo(w0*n,-n),e.closePath()}},sq=at(3),E3={draw(e,t){const n=at(t)*.6824,r=n/2,i=n*sq/2;e.moveTo(0,-n),e.lineTo(i,r),e.lineTo(-i,r),e.closePath()}},Wn=-.5,zn=at(3)/2,zp=1/at(12),aq=(zp/2+1)*3,S3={draw(e,t){const n=at(t/aq),r=n/2,i=n*zp,o=r,a=n*zp+n,u=-o,c=a;e.moveTo(r,i),e.lineTo(o,a),e.lineTo(u,c),e.lineTo(Wn*r-zn*i,zn*r+Wn*i),e.lineTo(Wn*o-zn*a,zn*o+Wn*a),e.lineTo(Wn*u-zn*c,zn*u+Wn*c),e.lineTo(Wn*r+zn*i,Wn*i-zn*r),e.lineTo(Wn*o+zn*a,Wn*a-zn*o),e.lineTo(Wn*u+zn*c,Wn*c-zn*u),e.closePath()}},Gp={draw(e,t){const n=at(t-os(t/6,1.7))*.6189;e.moveTo(-n,-n),e.lineTo(n,n),e.moveTo(-n,n),e.lineTo(n,-n)}},E2=[th,g3,m3,b3,T3,C3,S3],uq=[th,y3,Gp,E3,p3,w3,v3];function lq(e,t){let n=null,r=Au(i);e=typeof e=="function"?e:ke(e||th),t=typeof t=="function"?t:ke(t===void 0?64:+t);function i(){let o;if(n||(n=o=r()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),o)return n=null,o+""||null}return i.type=function(o){return arguments.length?(e=typeof o=="function"?o:ke(o),i):e},i.size=function(o){return arguments.length?(t=typeof o=="function"?o:ke(+o),i):t},i.context=function(o){return arguments.length?(n=o??null,i):n},i}function vi(){}function rf(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function nh(e){this._context=e}nh.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:rf(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:rf(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function cq(e){return new nh(e)}function A3(e){this._context=e}A3.prototype={areaStart:vi,areaEnd:vi,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:rf(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function fq(e){return new A3(e)}function M3(e){this._context=e}M3.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:rf(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function hq(e){return new M3(e)}function I3(e,t){this._basis=new nh(e),this._beta=t}I3.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,n=e.length-1;if(n>0)for(var r=e[0],i=t[0],o=e[n]-r,a=t[n]-i,u=-1,c;++u<=n;)c=u/n,this._basis.point(this._beta*e[u]+(1-this._beta)*(r+c*o),this._beta*t[u]+(1-this._beta)*(i+c*a));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};const dq=function e(t){function n(r){return t===1?new nh(r):new I3(r,t)}return n.beta=function(r){return e(+r)},n}(.85);function of(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function F_(e,t){this._context=e,this._k=(1-t)/6}F_.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:of(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:of(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const pq=function e(t){function n(r){return new F_(r,t)}return n.tension=function(r){return e(+r)},n}(0);function B_(e,t){this._context=e,this._k=(1-t)/6}B_.prototype={areaStart:vi,areaEnd:vi,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:of(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const gq=function e(t){function n(r){return new B_(r,t)}return n.tension=function(r){return e(+r)},n}(0);function U_(e,t){this._context=e,this._k=(1-t)/6}U_.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:of(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const _q=function e(t){function n(r){return new U_(r,t)}return n.tension=function(r){return e(+r)},n}(0);function W_(e,t,n){var r=e._x1,i=e._y1,o=e._x2,a=e._y2;if(e._l01_a>Ht){var u=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,c=3*e._l01_a*(e._l01_a+e._l12_a);r=(r*u-e._x0*e._l12_2a+e._x2*e._l01_2a)/c,i=(i*u-e._y0*e._l12_2a+e._y2*e._l01_2a)/c}if(e._l23_a>Ht){var f=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,h=3*e._l23_a*(e._l23_a+e._l12_a);o=(o*f+e._x1*e._l23_2a-t*e._l12_2a)/h,a=(a*f+e._y1*e._l23_2a-n*e._l12_2a)/h}e._context.bezierCurveTo(r,i,o,a,e._x2,e._y2)}function R3(e,t){this._context=e,this._alpha=t}R3.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:W_(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const mq=function e(t){function n(r){return t?new R3(r,t):new F_(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function N3(e,t){this._context=e,this._alpha=t}N3.prototype={areaStart:vi,areaEnd:vi,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:W_(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const vq=function e(t){function n(r){return t?new N3(r,t):new B_(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function P3(e,t){this._context=e,this._alpha=t}P3.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:W_(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const yq=function e(t){function n(r){return t?new P3(r,t):new U_(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function k3(e){this._context=e}k3.prototype={areaStart:vi,areaEnd:vi,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function bq(e){return new k3(e)}function S2(e){return e<0?-1:1}function A2(e,t,n){var r=e._x1-e._x0,i=t-e._x1,o=(e._y1-e._y0)/(r||i<0&&-0),a=(n-e._y1)/(i||r<0&&-0),u=(o*i+a*r)/(r+i);return(S2(o)+S2(a))*Math.min(Math.abs(o),Math.abs(a),.5*Math.abs(u))||0}function M2(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function x0(e,t,n){var r=e._x0,i=e._y0,o=e._x1,a=e._y1,u=(o-r)/3;e._context.bezierCurveTo(r+u,i+u*t,o-u,a-u*n,o,a)}function sf(e){this._context=e}sf.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:x0(this,this._t0,M2(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,x0(this,M2(this,n=A2(this,e,t)),n);break;default:x0(this,this._t0,n=A2(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function D3(e){this._context=new O3(e)}(D3.prototype=Object.create(sf.prototype)).point=function(e,t){sf.prototype.point.call(this,t,e)};function O3(e){this._context=e}O3.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,o){this._context.bezierCurveTo(t,e,r,n,o,i)}};function wq(e){return new sf(e)}function xq(e){return new D3(e)}function L3(e){this._context=e}L3.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var r=I2(e),i=I2(t),o=0,a=1;a<n;++o,++a)this._context.bezierCurveTo(r[0][o],i[0][o],r[1][o],i[1][o],e[a],t[a]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function I2(e){var t,n=e.length-1,r,i=new Array(n),o=new Array(n),a=new Array(n);for(i[0]=0,o[0]=2,a[0]=e[0]+2*e[1],t=1;t<n-1;++t)i[t]=1,o[t]=4,a[t]=4*e[t]+2*e[t+1];for(i[n-1]=2,o[n-1]=7,a[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=i[t]/o[t-1],o[t]-=r,a[t]-=r*a[t-1];for(i[n-1]=a[n-1]/o[n-1],t=n-2;t>=0;--t)i[t]=(a[t]-i[t+1])/o[t];for(o[n-1]=(e[n]+i[n-1])/2,t=0;t<n-1;++t)o[t]=2*e[t+1]-i[t+1];return[i,o]}function Tq(e){return new L3(e)}function rh(e,t){this._context=e,this._t=t}rh.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function Cq(e){return new rh(e,.5)}function Eq(e){return new rh(e,0)}function Sq(e){return new rh(e,1)}function Cs(e,t){if((a=e.length)>1)for(var n=1,r,i,o=e[t[0]],a,u=o.length;n<a;++n)for(i=o,o=e[t[n]],r=0;r<u;++r)o[r][1]+=o[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function Es(e){for(var t=e.length,n=new Array(t);--t>=0;)n[t]=t;return n}function Aq(e,t){return e[t]}function Mq(e){const t=[];return t.key=e,t}function Iq(){var e=ke([]),t=Es,n=Cs,r=Aq;function i(o){var a=Array.from(e.apply(this,arguments),Mq),u,c=a.length,f=-1,h;for(const g of o)for(u=0,++f;u<c;++u)(a[u][f]=[0,+r(g,a[u].key,f,o)]).data=g;for(u=0,h=Jf(t(a));u<c;++u)a[h[u]].index=u;return n(a,h),a}return i.keys=function(o){return arguments.length?(e=typeof o=="function"?o:ke(Array.from(o)),i):e},i.value=function(o){return arguments.length?(r=typeof o=="function"?o:ke(+o),i):r},i.order=function(o){return arguments.length?(t=o==null?Es:typeof o=="function"?o:ke(Array.from(o)),i):t},i.offset=function(o){return arguments.length?(n=o??Cs,i):n},i}function Rq(e,t){if((r=e.length)>0){for(var n,r,i=0,o=e[0].length,a;i<o;++i){for(a=n=0;n<r;++n)a+=e[n][i][1]||0;if(a)for(n=0;n<r;++n)e[n][i][1]/=a}Cs(e,t)}}function Nq(e,t){if((c=e.length)>0)for(var n,r=0,i,o,a,u,c,f=e[t[0]].length;r<f;++r)for(a=u=0,n=0;n<c;++n)(o=(i=e[t[n]][r])[1]-i[0])>0?(i[0]=a,i[1]=a+=o):o<0?(i[1]=u,i[0]=u+=o):(i[0]=0,i[1]=o)}function Pq(e,t){if((i=e.length)>0){for(var n=0,r=e[t[0]],i,o=r.length;n<o;++n){for(var a=0,u=0;a<i;++a)u+=e[a][n][1]||0;r[n][1]+=r[n][0]=-u/2}Cs(e,t)}}function kq(e,t){if(!(!((a=e.length)>0)||!((o=(i=e[t[0]]).length)>0))){for(var n=0,r=1,i,o,a;r<o;++r){for(var u=0,c=0,f=0;u<a;++u){for(var h=e[t[u]],g=h[r][1]||0,d=h[r-1][1]||0,_=(g-d)/2,y=0;y<u;++y){var w=e[t[y]],m=w[r][1]||0,b=w[r-1][1]||0;_+=m-b}c+=g,f+=_*g}i[r-1][1]+=i[r-1][0]=n,c&&(n-=f/c)}i[r-1][1]+=i[r-1][0]=n,Cs(e,t)}}function $3(e){var t=e.map(Dq);return Es(e).sort(function(n,r){return t[n]-t[r]})}function Dq(e){for(var t=-1,n=0,r=e.length,i,o=-1/0;++t<r;)(i=+e[t][1])>o&&(o=i,n=t);return n}function F3(e){var t=e.map(B3);return Es(e).sort(function(n,r){return t[n]-t[r]})}function B3(e){for(var t=0,n=-1,r=e.length,i;++n<r;)(i=+e[n][1])&&(t+=i);return t}function Oq(e){return F3(e).reverse()}function Lq(e){var t=e.length,n,r,i=e.map(B3),o=$3(e),a=0,u=0,c=[],f=[];for(n=0;n<t;++n)r=o[n],a<u?(a+=i[r],c.push(r)):(u+=i[r],f.push(r));return f.reverse().concat(c)}function $q(e){return Es(e).reverse()}const Bl=e=>()=>e;function Fq(e,{sourceEvent:t,target:n,transform:r,dispatch:i}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:i}})}function pr(e,t,n){this.k=e,this.x=t,this.y=n}pr.prototype={constructor:pr,scale:function(e){return e===1?this:new pr(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new pr(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var ih=new pr(1,0,0);U3.prototype=pr.prototype;function U3(e){for(;!e.__zoom;)if(!(e=e.parentNode))return ih;return e.__zoom}function T0(e){e.stopImmediatePropagation()}function la(e){e.preventDefault(),e.stopImmediatePropagation()}function Bq(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function Uq(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function R2(){return this.__zoom||ih}function Wq(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function zq(){return navigator.maxTouchPoints||"ontouchstart"in this}function Gq(e,t,n){var r=e.invertX(t[0][0])-n[0][0],i=e.invertX(t[1][0])-n[1][0],o=e.invertY(t[0][1])-n[0][1],a=e.invertY(t[1][1])-n[1][1];return e.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),a>o?(o+a)/2:Math.min(0,o)||Math.max(0,a))}function Vq(){var e=Bq,t=Uq,n=Gq,r=Wq,i=zq,o=[0,1/0],a=[[-1/0,-1/0],[1/0,1/0]],u=250,c=yT,f=fo("start","zoom","end"),h,g,d,_=500,y=150,w=0,m=10;function b(N){N.property("__zoom",R2).on("wheel.zoom",$,{passive:!1}).on("mousedown.zoom",F).on("dblclick.zoom",U).filter(i).on("touchstart.zoom",A).on("touchmove.zoom",W).on("touchend.zoom touchcancel.zoom",k).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}b.transform=function(N,P,L,q){var Y=N.selection?N.selection():N;Y.property("__zoom",R2),N!==Y?S(N,P,L,q):Y.interrupt().each(function(){R(this,arguments).event(q).start().zoom(null,typeof P=="function"?P.apply(this,arguments):P).end()})},b.scaleBy=function(N,P,L,q){b.scaleTo(N,function(){var Y=this.__zoom.k,j=typeof P=="function"?P.apply(this,arguments):P;return Y*j},L,q)},b.scaleTo=function(N,P,L,q){b.transform(N,function(){var Y=t.apply(this,arguments),j=this.__zoom,B=L==null?x(Y):typeof L=="function"?L.apply(this,arguments):L,G=j.invert(B),X=typeof P=="function"?P.apply(this,arguments):P;return n(T(C(j,X),B,G),Y,a)},L,q)},b.translateBy=function(N,P,L,q){b.transform(N,function(){return n(this.__zoom.translate(typeof P=="function"?P.apply(this,arguments):P,typeof L=="function"?L.apply(this,arguments):L),t.apply(this,arguments),a)},null,q)},b.translateTo=function(N,P,L,q,Y){b.transform(N,function(){var j=t.apply(this,arguments),B=this.__zoom,G=q==null?x(j):typeof q=="function"?q.apply(this,arguments):q;return n(ih.translate(G[0],G[1]).scale(B.k).translate(typeof P=="function"?-P.apply(this,arguments):-P,typeof L=="function"?-L.apply(this,arguments):-L),j,a)},q,Y)};function C(N,P){return P=Math.max(o[0],Math.min(o[1],P)),P===N.k?N:new pr(P,N.x,N.y)}function T(N,P,L){var q=P[0]-L[0]*N.k,Y=P[1]-L[1]*N.k;return q===N.x&&Y===N.y?N:new pr(N.k,q,Y)}function x(N){return[(+N[0][0]+ +N[1][0])/2,(+N[0][1]+ +N[1][1])/2]}function S(N,P,L,q){N.on("start.zoom",function(){R(this,arguments).event(q).start()}).on("interrupt.zoom end.zoom",function(){R(this,arguments).event(q).end()}).tween("zoom",function(){var Y=this,j=arguments,B=R(Y,j).event(q),G=t.apply(Y,j),X=L==null?x(G):typeof L=="function"?L.apply(Y,j):L,J=Math.max(G[1][0]-G[0][0],G[1][1]-G[0][1]),ie=Y.__zoom,oe=typeof P=="function"?P.apply(Y,j):P,pe=c(ie.invert(X).concat(J/ie.k),oe.invert(X).concat(J/oe.k));return function(le){if(le===1)le=oe;else{var _e=pe(le),ne=J/_e[2];le=new pr(ne,X[0]-_e[0]*ne,X[1]-_e[1]*ne)}B.zoom(null,le)}})}function R(N,P,L){return!L&&N.__zooming||new D(N,P)}function D(N,P){this.that=N,this.args=P,this.active=0,this.sourceEvent=null,this.extent=t.apply(N,P),this.taps=0}D.prototype={event:function(N){return N&&(this.sourceEvent=N),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(N,P){return this.mouse&&N!=="mouse"&&(this.mouse[1]=P.invert(this.mouse[0])),this.touch0&&N!=="touch"&&(this.touch0[1]=P.invert(this.touch0[0])),this.touch1&&N!=="touch"&&(this.touch1[1]=P.invert(this.touch1[0])),this.that.__zoom=P,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(N){var P=Kt(this.that).datum();f.call(N,this.that,new Fq(N,{sourceEvent:this.sourceEvent,target:b,type:N,transform:this.that.__zoom,dispatch:f}),P)}};function $(N,...P){if(!e.apply(this,arguments))return;var L=R(this,P).event(N),q=this.__zoom,Y=Math.max(o[0],Math.min(o[1],q.k*Math.pow(2,r.apply(this,arguments)))),j=Rn(N);if(L.wheel)(L.mouse[0][0]!==j[0]||L.mouse[0][1]!==j[1])&&(L.mouse[1]=q.invert(L.mouse[0]=j)),clearTimeout(L.wheel);else{if(q.k===Y)return;L.mouse=[j,q.invert(j)],Hi(this),L.start()}la(N),L.wheel=setTimeout(B,y),L.zoom("mouse",n(T(C(q,Y),L.mouse[0],L.mouse[1]),L.extent,a));function B(){L.wheel=null,L.end()}}function F(N,...P){if(d||!e.apply(this,arguments))return;var L=N.currentTarget,q=R(this,P,!0).event(N),Y=Kt(N.view).on("mousemove.zoom",X,!0).on("mouseup.zoom",J,!0),j=Rn(N,L),B=N.clientX,G=N.clientY;Tf(N.view),T0(N),q.mouse=[j,this.__zoom.invert(j)],Hi(this),q.start();function X(ie){if(la(ie),!q.moved){var oe=ie.clientX-B,pe=ie.clientY-G;q.moved=oe*oe+pe*pe>w}q.event(ie).zoom("mouse",n(T(q.that.__zoom,q.mouse[0]=Rn(ie,L),q.mouse[1]),q.extent,a))}function J(ie){Y.on("mousemove.zoom mouseup.zoom",null),Cf(ie.view,q.moved),la(ie),q.event(ie).end()}}function U(N,...P){if(e.apply(this,arguments)){var L=this.__zoom,q=Rn(N.changedTouches?N.changedTouches[0]:N,this),Y=L.invert(q),j=L.k*(N.shiftKey?.5:2),B=n(T(C(L,j),q,Y),t.apply(this,P),a);la(N),u>0?Kt(this).transition().duration(u).call(S,B,q,N):Kt(this).call(b.transform,B,q,N)}}function A(N,...P){if(e.apply(this,arguments)){var L=N.touches,q=L.length,Y=R(this,P,N.changedTouches.length===q).event(N),j,B,G,X;for(T0(N),B=0;B<q;++B)G=L[B],X=Rn(G,this),X=[X,this.__zoom.invert(X),G.identifier],Y.touch0?!Y.touch1&&Y.touch0[2]!==X[2]&&(Y.touch1=X,Y.taps=0):(Y.touch0=X,j=!0,Y.taps=1+!!h);h&&(h=clearTimeout(h)),j&&(Y.taps<2&&(g=X[0],h=setTimeout(function(){h=null},_)),Hi(this),Y.start())}}function W(N,...P){if(this.__zooming){var L=R(this,P).event(N),q=N.changedTouches,Y=q.length,j,B,G,X;for(la(N),j=0;j<Y;++j)B=q[j],G=Rn(B,this),L.touch0&&L.touch0[2]===B.identifier?L.touch0[0]=G:L.touch1&&L.touch1[2]===B.identifier&&(L.touch1[0]=G);if(B=L.that.__zoom,L.touch1){var J=L.touch0[0],ie=L.touch0[1],oe=L.touch1[0],pe=L.touch1[1],le=(le=oe[0]-J[0])*le+(le=oe[1]-J[1])*le,_e=(_e=pe[0]-ie[0])*_e+(_e=pe[1]-ie[1])*_e;B=C(B,Math.sqrt(le/_e)),G=[(J[0]+oe[0])/2,(J[1]+oe[1])/2],X=[(ie[0]+pe[0])/2,(ie[1]+pe[1])/2]}else if(L.touch0)G=L.touch0[0],X=L.touch0[1];else return;L.zoom("touch",n(T(B,G,X),L.extent,a))}}function k(N,...P){if(this.__zooming){var L=R(this,P).event(N),q=N.changedTouches,Y=q.length,j,B;for(T0(N),d&&clearTimeout(d),d=setTimeout(function(){d=null},_),j=0;j<Y;++j)B=q[j],L.touch0&&L.touch0[2]===B.identifier?delete L.touch0:L.touch1&&L.touch1[2]===B.identifier&&delete L.touch1;if(L.touch1&&!L.touch0&&(L.touch0=L.touch1,delete L.touch1),L.touch0)L.touch0[1]=this.__zoom.invert(L.touch0[0]);else if(L.end(),L.taps===2&&(B=Rn(B,this),Math.hypot(g[0]-B[0],g[1]-B[1])<m)){var G=Kt(this).on("dblclick.zoom");G&&G.apply(this,arguments)}}}return b.wheelDelta=function(N){return arguments.length?(r=typeof N=="function"?N:Bl(+N),b):r},b.filter=function(N){return arguments.length?(e=typeof N=="function"?N:Bl(!!N),b):e},b.touchable=function(N){return arguments.length?(i=typeof N=="function"?N:Bl(!!N),b):i},b.extent=function(N){return arguments.length?(t=typeof N=="function"?N:Bl([[+N[0][0],+N[0][1]],[+N[1][0],+N[1][1]]]),b):t},b.scaleExtent=function(N){return arguments.length?(o[0]=+N[0],o[1]=+N[1],b):[o[0],o[1]]},b.translateExtent=function(N){return arguments.length?(a[0][0]=+N[0][0],a[1][0]=+N[1][0],a[0][1]=+N[0][1],a[1][1]=+N[1][1],b):[[a[0][0],a[0][1]],[a[1][0],a[1][1]]]},b.constrain=function(N){return arguments.length?(n=N,b):n},b.duration=function(N){return arguments.length?(u=+N,b):u},b.interpolate=function(N){return arguments.length?(c=N,b):c},b.on=function(){var N=f.on.apply(f,arguments);return N===f?b:N},b.clickDistance=function(N){return arguments.length?(w=(N=+N)*N,b):Math.sqrt(w)},b.tapDistance=function(N){return arguments.length?(m=+N,b):m},b}const Hq=Object.freeze(Object.defineProperty({__proto__:null,Adder:St,Delaunay:Xg,FormatSpecifier:Lf,InternMap:Va,InternSet:Qi,Node:oo,Path:vu,Voronoi:FT,ZoomTransform:pr,active:F$,arc:GH,area:u3,areaRadial:C2,ascending:dt,autoType:uB,axisBottom:Mk,axisLeft:Ik,axisRight:Ak,axisTop:Sk,bin:gy,bisect:co,bisectCenter:xP,bisectLeft:wP,bisectRight:gx,bisector:mf,blob:fB,blur:TP,blur2:_x,blurImage:CP,brush:Q$,brushSelection:K$,brushX:X$,brushY:j$,buffer:dB,chord:Z$,chordDirected:tF,chordTranspose:eF,cluster:RW,color:gi,contourDensity:AF,contours:dp,count:vf,create:cO,creator:wf,cross:NP,csv:_B,csvFormat:QF,csvFormatBody:JF,csvFormatRow:eB,csvFormatRows:ZF,csvFormatValue:tB,csvParse:UT,csvParseRows:jF,cubehelix:sr,cumsum:PP,curveBasis:cq,curveBasisClosed:fq,curveBasisOpen:hq,curveBumpX:h3,curveBumpY:d3,curveBundle:dq,curveCardinal:pq,curveCardinalClosed:gq,curveCardinalOpen:_q,curveCatmullRom:mq,curveCatmullRomClosed:vq,curveCatmullRomOpen:yq,curveLinear:Zf,curveLinearClosed:bq,curveMonotoneX:wq,curveMonotoneY:xq,curveNatural:Tq,curveStep:Cq,curveStepAfter:Sq,curveStepBefore:Eq,descending:dx,deviation:yx,difference:pk,disjoint:gk,dispatch:fo,drag:yO,dragDisable:Tf,dragEnable:Cf,dsv:gB,dsvFormat:kf,easeBack:By,easeBackIn:R$,easeBackInOut:By,easeBackOut:N$,easeBounce:Za,easeBounceIn:M$,easeBounceInOut:I$,easeBounceOut:Za,easeCircle:Fy,easeCircleIn:v$,easeCircleInOut:Fy,easeCircleOut:y$,easeCubic:up,easeCubicIn:c$,easeCubicInOut:up,easeCubicOut:f$,easeElastic:Uy,easeElasticIn:P$,easeElasticInOut:k$,easeElasticOut:Uy,easeExp:$y,easeExpIn:_$,easeExpInOut:$y,easeExpOut:m$,easeLinear:a$,easePoly:Oy,easePolyIn:h$,easePolyInOut:Oy,easePolyOut:d$,easeQuad:Dy,easeQuadIn:u$,easeQuadInOut:Dy,easeQuadOut:l$,easeSin:Ly,easeSinIn:p$,easeSinInOut:Ly,easeSinOut:g$,every:uk,extent:Ma,fcumsum:DP,filter:ck,flatGroup:OP,flatRollup:LP,forceCenter:CB,forceCollide:GB,forceLink:HB,forceManyBody:eU,forceRadial:tU,forceSimulation:ZB,forceX:nU,forceY:rU,get format(){return $f},formatDefaultLocale:qT,formatLocale:HT,get formatPrefix(){return Jg},formatSpecifier:ms,fsum:kP,geoAlbers:RC,geoAlbersUsa:uW,geoArea:dU,geoAzimuthalEqualArea:lW,geoAzimuthalEqualAreaRaw:u_,geoAzimuthalEquidistant:cW,geoAzimuthalEquidistantRaw:l_,geoBounds:mU,geoCentroid:TU,geoCircle:CU,geoClipAntimeridian:Sp,geoClipCircle:pC,geoClipExtent:NU,geoClipRectangle:Ff,geoConicConformal:hW,geoConicConformalRaw:kC,geoConicEqualArea:Zc,geoConicEqualAreaRaw:IC,geoConicEquidistant:pW,geoConicEquidistantRaw:DC,geoContains:FU,geoDistance:Hc,geoEqualEarth:_W,geoEqualEarthRaw:c_,geoEquirectangular:dW,geoEquirectangularRaw:ou,geoGnomonic:mW,geoGnomonicRaw:f_,geoGraticule:mC,geoGraticule10:BU,geoIdentity:vW,geoInterpolate:UU,geoLength:gC,geoMercator:fW,geoMercatorRaw:Tu,geoNaturalEarth1:yW,geoNaturalEarth1Raw:h_,geoOrthographic:bW,geoOrthographicRaw:d_,geoPath:JU,geoProjection:wr,geoProjectionMutator:s_,geoRotation:uC,geoStereographic:wW,geoStereographicRaw:p_,geoStream:er,geoTransform:ZU,geoTransverseMercator:xW,geoTransverseMercatorRaw:g_,gray:NO,greatest:Rx,greatestIndex:nk,group:Tx,groupSort:BP,groups:Cx,hcl:Sc,hierarchy:__,histogram:gy,hsl:Tc,html:xB,image:vB,index:$P,indexes:FP,interpolate:wi,interpolateArray:$O,interpolateBasis:sT,interpolateBasisClosed:aT,interpolateBlues:_H,interpolateBrBG:XV,interpolateBuGn:iH,interpolateBuPu:oH,interpolateCividis:xH,interpolateCool:EH,interpolateCubehelix:JO,interpolateCubehelixDefault:TH,interpolateCubehelixLong:If,interpolateDate:dT,interpolateDiscrete:UO,interpolateGnBu:sH,interpolateGreens:mH,interpolateGreys:vH,interpolateHcl:jO,interpolateHclLong:QO,interpolateHsl:YO,interpolateHslLong:KO,interpolateHue:WO,interpolateInferno:kH,interpolateLab:XO,interpolateMagma:PH,interpolateNumber:Gn,interpolateNumberArray:Fg,interpolateObject:pT,interpolateOrRd:aH,interpolateOranges:wH,interpolatePRGn:jV,interpolatePiYG:QV,interpolatePlasma:DH,interpolatePuBu:lH,interpolatePuBuGn:uH,interpolatePuOr:JV,interpolatePuRd:cH,interpolatePurples:yH,interpolateRainbow:SH,interpolateRdBu:ZV,interpolateRdGy:eH,interpolateRdPu:fH,interpolateRdYlBu:tH,interpolateRdYlGn:nH,interpolateReds:bH,interpolateRgb:ja,interpolateRgbBasis:cT,interpolateRgbBasisClosed:LO,interpolateRound:Mf,interpolateSinebow:IH,interpolateSpectral:rH,interpolateString:Bg,interpolateTransformCss:mT,interpolateTransformSvg:vT,interpolateTurbo:RH,interpolateViridis:NH,interpolateWarm:CH,interpolateYlGn:dH,interpolateYlGnBu:hH,interpolateYlOrBr:pH,interpolateYlOrRd:gH,interpolateZoom:yT,interrupt:Hi,intersection:_k,interval:rL,isoFormat:MV,isoParse:NV,json:bB,lab:Ec,lch:PO,least:tk,leastIndex:kx,line:L_,lineRadial:T2,link:eh,linkHorizontal:JH,linkRadial:eq,linkVertical:ZH,local:Hx,map:fk,matcher:Ng,max:Ha,maxIndex:Ag,mean:YP,median:KP,medianIndex:XP,merge:Ig,min:bc,minIndex:Mg,mode:QP,namespace:gu,namespaces:J0,nice:Eg,now:mu,pack:sz,packEnclose:ez,packSiblings:iz,pairs:JP,partition:az,path:Kg,pathRound:iF,permute:Ix,pie:YH,piecewise:TT,pointRadial:xa,pointer:Rn,pointers:hO,polygonArea:Tz,polygonCentroid:Cz,polygonContains:Mz,polygonHull:Az,polygonLength:Iz,precisionFixed:YT,precisionPrefix:KT,precisionRound:XT,quadtree:Of,quantile:qa,quantileIndex:Px,quantileSorted:Nx,quantize:ZO,quickselect:yf,radialArea:C2,radialLine:T2,randomBates:kz,randomBernoulli:Lz,randomBeta:YC,randomBinomial:KC,randomCauchy:Fz,randomExponential:Dz,randomGamma:y_,randomGeometric:qC,randomInt:Nz,randomIrwinHall:HC,randomLcg:Gz,randomLogNormal:Pz,randomLogistic:Bz,randomNormal:v_,randomPareto:Oz,randomPoisson:Uz,randomUniform:Rz,randomWeibull:$z,range:ai,rank:ek,reduce:hk,reverse:dk,rgb:ds,ribbon:hF,ribbonArrow:dF,rollup:Sx,rollups:Ax,scaleBand:w_,scaleDiverging:NE,scaleDivergingLog:PE,scaleDivergingPow:k_,scaleDivergingSqrt:$V,scaleDivergingSymlog:kE,scaleIdentity:JC,scaleImplicit:Up,scaleLinear:QC,scaleLog:eE,scaleOrdinal:b_,scalePoint:Vz,scalePow:S_,scaleQuantile:rE,scaleQuantize:iE,scaleRadial:nE,scaleSequential:AE,scaleSequentialLog:ME,scaleSequentialPow:P_,scaleSequentialQuantile:RE,scaleSequentialSqrt:LV,scaleSequentialSymlog:IE,scaleSqrt:nG,scaleSymlog:tE,scaleThreshold:oE,scaleTime:DV,scaleUtc:OV,scan:rk,schemeAccent:BV,schemeBlues:t3,schemeBrBG:DE,schemeBuGn:GE,schemeBuPu:VE,schemeCategory10:FV,schemeDark2:UV,schemeGnBu:HE,schemeGreens:n3,schemeGreys:r3,schemeObservable10:WV,schemeOrRd:qE,schemeOranges:s3,schemePRGn:OE,schemePaired:zV,schemePastel1:GV,schemePastel2:VV,schemePiYG:LE,schemePuBu:KE,schemePuBuGn:YE,schemePuOr:$E,schemePuRd:XE,schemePurples:i3,schemeRdBu:FE,schemeRdGy:BE,schemeRdPu:jE,schemeRdYlBu:UE,schemeRdYlGn:WE,schemeReds:o3,schemeSet1:HV,schemeSet2:qV,schemeSet3:YV,schemeSpectral:zE,schemeTableau10:KV,schemeYlGn:JE,schemeYlGnBu:QE,schemeYlOrBr:ZE,schemeYlOrRd:e3,select:Kt,selectAll:dO,selection:ho,selector:xf,selectorAll:Rg,shuffle:ik,shuffler:Dx,some:lk,sort:X0,stack:Iq,stackOffsetDiverging:Nq,stackOffsetExpand:Rq,stackOffsetNone:Cs,stackOffsetSilhouette:Pq,stackOffsetWiggle:kq,stackOrderAppearance:$3,stackOrderAscending:F3,stackOrderDescending:Oq,stackOrderInsideOut:Lq,stackOrderNone:Es,stackOrderReverse:$q,stratify:fz,style:eo,subset:vk,sum:ok,superset:Lx,svg:TB,symbol:lq,symbolAsterisk:p3,symbolCircle:th,symbolCross:g3,symbolDiamond:m3,symbolDiamond2:v3,symbolPlus:y3,symbolSquare:b3,symbolSquare2:w3,symbolStar:T3,symbolTimes:Gp,symbolTriangle:C3,symbolTriangle2:E3,symbolWye:S3,symbolX:Gp,symbols:E2,symbolsFill:E2,symbolsStroke:uq,text:Df,thresholdFreedmanDiaconis:HP,thresholdScott:qP,thresholdSturges:Sg,tickFormat:jC,tickIncrement:Zi,tickStep:yc,ticks:Ji,timeDay:ks,timeDays:uG,get timeFormat(){return I_},timeFormatDefaultLocale:EE,timeFormatLocale:yE,timeFriday:uE,timeFridays:gG,timeHour:Vf,timeHours:sG,timeInterval:wt,timeMillisecond:ws,timeMilliseconds:s2,timeMinute:zf,timeMinutes:iG,timeMonday:su,timeMondays:fG,timeMonth:qf,timeMonths:TG,get timeParse(){return CE},timeSaturday:lE,timeSaturdays:_G,timeSecond:Wr,timeSeconds:u2,timeSunday:xs,timeSundays:l2,timeThursday:so,timeThursdays:pG,timeTickInterval:vE,timeTicks:mE,timeTuesday:sE,timeTuesdays:hG,timeWednesday:aE,timeWednesdays:dG,timeWeek:xs,timeWeeks:l2,timeYear:vr,timeYears:EG,timeout:ip,timer:Nf,timerFlush:ST,transition:RT,transpose:Ox,tree:vz,treemap:yz,treemapBinary:bz,treemapDice:Cu,treemapResquarify:xz,treemapSlice:Uf,treemapSliceDice:wz,treemapSquarify:VC,tsv:mB,tsvFormat:rB,tsvFormatBody:iB,tsvFormatRow:sB,tsvFormatRows:oB,tsvFormatValue:aB,tsvParse:WT,tsvParseRows:nB,union:yk,unixDay:M_,unixDays:cG,utcDay:Su,utcDays:lG,get utcFormat(){return Kf},utcFriday:hE,utcFridays:wG,utcHour:Hf,utcHours:aG,utcMillisecond:ws,utcMilliseconds:s2,utcMinute:Gf,utcMinutes:oG,utcMonday:au,utcMondays:mG,utcMonth:Yf,utcMonths:CG,get utcParse(){return R_},utcSaturday:dE,utcSaturdays:xG,utcSecond:Wr,utcSeconds:u2,utcSunday:Ts,utcSundays:c2,utcThursday:ao,utcThursdays:bG,utcTickInterval:_E,utcTicks:gE,utcTuesday:cE,utcTuesdays:vG,utcWednesday:fE,utcWednesdays:yG,utcWeek:Ts,utcWeeks:c2,utcYear:yr,utcYears:SG,variance:vx,window:Pg,xml:wB,zip:ak,zoom:Vq,zoomIdentity:ih,zoomTransform:U3},Symbol.toStringTag,{value:"Module"})),oh=RI(Hq);var Dr={},C0={},N2;function W3(){return N2||(N2=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.defaultArc=e.getArcWidthByType=e.defaultSubArcs=void 0;var t=Ds();e.defaultSubArcs=[{limit:33,color:"#5BE12C"},{limit:66,color:"#F5CD19"},{color:"#EA4228"}];var n=function(r){var i,o=(i={},i[t.GaugeType.Grafana]=.25,i[t.GaugeType.Semicircle]=.15,i[t.GaugeType.Radial]=.2,i);return r||(r=t.defaultGaugeProps.type),o[r]};e.getArcWidthByType=n,e.defaultArc={padding:.05,width:.25,cornerRadius:7,nbSubArcs:void 0,colorArray:void 0,subArcs:e.defaultSubArcs,gradient:!1}}(C0)),C0}var z3={},Mu={};Object.defineProperty(Mu,"__esModule",{value:!0});Mu.defaultTickLabels=void 0;var qq={color:"rgb(173 172 171)",length:7,width:1,distanceFromArc:3,hide:!1},Yq={formatTextValue:void 0,maxDecimalDigits:2,style:{fontSize:"10px",fill:"rgb(173 172 171)"},hide:!1},Kq=[];Mu.defaultTickLabels={type:"outer",hideMinMax:!1,ticks:Kq,defaultTickValueConfig:Yq,defaultTickLineConfig:qq};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.defaultLabels=e.defaultValueLabel=void 0;var t=Mu;e.defaultValueLabel={formatTextValue:void 0,matchColorWithArc:!1,maxDecimalDigits:2,style:{fontSize:"35px",fill:"#fff",textShadow:"black 1px 0.5px 0px, black 0px 0px 0.03em, black 0px 0px 0.01em"},hide:!1},e.defaultLabels={valueLabel:e.defaultValueLabel,tickLabels:t.defaultTickLabels}})(z3);var sh={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.defaultPointer=e.defaultPointerRef=e.defaultPointerContext=e.PointerType=void 0;var t;(function(n){n.Needle="needle",n.Blob="blob",n.Arrow="arrow"})(t||(e.PointerType=t={})),e.defaultPointerContext={centerPoint:[0,0],pointerRadius:0,pathLength:0,currentPercent:0,prevPercent:0,prevProgress:0,pathStr:"",shouldDrawPath:!1,prevColor:""},e.defaultPointerRef={element:void 0,path:void 0,context:e.defaultPointerContext},e.defaultPointer={type:t.Needle,color:"#5A5A5A",baseColor:"white",length:.7,width:20,animate:!0,elastic:!1,animationDuration:3e3,animationDelay:100}})(sh);var P2;function Ds(){if(P2)return Dr;P2=1,Object.defineProperty(Dr,"__esModule",{value:!0}),Dr.getGaugeMarginByType=Dr.defaultGaugeProps=Dr.GaugeType=void 0;var e=W3(),t=z3,n=sh,r;(function(o){o.Semicircle="semicircle",o.Radial="radial",o.Grafana="grafana"})(r||(Dr.GaugeType=r={})),Dr.defaultGaugeProps={id:"",className:"gauge-component-class",style:{width:"100%"},marginInPercent:.07,value:33,minValue:0,maxValue:100,arc:e.defaultArc,labels:t.defaultLabels,pointer:n.defaultPointer,type:r.Grafana};var i=function(o){var a,u=(a={},a[r.Grafana]={top:.12,bottom:0,left:.07,right:.07},a[r.Semicircle]={top:.08,bottom:0,left:.08,right:.08},a[r.Radial]={top:.07,bottom:0,left:.07,right:.07},a);return u[o]};return Dr.getGaugeMarginByType=i,Dr}var G3={},E0={},Os={};(function(e){var t=Ae&&Ae.__assign||function(){return t=Object.assign||function(d){for(var _,y=1,w=arguments.length;y<w;y++){_=arguments[y];for(var m in _)Object.prototype.hasOwnProperty.call(_,m)&&(d[m]=_[m])}return d},t.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.camelCaseToKebabCase=e.getCurrentGaugeValueByPercentage=e.getCurrentGaugePercentageByValue=e.degToRad=e.normalize=e.floatingNumber=e.percentToRad=e.mergeObjects=e.isEmptyObject=e.calculatePercentage=void 0;var n=function(d,_,y){if(y<d)return 0;if(y>_)return 1;var w=(y-d)/(_-d);return w};e.calculatePercentage=n;var r=function(d){return Object.keys(d).length===0&&d.constructor===Object};e.isEmptyObject=r;var i=function(d,_){var y=t({},d);return Object.keys(_).forEach(function(w){var m=d[w],b=_[w];Array.isArray(m)&&Array.isArray(b)?y[w]=b:typeof m=="object"&&typeof b=="object"?y[w]=(0,e.mergeObjects)(m,b):b!==void 0&&(y[w]=b)}),y};e.mergeObjects=i;var o=function(d,_){return d*(Math.PI/_)};e.percentToRad=o;var a=function(d,_){return _===void 0&&(_=2),Math.round(d*Math.pow(10,_))/Math.pow(10,_)};e.floatingNumber=a;function u(d,_,y){return(d-_)/(y-_)*100}e.normalize=u;var c=function(d){return d*(Math.PI/180)};e.degToRad=c;var f=function(d,_){return(0,e.calculatePercentage)(_.minValue,_.maxValue,d)};e.getCurrentGaugePercentageByValue=f;var h=function(d,_){var y=_.props.minValue,w=_.props.maxValue,m=y+d*(w-y);return m};e.getCurrentGaugeValueByPercentage=h;var g=function(d){return d.replace(/[A-Z]/g,function(_){return"-".concat(_.toLowerCase())})};e.camelCaseToKebabCase=g})(Os);var z_={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.CONSTANTS=void 0,e.CONSTANTS={arcTooltipClassname:"gauge-component-arc-tooltip",tickLineClassname:"tick-line",tickValueClassname:"tick-value",valueLabelClassname:"value-text",debugTicksRadius:!1,debugSingleGauge:!1,rangeBetweenCenteredTickValueLabel:[.35,.65]},e.default=e.CONSTANTS})(z_);var ah={};Object.defineProperty(ah,"__esModule",{value:!0});ah.defaultTooltipStyle=void 0;ah.defaultTooltipStyle={borderColor:"#5A5A5A",borderStyle:"solid",borderWidth:"1px",borderRadius:"5px",color:"white",padding:"5px",fontSize:"15px",textShadow:"1px 1px 2px black, 0 0 1em black, 0 0 0.2em black"};var af={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */af.exports;(function(e,t){(function(){var n,r="4.17.21",i=200,o="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",a="Expected a function",u="Invalid `variable` option passed into `_.template`",c="__lodash_hash_undefined__",f=500,h="__lodash_placeholder__",g=1,d=2,_=4,y=1,w=2,m=1,b=2,C=4,T=8,x=16,S=32,R=64,D=128,$=256,F=512,U=30,A="...",W=800,k=16,N=1,P=2,L=3,q=1/0,Y=9007199254740991,j=17976931348623157e292,B=NaN,G=4294967295,X=G-1,J=G>>>1,ie=[["ary",D],["bind",m],["bindKey",b],["curry",T],["curryRight",x],["flip",F],["partial",S],["partialRight",R],["rearg",$]],oe="[object Arguments]",pe="[object Array]",le="[object AsyncFunction]",_e="[object Boolean]",ne="[object Date]",se="[object DOMException]",ce="[object Error]",te="[object Function]",ge="[object GeneratorFunction]",ye="[object Map]",Me="[object Number]",Ie="[object Null]",ue="[object Object]",be="[object Promise]",bt="[object Proxy]",Xe="[object RegExp]",lt="[object Set]",cn="[object String]",fn="[object Symbol]",Xr="[object Undefined]",hn="[object WeakMap]",vo="[object WeakSet]",Ls="[object ArrayBuffer]",yo="[object DataView]",uh="[object Float32Array]",lh="[object Float64Array]",ch="[object Int8Array]",fh="[object Int16Array]",hh="[object Int32Array]",dh="[object Uint8Array]",ph="[object Uint8ClampedArray]",gh="[object Uint16Array]",_h="[object Uint32Array]",Q3=/\b__p \+= '';/g,J3=/\b(__p \+=) '' \+/g,Z3=/(__e\(.*?\)|\b__t\)) \+\n'';/g,V_=/&(?:amp|lt|gt|quot|#39);/g,H_=/[&<>"']/g,eS=RegExp(V_.source),tS=RegExp(H_.source),nS=/<%-([\s\S]+?)%>/g,rS=/<%([\s\S]+?)%>/g,q_=/<%=([\s\S]+?)%>/g,iS=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,oS=/^\w*$/,sS=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,mh=/[\\^$.*+?()[\]{}|]/g,aS=RegExp(mh.source),vh=/^\s+/,uS=/\s/,lS=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,cS=/\{\n\/\* \[wrapped with (.+)\] \*/,fS=/,? & /,hS=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,dS=/[()=,{}\[\]\/\s]/,pS=/\\(\\)?/g,gS=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Y_=/\w*$/,_S=/^[-+]0x[0-9a-f]+$/i,mS=/^0b[01]+$/i,vS=/^\[object .+?Constructor\]$/,yS=/^0o[0-7]+$/i,bS=/^(?:0|[1-9]\d*)$/,wS=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Iu=/($^)/,xS=/['\n\r\u2028\u2029\\]/g,Ru="\\ud800-\\udfff",TS="\\u0300-\\u036f",CS="\\ufe20-\\ufe2f",ES="\\u20d0-\\u20ff",K_=TS+CS+ES,X_="\\u2700-\\u27bf",j_="a-z\\xdf-\\xf6\\xf8-\\xff",SS="\\xac\\xb1\\xd7\\xf7",AS="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",MS="\\u2000-\\u206f",IS=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Q_="A-Z\\xc0-\\xd6\\xd8-\\xde",J_="\\ufe0e\\ufe0f",Z_=SS+AS+MS+IS,yh="[']",RS="["+Ru+"]",e1="["+Z_+"]",Nu="["+K_+"]",t1="\\d+",NS="["+X_+"]",n1="["+j_+"]",r1="[^"+Ru+Z_+t1+X_+j_+Q_+"]",bh="\\ud83c[\\udffb-\\udfff]",PS="(?:"+Nu+"|"+bh+")",i1="[^"+Ru+"]",wh="(?:\\ud83c[\\udde6-\\uddff]){2}",xh="[\\ud800-\\udbff][\\udc00-\\udfff]",bo="["+Q_+"]",o1="\\u200d",s1="(?:"+n1+"|"+r1+")",kS="(?:"+bo+"|"+r1+")",a1="(?:"+yh+"(?:d|ll|m|re|s|t|ve))?",u1="(?:"+yh+"(?:D|LL|M|RE|S|T|VE))?",l1=PS+"?",c1="["+J_+"]?",DS="(?:"+o1+"(?:"+[i1,wh,xh].join("|")+")"+c1+l1+")*",OS="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",LS="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",f1=c1+l1+DS,$S="(?:"+[NS,wh,xh].join("|")+")"+f1,FS="(?:"+[i1+Nu+"?",Nu,wh,xh,RS].join("|")+")",BS=RegExp(yh,"g"),US=RegExp(Nu,"g"),Th=RegExp(bh+"(?="+bh+")|"+FS+f1,"g"),WS=RegExp([bo+"?"+n1+"+"+a1+"(?="+[e1,bo,"$"].join("|")+")",kS+"+"+u1+"(?="+[e1,bo+s1,"$"].join("|")+")",bo+"?"+s1+"+"+a1,bo+"+"+u1,LS,OS,t1,$S].join("|"),"g"),zS=RegExp("["+o1+Ru+K_+J_+"]"),GS=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,VS=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],HS=-1,ot={};ot[uh]=ot[lh]=ot[ch]=ot[fh]=ot[hh]=ot[dh]=ot[ph]=ot[gh]=ot[_h]=!0,ot[oe]=ot[pe]=ot[Ls]=ot[_e]=ot[yo]=ot[ne]=ot[ce]=ot[te]=ot[ye]=ot[Me]=ot[ue]=ot[Xe]=ot[lt]=ot[cn]=ot[hn]=!1;var nt={};nt[oe]=nt[pe]=nt[Ls]=nt[yo]=nt[_e]=nt[ne]=nt[uh]=nt[lh]=nt[ch]=nt[fh]=nt[hh]=nt[ye]=nt[Me]=nt[ue]=nt[Xe]=nt[lt]=nt[cn]=nt[fn]=nt[dh]=nt[ph]=nt[gh]=nt[_h]=!0,nt[ce]=nt[te]=nt[hn]=!1;var qS={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},YS={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},KS={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},XS={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},jS=parseFloat,QS=parseInt,h1=typeof Ae=="object"&&Ae&&Ae.Object===Object&&Ae,JS=typeof self=="object"&&self&&self.Object===Object&&self,Lt=h1||JS||Function("return this")(),Ch=t&&!t.nodeType&&t,Ci=Ch&&!0&&e&&!e.nodeType&&e,d1=Ci&&Ci.exports===Ch,Eh=d1&&h1.process,kn=function(){try{var V=Ci&&Ci.require&&Ci.require("util").types;return V||Eh&&Eh.binding&&Eh.binding("util")}catch{}}(),p1=kn&&kn.isArrayBuffer,g1=kn&&kn.isDate,_1=kn&&kn.isMap,m1=kn&&kn.isRegExp,v1=kn&&kn.isSet,y1=kn&&kn.isTypedArray;function Tn(V,Q,K){switch(K.length){case 0:return V.call(Q);case 1:return V.call(Q,K[0]);case 2:return V.call(Q,K[0],K[1]);case 3:return V.call(Q,K[0],K[1],K[2])}return V.apply(Q,K)}function ZS(V,Q,K,he){for(var Ne=-1,Ye=V==null?0:V.length;++Ne<Ye;){var xt=V[Ne];Q(he,xt,K(xt),V)}return he}function Dn(V,Q){for(var K=-1,he=V==null?0:V.length;++K<he&&Q(V[K],K,V)!==!1;);return V}function e6(V,Q){for(var K=V==null?0:V.length;K--&&Q(V[K],K,V)!==!1;);return V}function b1(V,Q){for(var K=-1,he=V==null?0:V.length;++K<he;)if(!Q(V[K],K,V))return!1;return!0}function jr(V,Q){for(var K=-1,he=V==null?0:V.length,Ne=0,Ye=[];++K<he;){var xt=V[K];Q(xt,K,V)&&(Ye[Ne++]=xt)}return Ye}function Pu(V,Q){var K=V==null?0:V.length;return!!K&&wo(V,Q,0)>-1}function Sh(V,Q,K){for(var he=-1,Ne=V==null?0:V.length;++he<Ne;)if(K(Q,V[he]))return!0;return!1}function ut(V,Q){for(var K=-1,he=V==null?0:V.length,Ne=Array(he);++K<he;)Ne[K]=Q(V[K],K,V);return Ne}function Qr(V,Q){for(var K=-1,he=Q.length,Ne=V.length;++K<he;)V[Ne+K]=Q[K];return V}function Ah(V,Q,K,he){var Ne=-1,Ye=V==null?0:V.length;for(he&&Ye&&(K=V[++Ne]);++Ne<Ye;)K=Q(K,V[Ne],Ne,V);return K}function t6(V,Q,K,he){var Ne=V==null?0:V.length;for(he&&Ne&&(K=V[--Ne]);Ne--;)K=Q(K,V[Ne],Ne,V);return K}function Mh(V,Q){for(var K=-1,he=V==null?0:V.length;++K<he;)if(Q(V[K],K,V))return!0;return!1}var n6=Ih("length");function r6(V){return V.split("")}function i6(V){return V.match(hS)||[]}function w1(V,Q,K){var he;return K(V,function(Ne,Ye,xt){if(Q(Ne,Ye,xt))return he=Ye,!1}),he}function ku(V,Q,K,he){for(var Ne=V.length,Ye=K+(he?1:-1);he?Ye--:++Ye<Ne;)if(Q(V[Ye],Ye,V))return Ye;return-1}function wo(V,Q,K){return Q===Q?_6(V,Q,K):ku(V,x1,K)}function o6(V,Q,K,he){for(var Ne=K-1,Ye=V.length;++Ne<Ye;)if(he(V[Ne],Q))return Ne;return-1}function x1(V){return V!==V}function T1(V,Q){var K=V==null?0:V.length;return K?Nh(V,Q)/K:B}function Ih(V){return function(Q){return Q==null?n:Q[V]}}function Rh(V){return function(Q){return V==null?n:V[Q]}}function C1(V,Q,K,he,Ne){return Ne(V,function(Ye,xt,Je){K=he?(he=!1,Ye):Q(K,Ye,xt,Je)}),K}function s6(V,Q){var K=V.length;for(V.sort(Q);K--;)V[K]=V[K].value;return V}function Nh(V,Q){for(var K,he=-1,Ne=V.length;++he<Ne;){var Ye=Q(V[he]);Ye!==n&&(K=K===n?Ye:K+Ye)}return K}function Ph(V,Q){for(var K=-1,he=Array(V);++K<V;)he[K]=Q(K);return he}function a6(V,Q){return ut(Q,function(K){return[K,V[K]]})}function E1(V){return V&&V.slice(0,I1(V)+1).replace(vh,"")}function Cn(V){return function(Q){return V(Q)}}function kh(V,Q){return ut(Q,function(K){return V[K]})}function $s(V,Q){return V.has(Q)}function S1(V,Q){for(var K=-1,he=V.length;++K<he&&wo(Q,V[K],0)>-1;);return K}function A1(V,Q){for(var K=V.length;K--&&wo(Q,V[K],0)>-1;);return K}function u6(V,Q){for(var K=V.length,he=0;K--;)V[K]===Q&&++he;return he}var l6=Rh(qS),c6=Rh(YS);function f6(V){return"\\"+XS[V]}function h6(V,Q){return V==null?n:V[Q]}function xo(V){return zS.test(V)}function d6(V){return GS.test(V)}function p6(V){for(var Q,K=[];!(Q=V.next()).done;)K.push(Q.value);return K}function Dh(V){var Q=-1,K=Array(V.size);return V.forEach(function(he,Ne){K[++Q]=[Ne,he]}),K}function M1(V,Q){return function(K){return V(Q(K))}}function Jr(V,Q){for(var K=-1,he=V.length,Ne=0,Ye=[];++K<he;){var xt=V[K];(xt===Q||xt===h)&&(V[K]=h,Ye[Ne++]=K)}return Ye}function Du(V){var Q=-1,K=Array(V.size);return V.forEach(function(he){K[++Q]=he}),K}function g6(V){var Q=-1,K=Array(V.size);return V.forEach(function(he){K[++Q]=[he,he]}),K}function _6(V,Q,K){for(var he=K-1,Ne=V.length;++he<Ne;)if(V[he]===Q)return he;return-1}function m6(V,Q,K){for(var he=K+1;he--;)if(V[he]===Q)return he;return he}function To(V){return xo(V)?y6(V):n6(V)}function Kn(V){return xo(V)?b6(V):r6(V)}function I1(V){for(var Q=V.length;Q--&&uS.test(V.charAt(Q)););return Q}var v6=Rh(KS);function y6(V){for(var Q=Th.lastIndex=0;Th.test(V);)++Q;return Q}function b6(V){return V.match(Th)||[]}function w6(V){return V.match(WS)||[]}var x6=function V(Q){Q=Q==null?Lt:Co.defaults(Lt.Object(),Q,Co.pick(Lt,VS));var K=Q.Array,he=Q.Date,Ne=Q.Error,Ye=Q.Function,xt=Q.Math,Je=Q.Object,Oh=Q.RegExp,T6=Q.String,On=Q.TypeError,Ou=K.prototype,C6=Ye.prototype,Eo=Je.prototype,Lu=Q["__core-js_shared__"],$u=C6.toString,Qe=Eo.hasOwnProperty,E6=0,R1=function(){var s=/[^.]+$/.exec(Lu&&Lu.keys&&Lu.keys.IE_PROTO||"");return s?"Symbol(src)_1."+s:""}(),Fu=Eo.toString,S6=$u.call(Je),A6=Lt._,M6=Oh("^"+$u.call(Qe).replace(mh,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Bu=d1?Q.Buffer:n,Zr=Q.Symbol,Uu=Q.Uint8Array,N1=Bu?Bu.allocUnsafe:n,Wu=M1(Je.getPrototypeOf,Je),P1=Je.create,k1=Eo.propertyIsEnumerable,zu=Ou.splice,D1=Zr?Zr.isConcatSpreadable:n,Fs=Zr?Zr.iterator:n,Ei=Zr?Zr.toStringTag:n,Gu=function(){try{var s=Ri(Je,"defineProperty");return s({},"",{}),s}catch{}}(),I6=Q.clearTimeout!==Lt.clearTimeout&&Q.clearTimeout,R6=he&&he.now!==Lt.Date.now&&he.now,N6=Q.setTimeout!==Lt.setTimeout&&Q.setTimeout,Vu=xt.ceil,Hu=xt.floor,Lh=Je.getOwnPropertySymbols,P6=Bu?Bu.isBuffer:n,O1=Q.isFinite,k6=Ou.join,D6=M1(Je.keys,Je),Tt=xt.max,Bt=xt.min,O6=he.now,L6=Q.parseInt,L1=xt.random,$6=Ou.reverse,$h=Ri(Q,"DataView"),Bs=Ri(Q,"Map"),Fh=Ri(Q,"Promise"),So=Ri(Q,"Set"),Us=Ri(Q,"WeakMap"),Ws=Ri(Je,"create"),qu=Us&&new Us,Ao={},F6=Ni($h),B6=Ni(Bs),U6=Ni(Fh),W6=Ni(So),z6=Ni(Us),Yu=Zr?Zr.prototype:n,zs=Yu?Yu.valueOf:n,$1=Yu?Yu.toString:n;function M(s){if(pt(s)&&!Pe(s)&&!(s instanceof Ge)){if(s instanceof Ln)return s;if(Qe.call(s,"__wrapped__"))return Fm(s)}return new Ln(s)}var Mo=function(){function s(){}return function(l){if(!ct(l))return{};if(P1)return P1(l);s.prototype=l;var p=new s;return s.prototype=n,p}}();function Ku(){}function Ln(s,l){this.__wrapped__=s,this.__actions__=[],this.__chain__=!!l,this.__index__=0,this.__values__=n}M.templateSettings={escape:nS,evaluate:rS,interpolate:q_,variable:"",imports:{_:M}},M.prototype=Ku.prototype,M.prototype.constructor=M,Ln.prototype=Mo(Ku.prototype),Ln.prototype.constructor=Ln;function Ge(s){this.__wrapped__=s,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=G,this.__views__=[]}function G6(){var s=new Ge(this.__wrapped__);return s.__actions__=dn(this.__actions__),s.__dir__=this.__dir__,s.__filtered__=this.__filtered__,s.__iteratees__=dn(this.__iteratees__),s.__takeCount__=this.__takeCount__,s.__views__=dn(this.__views__),s}function V6(){if(this.__filtered__){var s=new Ge(this);s.__dir__=-1,s.__filtered__=!0}else s=this.clone(),s.__dir__*=-1;return s}function H6(){var s=this.__wrapped__.value(),l=this.__dir__,p=Pe(s),v=l<0,E=p?s.length:0,I=r5(0,E,this.__views__),O=I.start,z=I.end,H=z-O,Z=v?z:O-1,ee=this.__iteratees__,re=ee.length,fe=0,me=Bt(H,this.__takeCount__);if(!p||!v&&E==H&&me==H)return am(s,this.__actions__);var Ce=[];e:for(;H--&&fe<me;){Z+=l;for(var Le=-1,Ee=s[Z];++Le<re;){var Ue=ee[Le],He=Ue.iteratee,An=Ue.type,Qt=He(Ee);if(An==P)Ee=Qt;else if(!Qt){if(An==N)continue e;break e}}Ce[fe++]=Ee}return Ce}Ge.prototype=Mo(Ku.prototype),Ge.prototype.constructor=Ge;function Si(s){var l=-1,p=s==null?0:s.length;for(this.clear();++l<p;){var v=s[l];this.set(v[0],v[1])}}function q6(){this.__data__=Ws?Ws(null):{},this.size=0}function Y6(s){var l=this.has(s)&&delete this.__data__[s];return this.size-=l?1:0,l}function K6(s){var l=this.__data__;if(Ws){var p=l[s];return p===c?n:p}return Qe.call(l,s)?l[s]:n}function X6(s){var l=this.__data__;return Ws?l[s]!==n:Qe.call(l,s)}function j6(s,l){var p=this.__data__;return this.size+=this.has(s)?0:1,p[s]=Ws&&l===n?c:l,this}Si.prototype.clear=q6,Si.prototype.delete=Y6,Si.prototype.get=K6,Si.prototype.has=X6,Si.prototype.set=j6;function xr(s){var l=-1,p=s==null?0:s.length;for(this.clear();++l<p;){var v=s[l];this.set(v[0],v[1])}}function Q6(){this.__data__=[],this.size=0}function J6(s){var l=this.__data__,p=Xu(l,s);if(p<0)return!1;var v=l.length-1;return p==v?l.pop():zu.call(l,p,1),--this.size,!0}function Z6(s){var l=this.__data__,p=Xu(l,s);return p<0?n:l[p][1]}function eA(s){return Xu(this.__data__,s)>-1}function tA(s,l){var p=this.__data__,v=Xu(p,s);return v<0?(++this.size,p.push([s,l])):p[v][1]=l,this}xr.prototype.clear=Q6,xr.prototype.delete=J6,xr.prototype.get=Z6,xr.prototype.has=eA,xr.prototype.set=tA;function Tr(s){var l=-1,p=s==null?0:s.length;for(this.clear();++l<p;){var v=s[l];this.set(v[0],v[1])}}function nA(){this.size=0,this.__data__={hash:new Si,map:new(Bs||xr),string:new Si}}function rA(s){var l=al(this,s).delete(s);return this.size-=l?1:0,l}function iA(s){return al(this,s).get(s)}function oA(s){return al(this,s).has(s)}function sA(s,l){var p=al(this,s),v=p.size;return p.set(s,l),this.size+=p.size==v?0:1,this}Tr.prototype.clear=nA,Tr.prototype.delete=rA,Tr.prototype.get=iA,Tr.prototype.has=oA,Tr.prototype.set=sA;function Ai(s){var l=-1,p=s==null?0:s.length;for(this.__data__=new Tr;++l<p;)this.add(s[l])}function aA(s){return this.__data__.set(s,c),this}function uA(s){return this.__data__.has(s)}Ai.prototype.add=Ai.prototype.push=aA,Ai.prototype.has=uA;function Xn(s){var l=this.__data__=new xr(s);this.size=l.size}function lA(){this.__data__=new xr,this.size=0}function cA(s){var l=this.__data__,p=l.delete(s);return this.size=l.size,p}function fA(s){return this.__data__.get(s)}function hA(s){return this.__data__.has(s)}function dA(s,l){var p=this.__data__;if(p instanceof xr){var v=p.__data__;if(!Bs||v.length<i-1)return v.push([s,l]),this.size=++p.size,this;p=this.__data__=new Tr(v)}return p.set(s,l),this.size=p.size,this}Xn.prototype.clear=lA,Xn.prototype.delete=cA,Xn.prototype.get=fA,Xn.prototype.has=hA,Xn.prototype.set=dA;function F1(s,l){var p=Pe(s),v=!p&&Pi(s),E=!p&&!v&&ii(s),I=!p&&!v&&!E&&Po(s),O=p||v||E||I,z=O?Ph(s.length,T6):[],H=z.length;for(var Z in s)(l||Qe.call(s,Z))&&!(O&&(Z=="length"||E&&(Z=="offset"||Z=="parent")||I&&(Z=="buffer"||Z=="byteLength"||Z=="byteOffset")||Ar(Z,H)))&&z.push(Z);return z}function B1(s){var l=s.length;return l?s[Xh(0,l-1)]:n}function pA(s,l){return ul(dn(s),Mi(l,0,s.length))}function gA(s){return ul(dn(s))}function Bh(s,l,p){(p!==n&&!jn(s[l],p)||p===n&&!(l in s))&&Cr(s,l,p)}function Gs(s,l,p){var v=s[l];(!(Qe.call(s,l)&&jn(v,p))||p===n&&!(l in s))&&Cr(s,l,p)}function Xu(s,l){for(var p=s.length;p--;)if(jn(s[p][0],l))return p;return-1}function _A(s,l,p,v){return ei(s,function(E,I,O){l(v,E,p(E),O)}),v}function U1(s,l){return s&&lr(l,At(l),s)}function mA(s,l){return s&&lr(l,gn(l),s)}function Cr(s,l,p){l=="__proto__"&&Gu?Gu(s,l,{configurable:!0,enumerable:!0,value:p,writable:!0}):s[l]=p}function Uh(s,l){for(var p=-1,v=l.length,E=K(v),I=s==null;++p<v;)E[p]=I?n:bd(s,l[p]);return E}function Mi(s,l,p){return s===s&&(p!==n&&(s=s<=p?s:p),l!==n&&(s=s>=l?s:l)),s}function $n(s,l,p,v,E,I){var O,z=l&g,H=l&d,Z=l&_;if(p&&(O=E?p(s,v,E,I):p(s)),O!==n)return O;if(!ct(s))return s;var ee=Pe(s);if(ee){if(O=o5(s),!z)return dn(s,O)}else{var re=Ut(s),fe=re==te||re==ge;if(ii(s))return cm(s,z);if(re==ue||re==oe||fe&&!E){if(O=H||fe?{}:Im(s),!z)return H?KA(s,mA(O,s)):YA(s,U1(O,s))}else{if(!nt[re])return E?s:{};O=s5(s,re,z)}}I||(I=new Xn);var me=I.get(s);if(me)return me;I.set(s,O),iv(s)?s.forEach(function(Ee){O.add($n(Ee,l,p,Ee,s,I))}):nv(s)&&s.forEach(function(Ee,Ue){O.set(Ue,$n(Ee,l,p,Ue,s,I))});var Ce=Z?H?sd:od:H?gn:At,Le=ee?n:Ce(s);return Dn(Le||s,function(Ee,Ue){Le&&(Ue=Ee,Ee=s[Ue]),Gs(O,Ue,$n(Ee,l,p,Ue,s,I))}),O}function vA(s){var l=At(s);return function(p){return W1(p,s,l)}}function W1(s,l,p){var v=p.length;if(s==null)return!v;for(s=Je(s);v--;){var E=p[v],I=l[E],O=s[E];if(O===n&&!(E in s)||!I(O))return!1}return!0}function z1(s,l,p){if(typeof s!="function")throw new On(a);return js(function(){s.apply(n,p)},l)}function Vs(s,l,p,v){var E=-1,I=Pu,O=!0,z=s.length,H=[],Z=l.length;if(!z)return H;p&&(l=ut(l,Cn(p))),v?(I=Sh,O=!1):l.length>=i&&(I=$s,O=!1,l=new Ai(l));e:for(;++E<z;){var ee=s[E],re=p==null?ee:p(ee);if(ee=v||ee!==0?ee:0,O&&re===re){for(var fe=Z;fe--;)if(l[fe]===re)continue e;H.push(ee)}else I(l,re,v)||H.push(ee)}return H}var ei=gm(ur),G1=gm(zh,!0);function yA(s,l){var p=!0;return ei(s,function(v,E,I){return p=!!l(v,E,I),p}),p}function ju(s,l,p){for(var v=-1,E=s.length;++v<E;){var I=s[v],O=l(I);if(O!=null&&(z===n?O===O&&!Sn(O):p(O,z)))var z=O,H=I}return H}function bA(s,l,p,v){var E=s.length;for(p=Oe(p),p<0&&(p=-p>E?0:E+p),v=v===n||v>E?E:Oe(v),v<0&&(v+=E),v=p>v?0:sv(v);p<v;)s[p++]=l;return s}function V1(s,l){var p=[];return ei(s,function(v,E,I){l(v,E,I)&&p.push(v)}),p}function $t(s,l,p,v,E){var I=-1,O=s.length;for(p||(p=u5),E||(E=[]);++I<O;){var z=s[I];l>0&&p(z)?l>1?$t(z,l-1,p,v,E):Qr(E,z):v||(E[E.length]=z)}return E}var Wh=_m(),H1=_m(!0);function ur(s,l){return s&&Wh(s,l,At)}function zh(s,l){return s&&H1(s,l,At)}function Qu(s,l){return jr(l,function(p){return Mr(s[p])})}function Ii(s,l){l=ni(l,s);for(var p=0,v=l.length;s!=null&&p<v;)s=s[cr(l[p++])];return p&&p==v?s:n}function q1(s,l,p){var v=l(s);return Pe(s)?v:Qr(v,p(s))}function Xt(s){return s==null?s===n?Xr:Ie:Ei&&Ei in Je(s)?n5(s):g5(s)}function Gh(s,l){return s>l}function wA(s,l){return s!=null&&Qe.call(s,l)}function xA(s,l){return s!=null&&l in Je(s)}function TA(s,l,p){return s>=Bt(l,p)&&s<Tt(l,p)}function Vh(s,l,p){for(var v=p?Sh:Pu,E=s[0].length,I=s.length,O=I,z=K(I),H=1/0,Z=[];O--;){var ee=s[O];O&&l&&(ee=ut(ee,Cn(l))),H=Bt(ee.length,H),z[O]=!p&&(l||E>=120&&ee.length>=120)?new Ai(O&&ee):n}ee=s[0];var re=-1,fe=z[0];e:for(;++re<E&&Z.length<H;){var me=ee[re],Ce=l?l(me):me;if(me=p||me!==0?me:0,!(fe?$s(fe,Ce):v(Z,Ce,p))){for(O=I;--O;){var Le=z[O];if(!(Le?$s(Le,Ce):v(s[O],Ce,p)))continue e}fe&&fe.push(Ce),Z.push(me)}}return Z}function CA(s,l,p,v){return ur(s,function(E,I,O){l(v,p(E),I,O)}),v}function Hs(s,l,p){l=ni(l,s),s=km(s,l);var v=s==null?s:s[cr(Bn(l))];return v==null?n:Tn(v,s,p)}function Y1(s){return pt(s)&&Xt(s)==oe}function EA(s){return pt(s)&&Xt(s)==Ls}function SA(s){return pt(s)&&Xt(s)==ne}function qs(s,l,p,v,E){return s===l?!0:s==null||l==null||!pt(s)&&!pt(l)?s!==s&&l!==l:AA(s,l,p,v,qs,E)}function AA(s,l,p,v,E,I){var O=Pe(s),z=Pe(l),H=O?pe:Ut(s),Z=z?pe:Ut(l);H=H==oe?ue:H,Z=Z==oe?ue:Z;var ee=H==ue,re=Z==ue,fe=H==Z;if(fe&&ii(s)){if(!ii(l))return!1;O=!0,ee=!1}if(fe&&!ee)return I||(I=new Xn),O||Po(s)?Sm(s,l,p,v,E,I):e5(s,l,H,p,v,E,I);if(!(p&y)){var me=ee&&Qe.call(s,"__wrapped__"),Ce=re&&Qe.call(l,"__wrapped__");if(me||Ce){var Le=me?s.value():s,Ee=Ce?l.value():l;return I||(I=new Xn),E(Le,Ee,p,v,I)}}return fe?(I||(I=new Xn),t5(s,l,p,v,E,I)):!1}function MA(s){return pt(s)&&Ut(s)==ye}function Hh(s,l,p,v){var E=p.length,I=E,O=!v;if(s==null)return!I;for(s=Je(s);E--;){var z=p[E];if(O&&z[2]?z[1]!==s[z[0]]:!(z[0]in s))return!1}for(;++E<I;){z=p[E];var H=z[0],Z=s[H],ee=z[1];if(O&&z[2]){if(Z===n&&!(H in s))return!1}else{var re=new Xn;if(v)var fe=v(Z,ee,H,s,l,re);if(!(fe===n?qs(ee,Z,y|w,v,re):fe))return!1}}return!0}function K1(s){if(!ct(s)||c5(s))return!1;var l=Mr(s)?M6:vS;return l.test(Ni(s))}function IA(s){return pt(s)&&Xt(s)==Xe}function RA(s){return pt(s)&&Ut(s)==lt}function NA(s){return pt(s)&&pl(s.length)&&!!ot[Xt(s)]}function X1(s){return typeof s=="function"?s:s==null?_n:typeof s=="object"?Pe(s)?J1(s[0],s[1]):Q1(s):mv(s)}function qh(s){if(!Xs(s))return D6(s);var l=[];for(var p in Je(s))Qe.call(s,p)&&p!="constructor"&&l.push(p);return l}function PA(s){if(!ct(s))return p5(s);var l=Xs(s),p=[];for(var v in s)v=="constructor"&&(l||!Qe.call(s,v))||p.push(v);return p}function Yh(s,l){return s<l}function j1(s,l){var p=-1,v=pn(s)?K(s.length):[];return ei(s,function(E,I,O){v[++p]=l(E,I,O)}),v}function Q1(s){var l=ud(s);return l.length==1&&l[0][2]?Nm(l[0][0],l[0][1]):function(p){return p===s||Hh(p,s,l)}}function J1(s,l){return cd(s)&&Rm(l)?Nm(cr(s),l):function(p){var v=bd(p,s);return v===n&&v===l?wd(p,s):qs(l,v,y|w)}}function Ju(s,l,p,v,E){s!==l&&Wh(l,function(I,O){if(E||(E=new Xn),ct(I))kA(s,l,O,p,Ju,v,E);else{var z=v?v(hd(s,O),I,O+"",s,l,E):n;z===n&&(z=I),Bh(s,O,z)}},gn)}function kA(s,l,p,v,E,I,O){var z=hd(s,p),H=hd(l,p),Z=O.get(H);if(Z){Bh(s,p,Z);return}var ee=I?I(z,H,p+"",s,l,O):n,re=ee===n;if(re){var fe=Pe(H),me=!fe&&ii(H),Ce=!fe&&!me&&Po(H);ee=H,fe||me||Ce?Pe(z)?ee=z:vt(z)?ee=dn(z):me?(re=!1,ee=cm(H,!0)):Ce?(re=!1,ee=fm(H,!0)):ee=[]:Qs(H)||Pi(H)?(ee=z,Pi(z)?ee=av(z):(!ct(z)||Mr(z))&&(ee=Im(H))):re=!1}re&&(O.set(H,ee),E(ee,H,v,I,O),O.delete(H)),Bh(s,p,ee)}function Z1(s,l){var p=s.length;if(p)return l+=l<0?p:0,Ar(l,p)?s[l]:n}function em(s,l,p){l.length?l=ut(l,function(I){return Pe(I)?function(O){return Ii(O,I.length===1?I[0]:I)}:I}):l=[_n];var v=-1;l=ut(l,Cn(Te()));var E=j1(s,function(I,O,z){var H=ut(l,function(Z){return Z(I)});return{criteria:H,index:++v,value:I}});return s6(E,function(I,O){return qA(I,O,p)})}function DA(s,l){return tm(s,l,function(p,v){return wd(s,v)})}function tm(s,l,p){for(var v=-1,E=l.length,I={};++v<E;){var O=l[v],z=Ii(s,O);p(z,O)&&Ys(I,ni(O,s),z)}return I}function OA(s){return function(l){return Ii(l,s)}}function Kh(s,l,p,v){var E=v?o6:wo,I=-1,O=l.length,z=s;for(s===l&&(l=dn(l)),p&&(z=ut(s,Cn(p)));++I<O;)for(var H=0,Z=l[I],ee=p?p(Z):Z;(H=E(z,ee,H,v))>-1;)z!==s&&zu.call(z,H,1),zu.call(s,H,1);return s}function nm(s,l){for(var p=s?l.length:0,v=p-1;p--;){var E=l[p];if(p==v||E!==I){var I=E;Ar(E)?zu.call(s,E,1):Jh(s,E)}}return s}function Xh(s,l){return s+Hu(L1()*(l-s+1))}function LA(s,l,p,v){for(var E=-1,I=Tt(Vu((l-s)/(p||1)),0),O=K(I);I--;)O[v?I:++E]=s,s+=p;return O}function jh(s,l){var p="";if(!s||l<1||l>Y)return p;do l%2&&(p+=s),l=Hu(l/2),l&&(s+=s);while(l);return p}function $e(s,l){return dd(Pm(s,l,_n),s+"")}function $A(s){return B1(ko(s))}function FA(s,l){var p=ko(s);return ul(p,Mi(l,0,p.length))}function Ys(s,l,p,v){if(!ct(s))return s;l=ni(l,s);for(var E=-1,I=l.length,O=I-1,z=s;z!=null&&++E<I;){var H=cr(l[E]),Z=p;if(H==="__proto__"||H==="constructor"||H==="prototype")return s;if(E!=O){var ee=z[H];Z=v?v(ee,H,z):n,Z===n&&(Z=ct(ee)?ee:Ar(l[E+1])?[]:{})}Gs(z,H,Z),z=z[H]}return s}var rm=qu?function(s,l){return qu.set(s,l),s}:_n,BA=Gu?function(s,l){return Gu(s,"toString",{configurable:!0,enumerable:!1,value:Td(l),writable:!0})}:_n;function UA(s){return ul(ko(s))}function Fn(s,l,p){var v=-1,E=s.length;l<0&&(l=-l>E?0:E+l),p=p>E?E:p,p<0&&(p+=E),E=l>p?0:p-l>>>0,l>>>=0;for(var I=K(E);++v<E;)I[v]=s[v+l];return I}function WA(s,l){var p;return ei(s,function(v,E,I){return p=l(v,E,I),!p}),!!p}function Zu(s,l,p){var v=0,E=s==null?v:s.length;if(typeof l=="number"&&l===l&&E<=J){for(;v<E;){var I=v+E>>>1,O=s[I];O!==null&&!Sn(O)&&(p?O<=l:O<l)?v=I+1:E=I}return E}return Qh(s,l,_n,p)}function Qh(s,l,p,v){var E=0,I=s==null?0:s.length;if(I===0)return 0;l=p(l);for(var O=l!==l,z=l===null,H=Sn(l),Z=l===n;E<I;){var ee=Hu((E+I)/2),re=p(s[ee]),fe=re!==n,me=re===null,Ce=re===re,Le=Sn(re);if(O)var Ee=v||Ce;else Z?Ee=Ce&&(v||fe):z?Ee=Ce&&fe&&(v||!me):H?Ee=Ce&&fe&&!me&&(v||!Le):me||Le?Ee=!1:Ee=v?re<=l:re<l;Ee?E=ee+1:I=ee}return Bt(I,X)}function im(s,l){for(var p=-1,v=s.length,E=0,I=[];++p<v;){var O=s[p],z=l?l(O):O;if(!p||!jn(z,H)){var H=z;I[E++]=O===0?0:O}}return I}function om(s){return typeof s=="number"?s:Sn(s)?B:+s}function En(s){if(typeof s=="string")return s;if(Pe(s))return ut(s,En)+"";if(Sn(s))return $1?$1.call(s):"";var l=s+"";return l=="0"&&1/s==-q?"-0":l}function ti(s,l,p){var v=-1,E=Pu,I=s.length,O=!0,z=[],H=z;if(p)O=!1,E=Sh;else if(I>=i){var Z=l?null:JA(s);if(Z)return Du(Z);O=!1,E=$s,H=new Ai}else H=l?[]:z;e:for(;++v<I;){var ee=s[v],re=l?l(ee):ee;if(ee=p||ee!==0?ee:0,O&&re===re){for(var fe=H.length;fe--;)if(H[fe]===re)continue e;l&&H.push(re),z.push(ee)}else E(H,re,p)||(H!==z&&H.push(re),z.push(ee))}return z}function Jh(s,l){return l=ni(l,s),s=km(s,l),s==null||delete s[cr(Bn(l))]}function sm(s,l,p,v){return Ys(s,l,p(Ii(s,l)),v)}function el(s,l,p,v){for(var E=s.length,I=v?E:-1;(v?I--:++I<E)&&l(s[I],I,s););return p?Fn(s,v?0:I,v?I+1:E):Fn(s,v?I+1:0,v?E:I)}function am(s,l){var p=s;return p instanceof Ge&&(p=p.value()),Ah(l,function(v,E){return E.func.apply(E.thisArg,Qr([v],E.args))},p)}function Zh(s,l,p){var v=s.length;if(v<2)return v?ti(s[0]):[];for(var E=-1,I=K(v);++E<v;)for(var O=s[E],z=-1;++z<v;)z!=E&&(I[E]=Vs(I[E]||O,s[z],l,p));return ti($t(I,1),l,p)}function um(s,l,p){for(var v=-1,E=s.length,I=l.length,O={};++v<E;){var z=v<I?l[v]:n;p(O,s[v],z)}return O}function ed(s){return vt(s)?s:[]}function td(s){return typeof s=="function"?s:_n}function ni(s,l){return Pe(s)?s:cd(s,l)?[s]:$m(je(s))}var zA=$e;function ri(s,l,p){var v=s.length;return p=p===n?v:p,!l&&p>=v?s:Fn(s,l,p)}var lm=I6||function(s){return Lt.clearTimeout(s)};function cm(s,l){if(l)return s.slice();var p=s.length,v=N1?N1(p):new s.constructor(p);return s.copy(v),v}function nd(s){var l=new s.constructor(s.byteLength);return new Uu(l).set(new Uu(s)),l}function GA(s,l){var p=l?nd(s.buffer):s.buffer;return new s.constructor(p,s.byteOffset,s.byteLength)}function VA(s){var l=new s.constructor(s.source,Y_.exec(s));return l.lastIndex=s.lastIndex,l}function HA(s){return zs?Je(zs.call(s)):{}}function fm(s,l){var p=l?nd(s.buffer):s.buffer;return new s.constructor(p,s.byteOffset,s.length)}function hm(s,l){if(s!==l){var p=s!==n,v=s===null,E=s===s,I=Sn(s),O=l!==n,z=l===null,H=l===l,Z=Sn(l);if(!z&&!Z&&!I&&s>l||I&&O&&H&&!z&&!Z||v&&O&&H||!p&&H||!E)return 1;if(!v&&!I&&!Z&&s<l||Z&&p&&E&&!v&&!I||z&&p&&E||!O&&E||!H)return-1}return 0}function qA(s,l,p){for(var v=-1,E=s.criteria,I=l.criteria,O=E.length,z=p.length;++v<O;){var H=hm(E[v],I[v]);if(H){if(v>=z)return H;var Z=p[v];return H*(Z=="desc"?-1:1)}}return s.index-l.index}function dm(s,l,p,v){for(var E=-1,I=s.length,O=p.length,z=-1,H=l.length,Z=Tt(I-O,0),ee=K(H+Z),re=!v;++z<H;)ee[z]=l[z];for(;++E<O;)(re||E<I)&&(ee[p[E]]=s[E]);for(;Z--;)ee[z++]=s[E++];return ee}function pm(s,l,p,v){for(var E=-1,I=s.length,O=-1,z=p.length,H=-1,Z=l.length,ee=Tt(I-z,0),re=K(ee+Z),fe=!v;++E<ee;)re[E]=s[E];for(var me=E;++H<Z;)re[me+H]=l[H];for(;++O<z;)(fe||E<I)&&(re[me+p[O]]=s[E++]);return re}function dn(s,l){var p=-1,v=s.length;for(l||(l=K(v));++p<v;)l[p]=s[p];return l}function lr(s,l,p,v){var E=!p;p||(p={});for(var I=-1,O=l.length;++I<O;){var z=l[I],H=v?v(p[z],s[z],z,p,s):n;H===n&&(H=s[z]),E?Cr(p,z,H):Gs(p,z,H)}return p}function YA(s,l){return lr(s,ld(s),l)}function KA(s,l){return lr(s,Am(s),l)}function tl(s,l){return function(p,v){var E=Pe(p)?ZS:_A,I=l?l():{};return E(p,s,Te(v,2),I)}}function Io(s){return $e(function(l,p){var v=-1,E=p.length,I=E>1?p[E-1]:n,O=E>2?p[2]:n;for(I=s.length>3&&typeof I=="function"?(E--,I):n,O&&jt(p[0],p[1],O)&&(I=E<3?n:I,E=1),l=Je(l);++v<E;){var z=p[v];z&&s(l,z,v,I)}return l})}function gm(s,l){return function(p,v){if(p==null)return p;if(!pn(p))return s(p,v);for(var E=p.length,I=l?E:-1,O=Je(p);(l?I--:++I<E)&&v(O[I],I,O)!==!1;);return p}}function _m(s){return function(l,p,v){for(var E=-1,I=Je(l),O=v(l),z=O.length;z--;){var H=O[s?z:++E];if(p(I[H],H,I)===!1)break}return l}}function XA(s,l,p){var v=l&m,E=Ks(s);function I(){var O=this&&this!==Lt&&this instanceof I?E:s;return O.apply(v?p:this,arguments)}return I}function mm(s){return function(l){l=je(l);var p=xo(l)?Kn(l):n,v=p?p[0]:l.charAt(0),E=p?ri(p,1).join(""):l.slice(1);return v[s]()+E}}function Ro(s){return function(l){return Ah(gv(pv(l).replace(BS,"")),s,"")}}function Ks(s){return function(){var l=arguments;switch(l.length){case 0:return new s;case 1:return new s(l[0]);case 2:return new s(l[0],l[1]);case 3:return new s(l[0],l[1],l[2]);case 4:return new s(l[0],l[1],l[2],l[3]);case 5:return new s(l[0],l[1],l[2],l[3],l[4]);case 6:return new s(l[0],l[1],l[2],l[3],l[4],l[5]);case 7:return new s(l[0],l[1],l[2],l[3],l[4],l[5],l[6])}var p=Mo(s.prototype),v=s.apply(p,l);return ct(v)?v:p}}function jA(s,l,p){var v=Ks(s);function E(){for(var I=arguments.length,O=K(I),z=I,H=No(E);z--;)O[z]=arguments[z];var Z=I<3&&O[0]!==H&&O[I-1]!==H?[]:Jr(O,H);if(I-=Z.length,I<p)return xm(s,l,nl,E.placeholder,n,O,Z,n,n,p-I);var ee=this&&this!==Lt&&this instanceof E?v:s;return Tn(ee,this,O)}return E}function vm(s){return function(l,p,v){var E=Je(l);if(!pn(l)){var I=Te(p,3);l=At(l),p=function(z){return I(E[z],z,E)}}var O=s(l,p,v);return O>-1?E[I?l[O]:O]:n}}function ym(s){return Sr(function(l){var p=l.length,v=p,E=Ln.prototype.thru;for(s&&l.reverse();v--;){var I=l[v];if(typeof I!="function")throw new On(a);if(E&&!O&&sl(I)=="wrapper")var O=new Ln([],!0)}for(v=O?v:p;++v<p;){I=l[v];var z=sl(I),H=z=="wrapper"?ad(I):n;H&&fd(H[0])&&H[1]==(D|T|S|$)&&!H[4].length&&H[9]==1?O=O[sl(H[0])].apply(O,H[3]):O=I.length==1&&fd(I)?O[z]():O.thru(I)}return function(){var Z=arguments,ee=Z[0];if(O&&Z.length==1&&Pe(ee))return O.plant(ee).value();for(var re=0,fe=p?l[re].apply(this,Z):ee;++re<p;)fe=l[re].call(this,fe);return fe}})}function nl(s,l,p,v,E,I,O,z,H,Z){var ee=l&D,re=l&m,fe=l&b,me=l&(T|x),Ce=l&F,Le=fe?n:Ks(s);function Ee(){for(var Ue=arguments.length,He=K(Ue),An=Ue;An--;)He[An]=arguments[An];if(me)var Qt=No(Ee),Mn=u6(He,Qt);if(v&&(He=dm(He,v,E,me)),I&&(He=pm(He,I,O,me)),Ue-=Mn,me&&Ue<Z){var yt=Jr(He,Qt);return xm(s,l,nl,Ee.placeholder,p,He,yt,z,H,Z-Ue)}var Qn=re?p:this,Rr=fe?Qn[s]:s;return Ue=He.length,z?He=_5(He,z):Ce&&Ue>1&&He.reverse(),ee&&H<Ue&&(He.length=H),this&&this!==Lt&&this instanceof Ee&&(Rr=Le||Ks(Rr)),Rr.apply(Qn,He)}return Ee}function bm(s,l){return function(p,v){return CA(p,s,l(v),{})}}function rl(s,l){return function(p,v){var E;if(p===n&&v===n)return l;if(p!==n&&(E=p),v!==n){if(E===n)return v;typeof p=="string"||typeof v=="string"?(p=En(p),v=En(v)):(p=om(p),v=om(v)),E=s(p,v)}return E}}function rd(s){return Sr(function(l){return l=ut(l,Cn(Te())),$e(function(p){var v=this;return s(l,function(E){return Tn(E,v,p)})})})}function il(s,l){l=l===n?" ":En(l);var p=l.length;if(p<2)return p?jh(l,s):l;var v=jh(l,Vu(s/To(l)));return xo(l)?ri(Kn(v),0,s).join(""):v.slice(0,s)}function QA(s,l,p,v){var E=l&m,I=Ks(s);function O(){for(var z=-1,H=arguments.length,Z=-1,ee=v.length,re=K(ee+H),fe=this&&this!==Lt&&this instanceof O?I:s;++Z<ee;)re[Z]=v[Z];for(;H--;)re[Z++]=arguments[++z];return Tn(fe,E?p:this,re)}return O}function wm(s){return function(l,p,v){return v&&typeof v!="number"&&jt(l,p,v)&&(p=v=n),l=Ir(l),p===n?(p=l,l=0):p=Ir(p),v=v===n?l<p?1:-1:Ir(v),LA(l,p,v,s)}}function ol(s){return function(l,p){return typeof l=="string"&&typeof p=="string"||(l=Un(l),p=Un(p)),s(l,p)}}function xm(s,l,p,v,E,I,O,z,H,Z){var ee=l&T,re=ee?O:n,fe=ee?n:O,me=ee?I:n,Ce=ee?n:I;l|=ee?S:R,l&=~(ee?R:S),l&C||(l&=~(m|b));var Le=[s,l,E,me,re,Ce,fe,z,H,Z],Ee=p.apply(n,Le);return fd(s)&&Dm(Ee,Le),Ee.placeholder=v,Om(Ee,s,l)}function id(s){var l=xt[s];return function(p,v){if(p=Un(p),v=v==null?0:Bt(Oe(v),292),v&&O1(p)){var E=(je(p)+"e").split("e"),I=l(E[0]+"e"+(+E[1]+v));return E=(je(I)+"e").split("e"),+(E[0]+"e"+(+E[1]-v))}return l(p)}}var JA=So&&1/Du(new So([,-0]))[1]==q?function(s){return new So(s)}:Sd;function Tm(s){return function(l){var p=Ut(l);return p==ye?Dh(l):p==lt?g6(l):a6(l,s(l))}}function Er(s,l,p,v,E,I,O,z){var H=l&b;if(!H&&typeof s!="function")throw new On(a);var Z=v?v.length:0;if(Z||(l&=~(S|R),v=E=n),O=O===n?O:Tt(Oe(O),0),z=z===n?z:Oe(z),Z-=E?E.length:0,l&R){var ee=v,re=E;v=E=n}var fe=H?n:ad(s),me=[s,l,p,v,E,ee,re,I,O,z];if(fe&&d5(me,fe),s=me[0],l=me[1],p=me[2],v=me[3],E=me[4],z=me[9]=me[9]===n?H?0:s.length:Tt(me[9]-Z,0),!z&&l&(T|x)&&(l&=~(T|x)),!l||l==m)var Ce=XA(s,l,p);else l==T||l==x?Ce=jA(s,l,z):(l==S||l==(m|S))&&!E.length?Ce=QA(s,l,p,v):Ce=nl.apply(n,me);var Le=fe?rm:Dm;return Om(Le(Ce,me),s,l)}function Cm(s,l,p,v){return s===n||jn(s,Eo[p])&&!Qe.call(v,p)?l:s}function Em(s,l,p,v,E,I){return ct(s)&&ct(l)&&(I.set(l,s),Ju(s,l,n,Em,I),I.delete(l)),s}function ZA(s){return Qs(s)?n:s}function Sm(s,l,p,v,E,I){var O=p&y,z=s.length,H=l.length;if(z!=H&&!(O&&H>z))return!1;var Z=I.get(s),ee=I.get(l);if(Z&&ee)return Z==l&&ee==s;var re=-1,fe=!0,me=p&w?new Ai:n;for(I.set(s,l),I.set(l,s);++re<z;){var Ce=s[re],Le=l[re];if(v)var Ee=O?v(Le,Ce,re,l,s,I):v(Ce,Le,re,s,l,I);if(Ee!==n){if(Ee)continue;fe=!1;break}if(me){if(!Mh(l,function(Ue,He){if(!$s(me,He)&&(Ce===Ue||E(Ce,Ue,p,v,I)))return me.push(He)})){fe=!1;break}}else if(!(Ce===Le||E(Ce,Le,p,v,I))){fe=!1;break}}return I.delete(s),I.delete(l),fe}function e5(s,l,p,v,E,I,O){switch(p){case yo:if(s.byteLength!=l.byteLength||s.byteOffset!=l.byteOffset)return!1;s=s.buffer,l=l.buffer;case Ls:return!(s.byteLength!=l.byteLength||!I(new Uu(s),new Uu(l)));case _e:case ne:case Me:return jn(+s,+l);case ce:return s.name==l.name&&s.message==l.message;case Xe:case cn:return s==l+"";case ye:var z=Dh;case lt:var H=v&y;if(z||(z=Du),s.size!=l.size&&!H)return!1;var Z=O.get(s);if(Z)return Z==l;v|=w,O.set(s,l);var ee=Sm(z(s),z(l),v,E,I,O);return O.delete(s),ee;case fn:if(zs)return zs.call(s)==zs.call(l)}return!1}function t5(s,l,p,v,E,I){var O=p&y,z=od(s),H=z.length,Z=od(l),ee=Z.length;if(H!=ee&&!O)return!1;for(var re=H;re--;){var fe=z[re];if(!(O?fe in l:Qe.call(l,fe)))return!1}var me=I.get(s),Ce=I.get(l);if(me&&Ce)return me==l&&Ce==s;var Le=!0;I.set(s,l),I.set(l,s);for(var Ee=O;++re<H;){fe=z[re];var Ue=s[fe],He=l[fe];if(v)var An=O?v(He,Ue,fe,l,s,I):v(Ue,He,fe,s,l,I);if(!(An===n?Ue===He||E(Ue,He,p,v,I):An)){Le=!1;break}Ee||(Ee=fe=="constructor")}if(Le&&!Ee){var Qt=s.constructor,Mn=l.constructor;Qt!=Mn&&"constructor"in s&&"constructor"in l&&!(typeof Qt=="function"&&Qt instanceof Qt&&typeof Mn=="function"&&Mn instanceof Mn)&&(Le=!1)}return I.delete(s),I.delete(l),Le}function Sr(s){return dd(Pm(s,n,Wm),s+"")}function od(s){return q1(s,At,ld)}function sd(s){return q1(s,gn,Am)}var ad=qu?function(s){return qu.get(s)}:Sd;function sl(s){for(var l=s.name+"",p=Ao[l],v=Qe.call(Ao,l)?p.length:0;v--;){var E=p[v],I=E.func;if(I==null||I==s)return E.name}return l}function No(s){var l=Qe.call(M,"placeholder")?M:s;return l.placeholder}function Te(){var s=M.iteratee||Cd;return s=s===Cd?X1:s,arguments.length?s(arguments[0],arguments[1]):s}function al(s,l){var p=s.__data__;return l5(l)?p[typeof l=="string"?"string":"hash"]:p.map}function ud(s){for(var l=At(s),p=l.length;p--;){var v=l[p],E=s[v];l[p]=[v,E,Rm(E)]}return l}function Ri(s,l){var p=h6(s,l);return K1(p)?p:n}function n5(s){var l=Qe.call(s,Ei),p=s[Ei];try{s[Ei]=n;var v=!0}catch{}var E=Fu.call(s);return v&&(l?s[Ei]=p:delete s[Ei]),E}var ld=Lh?function(s){return s==null?[]:(s=Je(s),jr(Lh(s),function(l){return k1.call(s,l)}))}:Ad,Am=Lh?function(s){for(var l=[];s;)Qr(l,ld(s)),s=Wu(s);return l}:Ad,Ut=Xt;($h&&Ut(new $h(new ArrayBuffer(1)))!=yo||Bs&&Ut(new Bs)!=ye||Fh&&Ut(Fh.resolve())!=be||So&&Ut(new So)!=lt||Us&&Ut(new Us)!=hn)&&(Ut=function(s){var l=Xt(s),p=l==ue?s.constructor:n,v=p?Ni(p):"";if(v)switch(v){case F6:return yo;case B6:return ye;case U6:return be;case W6:return lt;case z6:return hn}return l});function r5(s,l,p){for(var v=-1,E=p.length;++v<E;){var I=p[v],O=I.size;switch(I.type){case"drop":s+=O;break;case"dropRight":l-=O;break;case"take":l=Bt(l,s+O);break;case"takeRight":s=Tt(s,l-O);break}}return{start:s,end:l}}function i5(s){var l=s.match(cS);return l?l[1].split(fS):[]}function Mm(s,l,p){l=ni(l,s);for(var v=-1,E=l.length,I=!1;++v<E;){var O=cr(l[v]);if(!(I=s!=null&&p(s,O)))break;s=s[O]}return I||++v!=E?I:(E=s==null?0:s.length,!!E&&pl(E)&&Ar(O,E)&&(Pe(s)||Pi(s)))}function o5(s){var l=s.length,p=new s.constructor(l);return l&&typeof s[0]=="string"&&Qe.call(s,"index")&&(p.index=s.index,p.input=s.input),p}function Im(s){return typeof s.constructor=="function"&&!Xs(s)?Mo(Wu(s)):{}}function s5(s,l,p){var v=s.constructor;switch(l){case Ls:return nd(s);case _e:case ne:return new v(+s);case yo:return GA(s,p);case uh:case lh:case ch:case fh:case hh:case dh:case ph:case gh:case _h:return fm(s,p);case ye:return new v;case Me:case cn:return new v(s);case Xe:return VA(s);case lt:return new v;case fn:return HA(s)}}function a5(s,l){var p=l.length;if(!p)return s;var v=p-1;return l[v]=(p>1?"& ":"")+l[v],l=l.join(p>2?", ":" "),s.replace(lS,`{
/* [wrapped with `+l+`] */
`)}function u5(s){return Pe(s)||Pi(s)||!!(D1&&s&&s[D1])}function Ar(s,l){var p=typeof s;return l=l??Y,!!l&&(p=="number"||p!="symbol"&&bS.test(s))&&s>-1&&s%1==0&&s<l}function jt(s,l,p){if(!ct(p))return!1;var v=typeof l;return(v=="number"?pn(p)&&Ar(l,p.length):v=="string"&&l in p)?jn(p[l],s):!1}function cd(s,l){if(Pe(s))return!1;var p=typeof s;return p=="number"||p=="symbol"||p=="boolean"||s==null||Sn(s)?!0:oS.test(s)||!iS.test(s)||l!=null&&s in Je(l)}function l5(s){var l=typeof s;return l=="string"||l=="number"||l=="symbol"||l=="boolean"?s!=="__proto__":s===null}function fd(s){var l=sl(s),p=M[l];if(typeof p!="function"||!(l in Ge.prototype))return!1;if(s===p)return!0;var v=ad(p);return!!v&&s===v[0]}function c5(s){return!!R1&&R1 in s}var f5=Lu?Mr:Md;function Xs(s){var l=s&&s.constructor,p=typeof l=="function"&&l.prototype||Eo;return s===p}function Rm(s){return s===s&&!ct(s)}function Nm(s,l){return function(p){return p==null?!1:p[s]===l&&(l!==n||s in Je(p))}}function h5(s){var l=hl(s,function(v){return p.size===f&&p.clear(),v}),p=l.cache;return l}function d5(s,l){var p=s[1],v=l[1],E=p|v,I=E<(m|b|D),O=v==D&&p==T||v==D&&p==$&&s[7].length<=l[8]||v==(D|$)&&l[7].length<=l[8]&&p==T;if(!(I||O))return s;v&m&&(s[2]=l[2],E|=p&m?0:C);var z=l[3];if(z){var H=s[3];s[3]=H?dm(H,z,l[4]):z,s[4]=H?Jr(s[3],h):l[4]}return z=l[5],z&&(H=s[5],s[5]=H?pm(H,z,l[6]):z,s[6]=H?Jr(s[5],h):l[6]),z=l[7],z&&(s[7]=z),v&D&&(s[8]=s[8]==null?l[8]:Bt(s[8],l[8])),s[9]==null&&(s[9]=l[9]),s[0]=l[0],s[1]=E,s}function p5(s){var l=[];if(s!=null)for(var p in Je(s))l.push(p);return l}function g5(s){return Fu.call(s)}function Pm(s,l,p){return l=Tt(l===n?s.length-1:l,0),function(){for(var v=arguments,E=-1,I=Tt(v.length-l,0),O=K(I);++E<I;)O[E]=v[l+E];E=-1;for(var z=K(l+1);++E<l;)z[E]=v[E];return z[l]=p(O),Tn(s,this,z)}}function km(s,l){return l.length<2?s:Ii(s,Fn(l,0,-1))}function _5(s,l){for(var p=s.length,v=Bt(l.length,p),E=dn(s);v--;){var I=l[v];s[v]=Ar(I,p)?E[I]:n}return s}function hd(s,l){if(!(l==="constructor"&&typeof s[l]=="function")&&l!="__proto__")return s[l]}var Dm=Lm(rm),js=N6||function(s,l){return Lt.setTimeout(s,l)},dd=Lm(BA);function Om(s,l,p){var v=l+"";return dd(s,a5(v,m5(i5(v),p)))}function Lm(s){var l=0,p=0;return function(){var v=O6(),E=k-(v-p);if(p=v,E>0){if(++l>=W)return arguments[0]}else l=0;return s.apply(n,arguments)}}function ul(s,l){var p=-1,v=s.length,E=v-1;for(l=l===n?v:l;++p<l;){var I=Xh(p,E),O=s[I];s[I]=s[p],s[p]=O}return s.length=l,s}var $m=h5(function(s){var l=[];return s.charCodeAt(0)===46&&l.push(""),s.replace(sS,function(p,v,E,I){l.push(E?I.replace(pS,"$1"):v||p)}),l});function cr(s){if(typeof s=="string"||Sn(s))return s;var l=s+"";return l=="0"&&1/s==-q?"-0":l}function Ni(s){if(s!=null){try{return $u.call(s)}catch{}try{return s+""}catch{}}return""}function m5(s,l){return Dn(ie,function(p){var v="_."+p[0];l&p[1]&&!Pu(s,v)&&s.push(v)}),s.sort()}function Fm(s){if(s instanceof Ge)return s.clone();var l=new Ln(s.__wrapped__,s.__chain__);return l.__actions__=dn(s.__actions__),l.__index__=s.__index__,l.__values__=s.__values__,l}function v5(s,l,p){(p?jt(s,l,p):l===n)?l=1:l=Tt(Oe(l),0);var v=s==null?0:s.length;if(!v||l<1)return[];for(var E=0,I=0,O=K(Vu(v/l));E<v;)O[I++]=Fn(s,E,E+=l);return O}function y5(s){for(var l=-1,p=s==null?0:s.length,v=0,E=[];++l<p;){var I=s[l];I&&(E[v++]=I)}return E}function b5(){var s=arguments.length;if(!s)return[];for(var l=K(s-1),p=arguments[0],v=s;v--;)l[v-1]=arguments[v];return Qr(Pe(p)?dn(p):[p],$t(l,1))}var w5=$e(function(s,l){return vt(s)?Vs(s,$t(l,1,vt,!0)):[]}),x5=$e(function(s,l){var p=Bn(l);return vt(p)&&(p=n),vt(s)?Vs(s,$t(l,1,vt,!0),Te(p,2)):[]}),T5=$e(function(s,l){var p=Bn(l);return vt(p)&&(p=n),vt(s)?Vs(s,$t(l,1,vt,!0),n,p):[]});function C5(s,l,p){var v=s==null?0:s.length;return v?(l=p||l===n?1:Oe(l),Fn(s,l<0?0:l,v)):[]}function E5(s,l,p){var v=s==null?0:s.length;return v?(l=p||l===n?1:Oe(l),l=v-l,Fn(s,0,l<0?0:l)):[]}function S5(s,l){return s&&s.length?el(s,Te(l,3),!0,!0):[]}function A5(s,l){return s&&s.length?el(s,Te(l,3),!0):[]}function M5(s,l,p,v){var E=s==null?0:s.length;return E?(p&&typeof p!="number"&&jt(s,l,p)&&(p=0,v=E),bA(s,l,p,v)):[]}function Bm(s,l,p){var v=s==null?0:s.length;if(!v)return-1;var E=p==null?0:Oe(p);return E<0&&(E=Tt(v+E,0)),ku(s,Te(l,3),E)}function Um(s,l,p){var v=s==null?0:s.length;if(!v)return-1;var E=v-1;return p!==n&&(E=Oe(p),E=p<0?Tt(v+E,0):Bt(E,v-1)),ku(s,Te(l,3),E,!0)}function Wm(s){var l=s==null?0:s.length;return l?$t(s,1):[]}function I5(s){var l=s==null?0:s.length;return l?$t(s,q):[]}function R5(s,l){var p=s==null?0:s.length;return p?(l=l===n?1:Oe(l),$t(s,l)):[]}function N5(s){for(var l=-1,p=s==null?0:s.length,v={};++l<p;){var E=s[l];v[E[0]]=E[1]}return v}function zm(s){return s&&s.length?s[0]:n}function P5(s,l,p){var v=s==null?0:s.length;if(!v)return-1;var E=p==null?0:Oe(p);return E<0&&(E=Tt(v+E,0)),wo(s,l,E)}function k5(s){var l=s==null?0:s.length;return l?Fn(s,0,-1):[]}var D5=$e(function(s){var l=ut(s,ed);return l.length&&l[0]===s[0]?Vh(l):[]}),O5=$e(function(s){var l=Bn(s),p=ut(s,ed);return l===Bn(p)?l=n:p.pop(),p.length&&p[0]===s[0]?Vh(p,Te(l,2)):[]}),L5=$e(function(s){var l=Bn(s),p=ut(s,ed);return l=typeof l=="function"?l:n,l&&p.pop(),p.length&&p[0]===s[0]?Vh(p,n,l):[]});function $5(s,l){return s==null?"":k6.call(s,l)}function Bn(s){var l=s==null?0:s.length;return l?s[l-1]:n}function F5(s,l,p){var v=s==null?0:s.length;if(!v)return-1;var E=v;return p!==n&&(E=Oe(p),E=E<0?Tt(v+E,0):Bt(E,v-1)),l===l?m6(s,l,E):ku(s,x1,E,!0)}function B5(s,l){return s&&s.length?Z1(s,Oe(l)):n}var U5=$e(Gm);function Gm(s,l){return s&&s.length&&l&&l.length?Kh(s,l):s}function W5(s,l,p){return s&&s.length&&l&&l.length?Kh(s,l,Te(p,2)):s}function z5(s,l,p){return s&&s.length&&l&&l.length?Kh(s,l,n,p):s}var G5=Sr(function(s,l){var p=s==null?0:s.length,v=Uh(s,l);return nm(s,ut(l,function(E){return Ar(E,p)?+E:E}).sort(hm)),v});function V5(s,l){var p=[];if(!(s&&s.length))return p;var v=-1,E=[],I=s.length;for(l=Te(l,3);++v<I;){var O=s[v];l(O,v,s)&&(p.push(O),E.push(v))}return nm(s,E),p}function pd(s){return s==null?s:$6.call(s)}function H5(s,l,p){var v=s==null?0:s.length;return v?(p&&typeof p!="number"&&jt(s,l,p)?(l=0,p=v):(l=l==null?0:Oe(l),p=p===n?v:Oe(p)),Fn(s,l,p)):[]}function q5(s,l){return Zu(s,l)}function Y5(s,l,p){return Qh(s,l,Te(p,2))}function K5(s,l){var p=s==null?0:s.length;if(p){var v=Zu(s,l);if(v<p&&jn(s[v],l))return v}return-1}function X5(s,l){return Zu(s,l,!0)}function j5(s,l,p){return Qh(s,l,Te(p,2),!0)}function Q5(s,l){var p=s==null?0:s.length;if(p){var v=Zu(s,l,!0)-1;if(jn(s[v],l))return v}return-1}function J5(s){return s&&s.length?im(s):[]}function Z5(s,l){return s&&s.length?im(s,Te(l,2)):[]}function eM(s){var l=s==null?0:s.length;return l?Fn(s,1,l):[]}function tM(s,l,p){return s&&s.length?(l=p||l===n?1:Oe(l),Fn(s,0,l<0?0:l)):[]}function nM(s,l,p){var v=s==null?0:s.length;return v?(l=p||l===n?1:Oe(l),l=v-l,Fn(s,l<0?0:l,v)):[]}function rM(s,l){return s&&s.length?el(s,Te(l,3),!1,!0):[]}function iM(s,l){return s&&s.length?el(s,Te(l,3)):[]}var oM=$e(function(s){return ti($t(s,1,vt,!0))}),sM=$e(function(s){var l=Bn(s);return vt(l)&&(l=n),ti($t(s,1,vt,!0),Te(l,2))}),aM=$e(function(s){var l=Bn(s);return l=typeof l=="function"?l:n,ti($t(s,1,vt,!0),n,l)});function uM(s){return s&&s.length?ti(s):[]}function lM(s,l){return s&&s.length?ti(s,Te(l,2)):[]}function cM(s,l){return l=typeof l=="function"?l:n,s&&s.length?ti(s,n,l):[]}function gd(s){if(!(s&&s.length))return[];var l=0;return s=jr(s,function(p){if(vt(p))return l=Tt(p.length,l),!0}),Ph(l,function(p){return ut(s,Ih(p))})}function Vm(s,l){if(!(s&&s.length))return[];var p=gd(s);return l==null?p:ut(p,function(v){return Tn(l,n,v)})}var fM=$e(function(s,l){return vt(s)?Vs(s,l):[]}),hM=$e(function(s){return Zh(jr(s,vt))}),dM=$e(function(s){var l=Bn(s);return vt(l)&&(l=n),Zh(jr(s,vt),Te(l,2))}),pM=$e(function(s){var l=Bn(s);return l=typeof l=="function"?l:n,Zh(jr(s,vt),n,l)}),gM=$e(gd);function _M(s,l){return um(s||[],l||[],Gs)}function mM(s,l){return um(s||[],l||[],Ys)}var vM=$e(function(s){var l=s.length,p=l>1?s[l-1]:n;return p=typeof p=="function"?(s.pop(),p):n,Vm(s,p)});function Hm(s){var l=M(s);return l.__chain__=!0,l}function yM(s,l){return l(s),s}function ll(s,l){return l(s)}var bM=Sr(function(s){var l=s.length,p=l?s[0]:0,v=this.__wrapped__,E=function(I){return Uh(I,s)};return l>1||this.__actions__.length||!(v instanceof Ge)||!Ar(p)?this.thru(E):(v=v.slice(p,+p+(l?1:0)),v.__actions__.push({func:ll,args:[E],thisArg:n}),new Ln(v,this.__chain__).thru(function(I){return l&&!I.length&&I.push(n),I}))});function wM(){return Hm(this)}function xM(){return new Ln(this.value(),this.__chain__)}function TM(){this.__values__===n&&(this.__values__=ov(this.value()));var s=this.__index__>=this.__values__.length,l=s?n:this.__values__[this.__index__++];return{done:s,value:l}}function CM(){return this}function EM(s){for(var l,p=this;p instanceof Ku;){var v=Fm(p);v.__index__=0,v.__values__=n,l?E.__wrapped__=v:l=v;var E=v;p=p.__wrapped__}return E.__wrapped__=s,l}function SM(){var s=this.__wrapped__;if(s instanceof Ge){var l=s;return this.__actions__.length&&(l=new Ge(this)),l=l.reverse(),l.__actions__.push({func:ll,args:[pd],thisArg:n}),new Ln(l,this.__chain__)}return this.thru(pd)}function AM(){return am(this.__wrapped__,this.__actions__)}var MM=tl(function(s,l,p){Qe.call(s,p)?++s[p]:Cr(s,p,1)});function IM(s,l,p){var v=Pe(s)?b1:yA;return p&&jt(s,l,p)&&(l=n),v(s,Te(l,3))}function RM(s,l){var p=Pe(s)?jr:V1;return p(s,Te(l,3))}var NM=vm(Bm),PM=vm(Um);function kM(s,l){return $t(cl(s,l),1)}function DM(s,l){return $t(cl(s,l),q)}function OM(s,l,p){return p=p===n?1:Oe(p),$t(cl(s,l),p)}function qm(s,l){var p=Pe(s)?Dn:ei;return p(s,Te(l,3))}function Ym(s,l){var p=Pe(s)?e6:G1;return p(s,Te(l,3))}var LM=tl(function(s,l,p){Qe.call(s,p)?s[p].push(l):Cr(s,p,[l])});function $M(s,l,p,v){s=pn(s)?s:ko(s),p=p&&!v?Oe(p):0;var E=s.length;return p<0&&(p=Tt(E+p,0)),gl(s)?p<=E&&s.indexOf(l,p)>-1:!!E&&wo(s,l,p)>-1}var FM=$e(function(s,l,p){var v=-1,E=typeof l=="function",I=pn(s)?K(s.length):[];return ei(s,function(O){I[++v]=E?Tn(l,O,p):Hs(O,l,p)}),I}),BM=tl(function(s,l,p){Cr(s,p,l)});function cl(s,l){var p=Pe(s)?ut:j1;return p(s,Te(l,3))}function UM(s,l,p,v){return s==null?[]:(Pe(l)||(l=l==null?[]:[l]),p=v?n:p,Pe(p)||(p=p==null?[]:[p]),em(s,l,p))}var WM=tl(function(s,l,p){s[p?0:1].push(l)},function(){return[[],[]]});function zM(s,l,p){var v=Pe(s)?Ah:C1,E=arguments.length<3;return v(s,Te(l,4),p,E,ei)}function GM(s,l,p){var v=Pe(s)?t6:C1,E=arguments.length<3;return v(s,Te(l,4),p,E,G1)}function VM(s,l){var p=Pe(s)?jr:V1;return p(s,dl(Te(l,3)))}function HM(s){var l=Pe(s)?B1:$A;return l(s)}function qM(s,l,p){(p?jt(s,l,p):l===n)?l=1:l=Oe(l);var v=Pe(s)?pA:FA;return v(s,l)}function YM(s){var l=Pe(s)?gA:UA;return l(s)}function KM(s){if(s==null)return 0;if(pn(s))return gl(s)?To(s):s.length;var l=Ut(s);return l==ye||l==lt?s.size:qh(s).length}function XM(s,l,p){var v=Pe(s)?Mh:WA;return p&&jt(s,l,p)&&(l=n),v(s,Te(l,3))}var jM=$e(function(s,l){if(s==null)return[];var p=l.length;return p>1&&jt(s,l[0],l[1])?l=[]:p>2&&jt(l[0],l[1],l[2])&&(l=[l[0]]),em(s,$t(l,1),[])}),fl=R6||function(){return Lt.Date.now()};function QM(s,l){if(typeof l!="function")throw new On(a);return s=Oe(s),function(){if(--s<1)return l.apply(this,arguments)}}function Km(s,l,p){return l=p?n:l,l=s&&l==null?s.length:l,Er(s,D,n,n,n,n,l)}function Xm(s,l){var p;if(typeof l!="function")throw new On(a);return s=Oe(s),function(){return--s>0&&(p=l.apply(this,arguments)),s<=1&&(l=n),p}}var _d=$e(function(s,l,p){var v=m;if(p.length){var E=Jr(p,No(_d));v|=S}return Er(s,v,l,p,E)}),jm=$e(function(s,l,p){var v=m|b;if(p.length){var E=Jr(p,No(jm));v|=S}return Er(l,v,s,p,E)});function Qm(s,l,p){l=p?n:l;var v=Er(s,T,n,n,n,n,n,l);return v.placeholder=Qm.placeholder,v}function Jm(s,l,p){l=p?n:l;var v=Er(s,x,n,n,n,n,n,l);return v.placeholder=Jm.placeholder,v}function Zm(s,l,p){var v,E,I,O,z,H,Z=0,ee=!1,re=!1,fe=!0;if(typeof s!="function")throw new On(a);l=Un(l)||0,ct(p)&&(ee=!!p.leading,re="maxWait"in p,I=re?Tt(Un(p.maxWait)||0,l):I,fe="trailing"in p?!!p.trailing:fe);function me(yt){var Qn=v,Rr=E;return v=E=n,Z=yt,O=s.apply(Rr,Qn),O}function Ce(yt){return Z=yt,z=js(Ue,l),ee?me(yt):O}function Le(yt){var Qn=yt-H,Rr=yt-Z,vv=l-Qn;return re?Bt(vv,I-Rr):vv}function Ee(yt){var Qn=yt-H,Rr=yt-Z;return H===n||Qn>=l||Qn<0||re&&Rr>=I}function Ue(){var yt=fl();if(Ee(yt))return He(yt);z=js(Ue,Le(yt))}function He(yt){return z=n,fe&&v?me(yt):(v=E=n,O)}function An(){z!==n&&lm(z),Z=0,v=H=E=z=n}function Qt(){return z===n?O:He(fl())}function Mn(){var yt=fl(),Qn=Ee(yt);if(v=arguments,E=this,H=yt,Qn){if(z===n)return Ce(H);if(re)return lm(z),z=js(Ue,l),me(H)}return z===n&&(z=js(Ue,l)),O}return Mn.cancel=An,Mn.flush=Qt,Mn}var JM=$e(function(s,l){return z1(s,1,l)}),ZM=$e(function(s,l,p){return z1(s,Un(l)||0,p)});function e4(s){return Er(s,F)}function hl(s,l){if(typeof s!="function"||l!=null&&typeof l!="function")throw new On(a);var p=function(){var v=arguments,E=l?l.apply(this,v):v[0],I=p.cache;if(I.has(E))return I.get(E);var O=s.apply(this,v);return p.cache=I.set(E,O)||I,O};return p.cache=new(hl.Cache||Tr),p}hl.Cache=Tr;function dl(s){if(typeof s!="function")throw new On(a);return function(){var l=arguments;switch(l.length){case 0:return!s.call(this);case 1:return!s.call(this,l[0]);case 2:return!s.call(this,l[0],l[1]);case 3:return!s.call(this,l[0],l[1],l[2])}return!s.apply(this,l)}}function t4(s){return Xm(2,s)}var n4=zA(function(s,l){l=l.length==1&&Pe(l[0])?ut(l[0],Cn(Te())):ut($t(l,1),Cn(Te()));var p=l.length;return $e(function(v){for(var E=-1,I=Bt(v.length,p);++E<I;)v[E]=l[E].call(this,v[E]);return Tn(s,this,v)})}),md=$e(function(s,l){var p=Jr(l,No(md));return Er(s,S,n,l,p)}),ev=$e(function(s,l){var p=Jr(l,No(ev));return Er(s,R,n,l,p)}),r4=Sr(function(s,l){return Er(s,$,n,n,n,l)});function i4(s,l){if(typeof s!="function")throw new On(a);return l=l===n?l:Oe(l),$e(s,l)}function o4(s,l){if(typeof s!="function")throw new On(a);return l=l==null?0:Tt(Oe(l),0),$e(function(p){var v=p[l],E=ri(p,0,l);return v&&Qr(E,v),Tn(s,this,E)})}function s4(s,l,p){var v=!0,E=!0;if(typeof s!="function")throw new On(a);return ct(p)&&(v="leading"in p?!!p.leading:v,E="trailing"in p?!!p.trailing:E),Zm(s,l,{leading:v,maxWait:l,trailing:E})}function a4(s){return Km(s,1)}function u4(s,l){return md(td(l),s)}function l4(){if(!arguments.length)return[];var s=arguments[0];return Pe(s)?s:[s]}function c4(s){return $n(s,_)}function f4(s,l){return l=typeof l=="function"?l:n,$n(s,_,l)}function h4(s){return $n(s,g|_)}function d4(s,l){return l=typeof l=="function"?l:n,$n(s,g|_,l)}function p4(s,l){return l==null||W1(s,l,At(l))}function jn(s,l){return s===l||s!==s&&l!==l}var g4=ol(Gh),_4=ol(function(s,l){return s>=l}),Pi=Y1(function(){return arguments}())?Y1:function(s){return pt(s)&&Qe.call(s,"callee")&&!k1.call(s,"callee")},Pe=K.isArray,m4=p1?Cn(p1):EA;function pn(s){return s!=null&&pl(s.length)&&!Mr(s)}function vt(s){return pt(s)&&pn(s)}function v4(s){return s===!0||s===!1||pt(s)&&Xt(s)==_e}var ii=P6||Md,y4=g1?Cn(g1):SA;function b4(s){return pt(s)&&s.nodeType===1&&!Qs(s)}function w4(s){if(s==null)return!0;if(pn(s)&&(Pe(s)||typeof s=="string"||typeof s.splice=="function"||ii(s)||Po(s)||Pi(s)))return!s.length;var l=Ut(s);if(l==ye||l==lt)return!s.size;if(Xs(s))return!qh(s).length;for(var p in s)if(Qe.call(s,p))return!1;return!0}function x4(s,l){return qs(s,l)}function T4(s,l,p){p=typeof p=="function"?p:n;var v=p?p(s,l):n;return v===n?qs(s,l,n,p):!!v}function vd(s){if(!pt(s))return!1;var l=Xt(s);return l==ce||l==se||typeof s.message=="string"&&typeof s.name=="string"&&!Qs(s)}function C4(s){return typeof s=="number"&&O1(s)}function Mr(s){if(!ct(s))return!1;var l=Xt(s);return l==te||l==ge||l==le||l==bt}function tv(s){return typeof s=="number"&&s==Oe(s)}function pl(s){return typeof s=="number"&&s>-1&&s%1==0&&s<=Y}function ct(s){var l=typeof s;return s!=null&&(l=="object"||l=="function")}function pt(s){return s!=null&&typeof s=="object"}var nv=_1?Cn(_1):MA;function E4(s,l){return s===l||Hh(s,l,ud(l))}function S4(s,l,p){return p=typeof p=="function"?p:n,Hh(s,l,ud(l),p)}function A4(s){return rv(s)&&s!=+s}function M4(s){if(f5(s))throw new Ne(o);return K1(s)}function I4(s){return s===null}function R4(s){return s==null}function rv(s){return typeof s=="number"||pt(s)&&Xt(s)==Me}function Qs(s){if(!pt(s)||Xt(s)!=ue)return!1;var l=Wu(s);if(l===null)return!0;var p=Qe.call(l,"constructor")&&l.constructor;return typeof p=="function"&&p instanceof p&&$u.call(p)==S6}var yd=m1?Cn(m1):IA;function N4(s){return tv(s)&&s>=-Y&&s<=Y}var iv=v1?Cn(v1):RA;function gl(s){return typeof s=="string"||!Pe(s)&&pt(s)&&Xt(s)==cn}function Sn(s){return typeof s=="symbol"||pt(s)&&Xt(s)==fn}var Po=y1?Cn(y1):NA;function P4(s){return s===n}function k4(s){return pt(s)&&Ut(s)==hn}function D4(s){return pt(s)&&Xt(s)==vo}var O4=ol(Yh),L4=ol(function(s,l){return s<=l});function ov(s){if(!s)return[];if(pn(s))return gl(s)?Kn(s):dn(s);if(Fs&&s[Fs])return p6(s[Fs]());var l=Ut(s),p=l==ye?Dh:l==lt?Du:ko;return p(s)}function Ir(s){if(!s)return s===0?s:0;if(s=Un(s),s===q||s===-q){var l=s<0?-1:1;return l*j}return s===s?s:0}function Oe(s){var l=Ir(s),p=l%1;return l===l?p?l-p:l:0}function sv(s){return s?Mi(Oe(s),0,G):0}function Un(s){if(typeof s=="number")return s;if(Sn(s))return B;if(ct(s)){var l=typeof s.valueOf=="function"?s.valueOf():s;s=ct(l)?l+"":l}if(typeof s!="string")return s===0?s:+s;s=E1(s);var p=mS.test(s);return p||yS.test(s)?QS(s.slice(2),p?2:8):_S.test(s)?B:+s}function av(s){return lr(s,gn(s))}function $4(s){return s?Mi(Oe(s),-Y,Y):s===0?s:0}function je(s){return s==null?"":En(s)}var F4=Io(function(s,l){if(Xs(l)||pn(l)){lr(l,At(l),s);return}for(var p in l)Qe.call(l,p)&&Gs(s,p,l[p])}),uv=Io(function(s,l){lr(l,gn(l),s)}),_l=Io(function(s,l,p,v){lr(l,gn(l),s,v)}),B4=Io(function(s,l,p,v){lr(l,At(l),s,v)}),U4=Sr(Uh);function W4(s,l){var p=Mo(s);return l==null?p:U1(p,l)}var z4=$e(function(s,l){s=Je(s);var p=-1,v=l.length,E=v>2?l[2]:n;for(E&&jt(l[0],l[1],E)&&(v=1);++p<v;)for(var I=l[p],O=gn(I),z=-1,H=O.length;++z<H;){var Z=O[z],ee=s[Z];(ee===n||jn(ee,Eo[Z])&&!Qe.call(s,Z))&&(s[Z]=I[Z])}return s}),G4=$e(function(s){return s.push(n,Em),Tn(lv,n,s)});function V4(s,l){return w1(s,Te(l,3),ur)}function H4(s,l){return w1(s,Te(l,3),zh)}function q4(s,l){return s==null?s:Wh(s,Te(l,3),gn)}function Y4(s,l){return s==null?s:H1(s,Te(l,3),gn)}function K4(s,l){return s&&ur(s,Te(l,3))}function X4(s,l){return s&&zh(s,Te(l,3))}function j4(s){return s==null?[]:Qu(s,At(s))}function Q4(s){return s==null?[]:Qu(s,gn(s))}function bd(s,l,p){var v=s==null?n:Ii(s,l);return v===n?p:v}function J4(s,l){return s!=null&&Mm(s,l,wA)}function wd(s,l){return s!=null&&Mm(s,l,xA)}var Z4=bm(function(s,l,p){l!=null&&typeof l.toString!="function"&&(l=Fu.call(l)),s[l]=p},Td(_n)),e8=bm(function(s,l,p){l!=null&&typeof l.toString!="function"&&(l=Fu.call(l)),Qe.call(s,l)?s[l].push(p):s[l]=[p]},Te),t8=$e(Hs);function At(s){return pn(s)?F1(s):qh(s)}function gn(s){return pn(s)?F1(s,!0):PA(s)}function n8(s,l){var p={};return l=Te(l,3),ur(s,function(v,E,I){Cr(p,l(v,E,I),v)}),p}function r8(s,l){var p={};return l=Te(l,3),ur(s,function(v,E,I){Cr(p,E,l(v,E,I))}),p}var i8=Io(function(s,l,p){Ju(s,l,p)}),lv=Io(function(s,l,p,v){Ju(s,l,p,v)}),o8=Sr(function(s,l){var p={};if(s==null)return p;var v=!1;l=ut(l,function(I){return I=ni(I,s),v||(v=I.length>1),I}),lr(s,sd(s),p),v&&(p=$n(p,g|d|_,ZA));for(var E=l.length;E--;)Jh(p,l[E]);return p});function s8(s,l){return cv(s,dl(Te(l)))}var a8=Sr(function(s,l){return s==null?{}:DA(s,l)});function cv(s,l){if(s==null)return{};var p=ut(sd(s),function(v){return[v]});return l=Te(l),tm(s,p,function(v,E){return l(v,E[0])})}function u8(s,l,p){l=ni(l,s);var v=-1,E=l.length;for(E||(E=1,s=n);++v<E;){var I=s==null?n:s[cr(l[v])];I===n&&(v=E,I=p),s=Mr(I)?I.call(s):I}return s}function l8(s,l,p){return s==null?s:Ys(s,l,p)}function c8(s,l,p,v){return v=typeof v=="function"?v:n,s==null?s:Ys(s,l,p,v)}var fv=Tm(At),hv=Tm(gn);function f8(s,l,p){var v=Pe(s),E=v||ii(s)||Po(s);if(l=Te(l,4),p==null){var I=s&&s.constructor;E?p=v?new I:[]:ct(s)?p=Mr(I)?Mo(Wu(s)):{}:p={}}return(E?Dn:ur)(s,function(O,z,H){return l(p,O,z,H)}),p}function h8(s,l){return s==null?!0:Jh(s,l)}function d8(s,l,p){return s==null?s:sm(s,l,td(p))}function p8(s,l,p,v){return v=typeof v=="function"?v:n,s==null?s:sm(s,l,td(p),v)}function ko(s){return s==null?[]:kh(s,At(s))}function g8(s){return s==null?[]:kh(s,gn(s))}function _8(s,l,p){return p===n&&(p=l,l=n),p!==n&&(p=Un(p),p=p===p?p:0),l!==n&&(l=Un(l),l=l===l?l:0),Mi(Un(s),l,p)}function m8(s,l,p){return l=Ir(l),p===n?(p=l,l=0):p=Ir(p),s=Un(s),TA(s,l,p)}function v8(s,l,p){if(p&&typeof p!="boolean"&&jt(s,l,p)&&(l=p=n),p===n&&(typeof l=="boolean"?(p=l,l=n):typeof s=="boolean"&&(p=s,s=n)),s===n&&l===n?(s=0,l=1):(s=Ir(s),l===n?(l=s,s=0):l=Ir(l)),s>l){var v=s;s=l,l=v}if(p||s%1||l%1){var E=L1();return Bt(s+E*(l-s+jS("1e-"+((E+"").length-1))),l)}return Xh(s,l)}var y8=Ro(function(s,l,p){return l=l.toLowerCase(),s+(p?dv(l):l)});function dv(s){return xd(je(s).toLowerCase())}function pv(s){return s=je(s),s&&s.replace(wS,l6).replace(US,"")}function b8(s,l,p){s=je(s),l=En(l);var v=s.length;p=p===n?v:Mi(Oe(p),0,v);var E=p;return p-=l.length,p>=0&&s.slice(p,E)==l}function w8(s){return s=je(s),s&&tS.test(s)?s.replace(H_,c6):s}function x8(s){return s=je(s),s&&aS.test(s)?s.replace(mh,"\\$&"):s}var T8=Ro(function(s,l,p){return s+(p?"-":"")+l.toLowerCase()}),C8=Ro(function(s,l,p){return s+(p?" ":"")+l.toLowerCase()}),E8=mm("toLowerCase");function S8(s,l,p){s=je(s),l=Oe(l);var v=l?To(s):0;if(!l||v>=l)return s;var E=(l-v)/2;return il(Hu(E),p)+s+il(Vu(E),p)}function A8(s,l,p){s=je(s),l=Oe(l);var v=l?To(s):0;return l&&v<l?s+il(l-v,p):s}function M8(s,l,p){s=je(s),l=Oe(l);var v=l?To(s):0;return l&&v<l?il(l-v,p)+s:s}function I8(s,l,p){return p||l==null?l=0:l&&(l=+l),L6(je(s).replace(vh,""),l||0)}function R8(s,l,p){return(p?jt(s,l,p):l===n)?l=1:l=Oe(l),jh(je(s),l)}function N8(){var s=arguments,l=je(s[0]);return s.length<3?l:l.replace(s[1],s[2])}var P8=Ro(function(s,l,p){return s+(p?"_":"")+l.toLowerCase()});function k8(s,l,p){return p&&typeof p!="number"&&jt(s,l,p)&&(l=p=n),p=p===n?G:p>>>0,p?(s=je(s),s&&(typeof l=="string"||l!=null&&!yd(l))&&(l=En(l),!l&&xo(s))?ri(Kn(s),0,p):s.split(l,p)):[]}var D8=Ro(function(s,l,p){return s+(p?" ":"")+xd(l)});function O8(s,l,p){return s=je(s),p=p==null?0:Mi(Oe(p),0,s.length),l=En(l),s.slice(p,p+l.length)==l}function L8(s,l,p){var v=M.templateSettings;p&&jt(s,l,p)&&(l=n),s=je(s),l=_l({},l,v,Cm);var E=_l({},l.imports,v.imports,Cm),I=At(E),O=kh(E,I),z,H,Z=0,ee=l.interpolate||Iu,re="__p += '",fe=Oh((l.escape||Iu).source+"|"+ee.source+"|"+(ee===q_?gS:Iu).source+"|"+(l.evaluate||Iu).source+"|$","g"),me="//# sourceURL="+(Qe.call(l,"sourceURL")?(l.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++HS+"]")+`
`;s.replace(fe,function(Ee,Ue,He,An,Qt,Mn){return He||(He=An),re+=s.slice(Z,Mn).replace(xS,f6),Ue&&(z=!0,re+=`' +
__e(`+Ue+`) +
'`),Qt&&(H=!0,re+=`';
`+Qt+`;
__p += '`),He&&(re+=`' +
((__t = (`+He+`)) == null ? '' : __t) +
'`),Z=Mn+Ee.length,Ee}),re+=`';
`;var Ce=Qe.call(l,"variable")&&l.variable;if(!Ce)re=`with (obj) {
`+re+`
}
`;else if(dS.test(Ce))throw new Ne(u);re=(H?re.replace(Q3,""):re).replace(J3,"$1").replace(Z3,"$1;"),re="function("+(Ce||"obj")+`) {
`+(Ce?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(z?", __e = _.escape":"")+(H?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+re+`return __p
}`;var Le=_v(function(){return Ye(I,me+"return "+re).apply(n,O)});if(Le.source=re,vd(Le))throw Le;return Le}function $8(s){return je(s).toLowerCase()}function F8(s){return je(s).toUpperCase()}function B8(s,l,p){if(s=je(s),s&&(p||l===n))return E1(s);if(!s||!(l=En(l)))return s;var v=Kn(s),E=Kn(l),I=S1(v,E),O=A1(v,E)+1;return ri(v,I,O).join("")}function U8(s,l,p){if(s=je(s),s&&(p||l===n))return s.slice(0,I1(s)+1);if(!s||!(l=En(l)))return s;var v=Kn(s),E=A1(v,Kn(l))+1;return ri(v,0,E).join("")}function W8(s,l,p){if(s=je(s),s&&(p||l===n))return s.replace(vh,"");if(!s||!(l=En(l)))return s;var v=Kn(s),E=S1(v,Kn(l));return ri(v,E).join("")}function z8(s,l){var p=U,v=A;if(ct(l)){var E="separator"in l?l.separator:E;p="length"in l?Oe(l.length):p,v="omission"in l?En(l.omission):v}s=je(s);var I=s.length;if(xo(s)){var O=Kn(s);I=O.length}if(p>=I)return s;var z=p-To(v);if(z<1)return v;var H=O?ri(O,0,z).join(""):s.slice(0,z);if(E===n)return H+v;if(O&&(z+=H.length-z),yd(E)){if(s.slice(z).search(E)){var Z,ee=H;for(E.global||(E=Oh(E.source,je(Y_.exec(E))+"g")),E.lastIndex=0;Z=E.exec(ee);)var re=Z.index;H=H.slice(0,re===n?z:re)}}else if(s.indexOf(En(E),z)!=z){var fe=H.lastIndexOf(E);fe>-1&&(H=H.slice(0,fe))}return H+v}function G8(s){return s=je(s),s&&eS.test(s)?s.replace(V_,v6):s}var V8=Ro(function(s,l,p){return s+(p?" ":"")+l.toUpperCase()}),xd=mm("toUpperCase");function gv(s,l,p){return s=je(s),l=p?n:l,l===n?d6(s)?w6(s):i6(s):s.match(l)||[]}var _v=$e(function(s,l){try{return Tn(s,n,l)}catch(p){return vd(p)?p:new Ne(p)}}),H8=Sr(function(s,l){return Dn(l,function(p){p=cr(p),Cr(s,p,_d(s[p],s))}),s});function q8(s){var l=s==null?0:s.length,p=Te();return s=l?ut(s,function(v){if(typeof v[1]!="function")throw new On(a);return[p(v[0]),v[1]]}):[],$e(function(v){for(var E=-1;++E<l;){var I=s[E];if(Tn(I[0],this,v))return Tn(I[1],this,v)}})}function Y8(s){return vA($n(s,g))}function Td(s){return function(){return s}}function K8(s,l){return s==null||s!==s?l:s}var X8=ym(),j8=ym(!0);function _n(s){return s}function Cd(s){return X1(typeof s=="function"?s:$n(s,g))}function Q8(s){return Q1($n(s,g))}function J8(s,l){return J1(s,$n(l,g))}var Z8=$e(function(s,l){return function(p){return Hs(p,s,l)}}),eI=$e(function(s,l){return function(p){return Hs(s,p,l)}});function Ed(s,l,p){var v=At(l),E=Qu(l,v);p==null&&!(ct(l)&&(E.length||!v.length))&&(p=l,l=s,s=this,E=Qu(l,At(l)));var I=!(ct(p)&&"chain"in p)||!!p.chain,O=Mr(s);return Dn(E,function(z){var H=l[z];s[z]=H,O&&(s.prototype[z]=function(){var Z=this.__chain__;if(I||Z){var ee=s(this.__wrapped__),re=ee.__actions__=dn(this.__actions__);return re.push({func:H,args:arguments,thisArg:s}),ee.__chain__=Z,ee}return H.apply(s,Qr([this.value()],arguments))})}),s}function tI(){return Lt._===this&&(Lt._=A6),this}function Sd(){}function nI(s){return s=Oe(s),$e(function(l){return Z1(l,s)})}var rI=rd(ut),iI=rd(b1),oI=rd(Mh);function mv(s){return cd(s)?Ih(cr(s)):OA(s)}function sI(s){return function(l){return s==null?n:Ii(s,l)}}var aI=wm(),uI=wm(!0);function Ad(){return[]}function Md(){return!1}function lI(){return{}}function cI(){return""}function fI(){return!0}function hI(s,l){if(s=Oe(s),s<1||s>Y)return[];var p=G,v=Bt(s,G);l=Te(l),s-=G;for(var E=Ph(v,l);++p<s;)l(p);return E}function dI(s){return Pe(s)?ut(s,cr):Sn(s)?[s]:dn($m(je(s)))}function pI(s){var l=++E6;return je(s)+l}var gI=rl(function(s,l){return s+l},0),_I=id("ceil"),mI=rl(function(s,l){return s/l},1),vI=id("floor");function yI(s){return s&&s.length?ju(s,_n,Gh):n}function bI(s,l){return s&&s.length?ju(s,Te(l,2),Gh):n}function wI(s){return T1(s,_n)}function xI(s,l){return T1(s,Te(l,2))}function TI(s){return s&&s.length?ju(s,_n,Yh):n}function CI(s,l){return s&&s.length?ju(s,Te(l,2),Yh):n}var EI=rl(function(s,l){return s*l},1),SI=id("round"),AI=rl(function(s,l){return s-l},0);function MI(s){return s&&s.length?Nh(s,_n):0}function II(s,l){return s&&s.length?Nh(s,Te(l,2)):0}return M.after=QM,M.ary=Km,M.assign=F4,M.assignIn=uv,M.assignInWith=_l,M.assignWith=B4,M.at=U4,M.before=Xm,M.bind=_d,M.bindAll=H8,M.bindKey=jm,M.castArray=l4,M.chain=Hm,M.chunk=v5,M.compact=y5,M.concat=b5,M.cond=q8,M.conforms=Y8,M.constant=Td,M.countBy=MM,M.create=W4,M.curry=Qm,M.curryRight=Jm,M.debounce=Zm,M.defaults=z4,M.defaultsDeep=G4,M.defer=JM,M.delay=ZM,M.difference=w5,M.differenceBy=x5,M.differenceWith=T5,M.drop=C5,M.dropRight=E5,M.dropRightWhile=S5,M.dropWhile=A5,M.fill=M5,M.filter=RM,M.flatMap=kM,M.flatMapDeep=DM,M.flatMapDepth=OM,M.flatten=Wm,M.flattenDeep=I5,M.flattenDepth=R5,M.flip=e4,M.flow=X8,M.flowRight=j8,M.fromPairs=N5,M.functions=j4,M.functionsIn=Q4,M.groupBy=LM,M.initial=k5,M.intersection=D5,M.intersectionBy=O5,M.intersectionWith=L5,M.invert=Z4,M.invertBy=e8,M.invokeMap=FM,M.iteratee=Cd,M.keyBy=BM,M.keys=At,M.keysIn=gn,M.map=cl,M.mapKeys=n8,M.mapValues=r8,M.matches=Q8,M.matchesProperty=J8,M.memoize=hl,M.merge=i8,M.mergeWith=lv,M.method=Z8,M.methodOf=eI,M.mixin=Ed,M.negate=dl,M.nthArg=nI,M.omit=o8,M.omitBy=s8,M.once=t4,M.orderBy=UM,M.over=rI,M.overArgs=n4,M.overEvery=iI,M.overSome=oI,M.partial=md,M.partialRight=ev,M.partition=WM,M.pick=a8,M.pickBy=cv,M.property=mv,M.propertyOf=sI,M.pull=U5,M.pullAll=Gm,M.pullAllBy=W5,M.pullAllWith=z5,M.pullAt=G5,M.range=aI,M.rangeRight=uI,M.rearg=r4,M.reject=VM,M.remove=V5,M.rest=i4,M.reverse=pd,M.sampleSize=qM,M.set=l8,M.setWith=c8,M.shuffle=YM,M.slice=H5,M.sortBy=jM,M.sortedUniq=J5,M.sortedUniqBy=Z5,M.split=k8,M.spread=o4,M.tail=eM,M.take=tM,M.takeRight=nM,M.takeRightWhile=rM,M.takeWhile=iM,M.tap=yM,M.throttle=s4,M.thru=ll,M.toArray=ov,M.toPairs=fv,M.toPairsIn=hv,M.toPath=dI,M.toPlainObject=av,M.transform=f8,M.unary=a4,M.union=oM,M.unionBy=sM,M.unionWith=aM,M.uniq=uM,M.uniqBy=lM,M.uniqWith=cM,M.unset=h8,M.unzip=gd,M.unzipWith=Vm,M.update=d8,M.updateWith=p8,M.values=ko,M.valuesIn=g8,M.without=fM,M.words=gv,M.wrap=u4,M.xor=hM,M.xorBy=dM,M.xorWith=pM,M.zip=gM,M.zipObject=_M,M.zipObjectDeep=mM,M.zipWith=vM,M.entries=fv,M.entriesIn=hv,M.extend=uv,M.extendWith=_l,Ed(M,M),M.add=gI,M.attempt=_v,M.camelCase=y8,M.capitalize=dv,M.ceil=_I,M.clamp=_8,M.clone=c4,M.cloneDeep=h4,M.cloneDeepWith=d4,M.cloneWith=f4,M.conformsTo=p4,M.deburr=pv,M.defaultTo=K8,M.divide=mI,M.endsWith=b8,M.eq=jn,M.escape=w8,M.escapeRegExp=x8,M.every=IM,M.find=NM,M.findIndex=Bm,M.findKey=V4,M.findLast=PM,M.findLastIndex=Um,M.findLastKey=H4,M.floor=vI,M.forEach=qm,M.forEachRight=Ym,M.forIn=q4,M.forInRight=Y4,M.forOwn=K4,M.forOwnRight=X4,M.get=bd,M.gt=g4,M.gte=_4,M.has=J4,M.hasIn=wd,M.head=zm,M.identity=_n,M.includes=$M,M.indexOf=P5,M.inRange=m8,M.invoke=t8,M.isArguments=Pi,M.isArray=Pe,M.isArrayBuffer=m4,M.isArrayLike=pn,M.isArrayLikeObject=vt,M.isBoolean=v4,M.isBuffer=ii,M.isDate=y4,M.isElement=b4,M.isEmpty=w4,M.isEqual=x4,M.isEqualWith=T4,M.isError=vd,M.isFinite=C4,M.isFunction=Mr,M.isInteger=tv,M.isLength=pl,M.isMap=nv,M.isMatch=E4,M.isMatchWith=S4,M.isNaN=A4,M.isNative=M4,M.isNil=R4,M.isNull=I4,M.isNumber=rv,M.isObject=ct,M.isObjectLike=pt,M.isPlainObject=Qs,M.isRegExp=yd,M.isSafeInteger=N4,M.isSet=iv,M.isString=gl,M.isSymbol=Sn,M.isTypedArray=Po,M.isUndefined=P4,M.isWeakMap=k4,M.isWeakSet=D4,M.join=$5,M.kebabCase=T8,M.last=Bn,M.lastIndexOf=F5,M.lowerCase=C8,M.lowerFirst=E8,M.lt=O4,M.lte=L4,M.max=yI,M.maxBy=bI,M.mean=wI,M.meanBy=xI,M.min=TI,M.minBy=CI,M.stubArray=Ad,M.stubFalse=Md,M.stubObject=lI,M.stubString=cI,M.stubTrue=fI,M.multiply=EI,M.nth=B5,M.noConflict=tI,M.noop=Sd,M.now=fl,M.pad=S8,M.padEnd=A8,M.padStart=M8,M.parseInt=I8,M.random=v8,M.reduce=zM,M.reduceRight=GM,M.repeat=R8,M.replace=N8,M.result=u8,M.round=SI,M.runInContext=V,M.sample=HM,M.size=KM,M.snakeCase=P8,M.some=XM,M.sortedIndex=q5,M.sortedIndexBy=Y5,M.sortedIndexOf=K5,M.sortedLastIndex=X5,M.sortedLastIndexBy=j5,M.sortedLastIndexOf=Q5,M.startCase=D8,M.startsWith=O8,M.subtract=AI,M.sum=MI,M.sumBy=II,M.template=L8,M.times=hI,M.toFinite=Ir,M.toInteger=Oe,M.toLength=sv,M.toLower=$8,M.toNumber=Un,M.toSafeInteger=$4,M.toString=je,M.toUpper=F8,M.trim=B8,M.trimEnd=U8,M.trimStart=W8,M.truncate=z8,M.unescape=G8,M.uniqueId=pI,M.upperCase=V8,M.upperFirst=xd,M.each=qm,M.eachRight=Ym,M.first=zm,Ed(M,function(){var s={};return ur(M,function(l,p){Qe.call(M.prototype,p)||(s[p]=l)}),s}(),{chain:!1}),M.VERSION=r,Dn(["bind","bindKey","curry","curryRight","partial","partialRight"],function(s){M[s].placeholder=M}),Dn(["drop","take"],function(s,l){Ge.prototype[s]=function(p){p=p===n?1:Tt(Oe(p),0);var v=this.__filtered__&&!l?new Ge(this):this.clone();return v.__filtered__?v.__takeCount__=Bt(p,v.__takeCount__):v.__views__.push({size:Bt(p,G),type:s+(v.__dir__<0?"Right":"")}),v},Ge.prototype[s+"Right"]=function(p){return this.reverse()[s](p).reverse()}}),Dn(["filter","map","takeWhile"],function(s,l){var p=l+1,v=p==N||p==L;Ge.prototype[s]=function(E){var I=this.clone();return I.__iteratees__.push({iteratee:Te(E,3),type:p}),I.__filtered__=I.__filtered__||v,I}}),Dn(["head","last"],function(s,l){var p="take"+(l?"Right":"");Ge.prototype[s]=function(){return this[p](1).value()[0]}}),Dn(["initial","tail"],function(s,l){var p="drop"+(l?"":"Right");Ge.prototype[s]=function(){return this.__filtered__?new Ge(this):this[p](1)}}),Ge.prototype.compact=function(){return this.filter(_n)},Ge.prototype.find=function(s){return this.filter(s).head()},Ge.prototype.findLast=function(s){return this.reverse().find(s)},Ge.prototype.invokeMap=$e(function(s,l){return typeof s=="function"?new Ge(this):this.map(function(p){return Hs(p,s,l)})}),Ge.prototype.reject=function(s){return this.filter(dl(Te(s)))},Ge.prototype.slice=function(s,l){s=Oe(s);var p=this;return p.__filtered__&&(s>0||l<0)?new Ge(p):(s<0?p=p.takeRight(-s):s&&(p=p.drop(s)),l!==n&&(l=Oe(l),p=l<0?p.dropRight(-l):p.take(l-s)),p)},Ge.prototype.takeRightWhile=function(s){return this.reverse().takeWhile(s).reverse()},Ge.prototype.toArray=function(){return this.take(G)},ur(Ge.prototype,function(s,l){var p=/^(?:filter|find|map|reject)|While$/.test(l),v=/^(?:head|last)$/.test(l),E=M[v?"take"+(l=="last"?"Right":""):l],I=v||/^find/.test(l);E&&(M.prototype[l]=function(){var O=this.__wrapped__,z=v?[1]:arguments,H=O instanceof Ge,Z=z[0],ee=H||Pe(O),re=function(Ue){var He=E.apply(M,Qr([Ue],z));return v&&fe?He[0]:He};ee&&p&&typeof Z=="function"&&Z.length!=1&&(H=ee=!1);var fe=this.__chain__,me=!!this.__actions__.length,Ce=I&&!fe,Le=H&&!me;if(!I&&ee){O=Le?O:new Ge(this);var Ee=s.apply(O,z);return Ee.__actions__.push({func:ll,args:[re],thisArg:n}),new Ln(Ee,fe)}return Ce&&Le?s.apply(this,z):(Ee=this.thru(re),Ce?v?Ee.value()[0]:Ee.value():Ee)})}),Dn(["pop","push","shift","sort","splice","unshift"],function(s){var l=Ou[s],p=/^(?:push|sort|unshift)$/.test(s)?"tap":"thru",v=/^(?:pop|shift)$/.test(s);M.prototype[s]=function(){var E=arguments;if(v&&!this.__chain__){var I=this.value();return l.apply(Pe(I)?I:[],E)}return this[p](function(O){return l.apply(Pe(O)?O:[],E)})}}),ur(Ge.prototype,function(s,l){var p=M[l];if(p){var v=p.name+"";Qe.call(Ao,v)||(Ao[v]=[]),Ao[v].push({name:l,func:p})}}),Ao[nl(n,b).name]=[{name:"wrapper",func:n}],Ge.prototype.clone=G6,Ge.prototype.reverse=V6,Ge.prototype.value=H6,M.prototype.at=bM,M.prototype.chain=wM,M.prototype.commit=xM,M.prototype.next=TM,M.prototype.plant=EM,M.prototype.reverse=SM,M.prototype.toJSON=M.prototype.valueOf=M.prototype.value=AM,M.prototype.first=M.prototype.head,Fs&&(M.prototype[Fs]=CM),M},Co=x6();Ci?((Ci.exports=Co)._=Co,Ch._=Co):Lt._=Co}).call(Ae)})(af,af.exports);var Xq=af.exports,k2;function Ss(){return k2||(k2=1,function(e){var t=Ae&&Ae.__createBinding||(Object.create?function(B,G,X,J){J===void 0&&(J=X);var ie=Object.getOwnPropertyDescriptor(G,X);(!ie||("get"in ie?!G.__esModule:ie.writable||ie.configurable))&&(ie={enumerable:!0,get:function(){return G[X]}}),Object.defineProperty(B,J,ie)}:function(B,G,X,J){J===void 0&&(J=X),B[J]=G[X]}),n=Ae&&Ae.__setModuleDefault||(Object.create?function(B,G){Object.defineProperty(B,"default",{enumerable:!0,value:G})}:function(B,G){B.default=G}),r=Ae&&Ae.__importStar||function(B){if(B&&B.__esModule)return B;var G={};if(B!=null)for(var X in B)X!=="default"&&Object.prototype.hasOwnProperty.call(B,X)&&t(G,B,X);return n(G,B),G},i=Ae&&Ae.__importDefault||function(B){return B&&B.__esModule?B:{default:B}};Object.defineProperty(e,"__esModule",{value:!0}),e.validateArcs=e.clearOuterArcs=e.clearArcs=e.redrawArcs=e.getCoordByValue=e.createGradientElement=e.getColors=e.applyGradientColors=e.getArcDataByPercentage=e.getArcDataByValue=e.applyColors=e.setupTooltip=e.setupArcs=e.drawArc=e.setArcData=e.hideTooltip=void 0;var o=r(Os),a=oh,u=r(Ss()),c=i(z_),f=ah,h=Ds(),g=Xq,d=function(B,G,X){if(G.data.tooltip!=null){var J=G.data.tooltip.text!=X.tooltip.current.text();J&&(X.tooltip.current.html(G.data.tooltip.text).style("position","absolute").style("display","block").style("opacity",1),_(G.data.tooltip,G.data.color,X)),X.tooltip.current.style("left",B.pageX+15+"px").style("top",B.pageY-10+"px")}G.data.onMouseMove!=null&&G.data.onMouseMove(B)},_=function(B,G,X){Object.entries(f.defaultTooltipStyle).forEach(function(J){var ie=J[0],oe=J[1];return X.tooltip.current.style(o.camelCaseToKebabCase(ie),oe)}),X.tooltip.current.style("background-color",G),B.style!=null&&Object.entries(B.style).forEach(function(J){var ie=J[0],oe=J[1];return X.tooltip.current.style(o.camelCaseToKebabCase(ie),oe)})},y=function(B,G,X,J){J.cancel(),(0,e.hideTooltip)(X),G.data.onMouseLeave!=null&&G.data.onMouseLeave(B)},w=function(B){B.tooltip.current.html(" ").style("display","none")};e.hideTooltip=w;var m=function(B,G,X){B.target.style.stroke="none"},b=function(B,G){G.data.onMouseClick!=null&&G.data.onMouseClick(B)},C=function(B){var G,X,J=B.props.arc,ie=B.props.minValue,oe=B.props.maxValue,pe=(J==null?void 0:J.nbSubArcs)||((G=J==null?void 0:J.subArcs)===null||G===void 0?void 0:G.length)||1,le=(0,e.getColors)(pe,B);if(J!=null&&J.subArcs&&!(J!=null&&J.nbSubArcs)){var _e=0,ne=0,se=[],ce=[],te=[];(X=J==null?void 0:J.subArcs)===null||X===void 0||X.forEach(function(Me,Ie){var ue,be=0,bt=0,Xe=Me.limit;if(Me.length!=null)be=Me.length,Xe=o.getCurrentGaugeValueByPercentage(be+ne,B);else if(Me.limit==null){bt=_e;var lt=void 0,cn=(ue=J==null?void 0:J.subArcs)===null||ue===void 0?void 0:ue.slice(Ie),fn=(1-o.calculatePercentage(ie,oe,_e))*100;lt||(lt=fn/Math.max((cn==null?void 0:cn.length)||1,1)/100),Xe=_e+lt*100,be=lt}else bt=Xe-_e,Ie!==0?be=o.calculatePercentage(ie,oe,Xe)-ne:be=o.calculatePercentage(ie,oe,bt);se.push(be),ce.push(Xe),ne=se.reduce(function(Xr,hn){return Xr+hn},0),_e=Xe,Me.tooltip!=null&&te.push(Me.tooltip)});var ge=J.subArcs;B.arcData.current=se.map(function(Me,Ie){return{value:Me,limit:ce[Ie],color:le[Ie],showTick:ge[Ie].showTick||!1,tooltip:ge[Ie].tooltip||void 0,onMouseMove:ge[Ie].onMouseMove,onMouseLeave:ge[Ie].onMouseLeave,onMouseClick:ge[Ie].onClick}})}else{var ye=oe/pe;B.arcData.current=Array.from({length:pe},function(Me,Ie){return{value:ye,limit:(Ie+1)*ye,color:le[Ie],tooltip:void 0}})}};e.setArcData=C;var T=function(B,G){G===void 0&&(G=void 0);var X=G??o.calculatePercentage(B.props.minValue,B.props.maxValue,B.props.value),J=(0,e.getArcDataByPercentage)(X,B),ie={value:X,color:(J==null?void 0:J.color)||"white"},oe={value:1-X,color:"#5C5C5C"};return[ie,oe]},x=function(B,G){G===void 0&&(G=!1);var X=B.dimensions.current.outerRadius;if(B.props.type==h.GaugeType.Grafana&&G){B.doughnut.current.selectAll(".outerSubArc").remove();var J=(0,a.arc)().outerRadius(X+7).innerRadius(X+2).cornerRadius(0).padAngle(0),ie=B.doughnut.current.selectAll("anyString").data(B.pieChart.current(B.arcData.current)).enter().append("g").attr("class","outerSubArc"),oe=ie.append("path").attr("d",J);(0,e.applyColors)(oe,B);var pe=(0,g.throttle)(function(le,_e){return d(le,_e,B)},20);ie.on("mouseleave",function(le,_e){return y(le,_e,B,pe)}).on("mouseout",function(le,_e){return m(le)}).on("mousemove",pe).on("click",function(le,_e){return b(le,_e)})}},S=function(B,G){var X,J;G===void 0&&(G=void 0);var ie=B.props.arc,oe=ie.padding,pe=ie.cornerRadius,le=B.dimensions.current,_e=le.innerRadius,ne=le.outerRadius,se={};!((J=(X=B.props)===null||X===void 0?void 0:X.arc)===null||J===void 0)&&J.gradient?se=[{value:1}]:se=B.arcData.current,B.props.type==h.GaugeType.Grafana&&(se=T(B,G));var ce=B.props.type==h.GaugeType.Grafana?0:oe,te=B.props.type==h.GaugeType.Grafana?0:pe,ge=(0,a.arc)().outerRadius(ne).innerRadius(_e).cornerRadius(te).padAngle(ce),ye=B.doughnut.current.selectAll("anyString").data(B.pieChart.current(se)).enter().append("g").attr("class","subArc"),Me=ye.append("path").attr("d",ge);(0,e.applyColors)(Me,B);var Ie=(0,g.throttle)(function(ue,be){return d(ue,be,B)},20);ye.on("mouseleave",function(ue,be){return y(ue,be,B,Ie)}).on("mouseout",function(ue,be){return m(ue)}).on("mousemove",Ie).on("click",function(ue,be){return b(ue,be)})};e.drawArc=S;var R=function(B,G){G===void 0&&(G=!1),(0,e.setupTooltip)(B),x(B,G),(0,e.drawArc)(B)};e.setupArcs=R;var D=function(B){var G=document.getElementsByClassName(c.default.arcTooltipClassname).length!=0;G||(0,a.select)("body").append("div").attr("class",c.default.arcTooltipClassname),B.tooltip.current=(0,a.select)(".".concat(c.default.arcTooltipClassname)),B.tooltip.current.on("mouseleave",function(){return u.hideTooltip(B)}).on("mouseout",function(){return u.hideTooltip(B)})};e.setupTooltip=D;var $=function(B,G){var X,J;if(!((J=(X=G.props)===null||X===void 0?void 0:X.arc)===null||J===void 0)&&J.gradient){var ie="subArc-linear-gradient-".concat(Math.random()),oe=(0,e.createGradientElement)(G.doughnut.current,ie);(0,e.applyGradientColors)(oe,G),B.style("fill",function(pe){return"url(#".concat(ie,")")})}else B.style("fill",function(pe){return pe.data.color})};e.applyColors=$;var F=function(B,G){return G.arcData.current.find(function(X){return B<=X.limit})};e.getArcDataByValue=F;var U=function(B,G){return(0,e.getArcDataByValue)(o.getCurrentGaugeValueByPercentage(B,G),G)};e.getArcDataByPercentage=U;var A=function(B,G){G.arcData.current.forEach(function(X){var J,ie,oe,pe,le=o.normalize(X==null?void 0:X.limit,(ie=(J=G==null?void 0:G.props)===null||J===void 0?void 0:J.minValue)!==null&&ie!==void 0?ie:0,(pe=(oe=G==null?void 0:G.props)===null||oe===void 0?void 0:oe.maxValue)!==null&&pe!==void 0?pe:100);B.append("stop").attr("offset","".concat(le,"%")).style("stop-color",X.color).style("stop-opacity",1)})};e.applyGradientColors=A;var W=function(B,G){var X,J=G.props.arc,ie=[];if(J.colorArray)ie=J.colorArray;else{var oe=(X=J.subArcs)===null||X===void 0?void 0:X.map(function(se){return se.color});ie=oe!=null&&oe.some(function(se){return se!=null})?oe:c.default.defaultColors}ie||(ie=["#fff"]);var pe=B===(ie==null?void 0:ie.length);if(pe)return ie;for(var le=(0,a.scaleLinear)().domain([1,B]).range([ie[0],ie[ie.length-1]]).interpolate(a.interpolateHsl),_e=[],ne=1;ne<=B;ne++)_e.push(le(ne));return _e};e.getColors=W;var k=function(B,G){var X=B.append("defs").append("linearGradient").attr("id",G).attr("x1","0%").attr("x2","100%").attr("y1","0%").attr("y2","0%");return X};e.createGradientElement=k;var N=function(B,G,X,J,ie){var oe;X===void 0&&(X="inner"),J===void 0&&(J=0),ie===void 0&&(ie=1);var pe={outer:function(){return G.dimensions.current.outerRadius-J+2},inner:function(){return G.dimensions.current.innerRadius*ie-J+9},between:function(){var Xe=G.dimensions.current.outerRadius-G.dimensions.current.innerRadius,lt=G.dimensions.current.innerRadius+Xe-5;return lt}},le=pe[X]();G.props.type===h.GaugeType.Grafana?le+=5:G.props.type===h.GaugeType.Semicircle&&(le+=-2);var _e=o.calculatePercentage(G.props.minValue,G.props.maxValue,B),ne=(oe={},oe[h.GaugeType.Grafana]={startAngle:o.degToRad(-23),endAngle:o.degToRad(203)},oe[h.GaugeType.Semicircle]={startAngle:o.degToRad(.9),endAngle:o.degToRad(179.1)},oe[h.GaugeType.Radial]={startAngle:o.degToRad(-39),endAngle:o.degToRad(219)},oe),se=ne[G.props.type],ce=se.startAngle,te=se.endAngle,ge=ce+_e*(te-ce),ye=1*(G.dimensions.current.width/500),Me=[0,-ye/2],Ie=[Me[0]-le*Math.cos(ge),Me[1]-le*Math.sin(ge)],ue=[G.dimensions.current.outerRadius,G.dimensions.current.outerRadius],be=ue[0]+Ie[0],bt=ue[1]+Ie[1];return{x:be,y:bt}};e.getCoordByValue=N;var P=function(B){(0,e.clearArcs)(B),(0,e.setArcData)(B),(0,e.setupArcs)(B)};e.redrawArcs=P;var L=function(B){B.doughnut.current.selectAll(".subArc").remove()};e.clearArcs=L;var q=function(B){B.doughnut.current.selectAll(".outerSubArc").remove()};e.clearOuterArcs=q;var Y=function(B){j(B)};e.validateArcs=Y;var j=function(B){for(var G,X=B.props.minValue,J=B.props.maxValue,ie=B.props.arc,oe=ie.subArcs,pe=void 0,le=0,_e=((G=B.props.arc)===null||G===void 0?void 0:G.subArcs)||[];le<_e.length;le++){var ne=_e[le],se=ne.limit;if(typeof se<"u"){if(se<X||se>J)throw new Error("The limit of a subArc must be between the minValue and maxValue. The limit of the subArc is ".concat(se));if(typeof pe<"u"&&se<=pe)throw new Error("The limit of a subArc must be greater than the limit of the previous subArc. The limit of the subArc is ".concat(se,`. If you're trying to specify length in percent of the arc, use property "length". refer to: https://github.com/antoniolago/react-gauge-component`));pe=se}}if(oe.length>0){var ce=oe[oe.length-1];ce.limit<J&&(ce.limit=J)}}}(E0)),E0}var V3={};(function(e){var t=Ae&&Ae.__assign||function(){return t=Object.assign||function(A){for(var W,k=1,N=arguments.length;k<N;k++){W=arguments[k];for(var P in W)Object.prototype.hasOwnProperty.call(W,P)&&(A[P]=W[P])}return A},t.apply(this,arguments)},n=Ae&&Ae.__createBinding||(Object.create?function(A,W,k,N){N===void 0&&(N=k);var P=Object.getOwnPropertyDescriptor(W,k);(!P||("get"in P?!W.__esModule:P.writable||P.configurable))&&(P={enumerable:!0,get:function(){return W[k]}}),Object.defineProperty(A,N,P)}:function(A,W,k,N){N===void 0&&(N=k),A[N]=W[k]}),r=Ae&&Ae.__setModuleDefault||(Object.create?function(A,W){Object.defineProperty(A,"default",{enumerable:!0,value:W})}:function(A,W){A.default=W}),i=Ae&&Ae.__importStar||function(A){if(A&&A.__esModule)return A;var W={};if(A!=null)for(var k in A)k!=="default"&&Object.prototype.hasOwnProperty.call(A,k)&&n(W,A,k);return r(W,A),W},o=Ae&&Ae.__importDefault||function(A){return A&&A.__esModule?A:{default:A}};Object.defineProperty(e,"__esModule",{value:!0}),e.calculateAnchorAndAngleByValue=e.clearTicks=e.clearValueLabel=e.addValueText=e.addText=e.getLabelCoordsByValue=e.addTick=e.addTickValue=e.addTickLine=e.mapTick=e.addArcTicks=e.setupTicks=e.setupValueLabel=e.setupLabels=void 0;var a=i(Os),u=o(z_),c=Mu,f=i(oh),h=Ds(),g=Ss(),d=function(A){(0,e.setupValueLabel)(A),(0,e.setupTicks)(A)};e.setupLabels=d;var _=function(A){var W,k=A.props.labels;!((W=k==null?void 0:k.valueLabel)===null||W===void 0)&&W.hide||(0,e.addValueText)(A)};e.setupValueLabel=_;var y=function(A){var W,k,N,P,L,q,Y,j,B,G=A.props.labels,X=A.props.minValue,J=A.props.maxValue;if(u.default.debugTicksRadius)for(var ie=0;ie<J;ie++){var oe=(0,e.mapTick)(ie,A);(0,e.addTick)(oe,A)}else if(!(!((W=G.tickLabels)===null||W===void 0)&&W.hideMinMax)){var pe=(N=(k=G.tickLabels)===null||k===void 0?void 0:k.ticks)===null||N===void 0?void 0:N.some(function(se){return se.value==X});if(!pe){var le=(0,e.mapTick)(X,A);(0,e.addTick)(le,A)}var _e=(L=(P=G.tickLabels)===null||P===void 0?void 0:P.ticks)===null||L===void 0?void 0:L.some(function(se){return se.value==J});if(!_e){var ne=(0,e.mapTick)(J,A);(0,e.addTick)(ne,A)}}((Y=(q=G.tickLabels)===null||q===void 0?void 0:q.ticks)===null||Y===void 0?void 0:Y.length)>0&&((B=(j=G.tickLabels)===null||j===void 0?void 0:j.ticks)===null||B===void 0||B.forEach(function(se){(0,e.addTick)(se,A)})),(0,e.addArcTicks)(A)};e.setupTicks=y;var w=function(A){var W;A.props.arc,(W=A.arcData.current)===null||W===void 0||W.map(function(k){if(k.showTick)return k.limit}).forEach(function(k){k&&(0,e.addTick)((0,e.mapTick)(k,A),A)})};e.addArcTicks=w;var m=function(A,W){var k=W.props.labels.tickLabels;return{value:A,valueConfig:k==null?void 0:k.defaultTickValueConfig,lineConfig:k==null?void 0:k.defaultTickLineConfig}};e.mapTick=m;var b=function(A,W){var k,N,P,L,q,Y,j,B,G,X,J,ie,oe,pe,le,_e,ne,se,ce=W.props.labels,te=(0,e.calculateAnchorAndAngleByValue)(A==null?void 0:A.value,W);te.tickAnchor;var ge=te.angle,ye=((N=(k=ce==null?void 0:ce.tickLabels)===null||k===void 0?void 0:k.defaultTickLineConfig)===null||N===void 0?void 0:N.distanceFromArc)||((P=A.lineConfig)===null||P===void 0?void 0:P.distanceFromArc)||0;((q=(L=W.props.labels)===null||L===void 0?void 0:L.tickLabels)===null||q===void 0?void 0:q.type)=="outer"&&(ye=-ye);var Me=(0,e.getLabelCoordsByValue)(A==null?void 0:A.value,W,ye),Ie=((j=(Y=ce==null?void 0:ce.tickLabels)===null||Y===void 0?void 0:Y.defaultTickLineConfig)===null||j===void 0?void 0:j.color)||((B=A.lineConfig)===null||B===void 0?void 0:B.color)||((G=c.defaultTickLabels.defaultTickLineConfig)===null||G===void 0?void 0:G.color),ue=((J=(X=ce==null?void 0:ce.tickLabels)===null||X===void 0?void 0:X.defaultTickLineConfig)===null||J===void 0?void 0:J.width)||((ie=A.lineConfig)===null||ie===void 0?void 0:ie.width)||((oe=c.defaultTickLabels.defaultTickLineConfig)===null||oe===void 0?void 0:oe.width),be=((le=(pe=ce==null?void 0:ce.tickLabels)===null||pe===void 0?void 0:pe.defaultTickLineConfig)===null||le===void 0?void 0:le.length)||((_e=A.lineConfig)===null||_e===void 0?void 0:_e.length)||((ne=c.defaultTickLabels.defaultTickLineConfig)===null||ne===void 0?void 0:ne.length),bt,Xe;((se=ce==null?void 0:ce.tickLabels)===null||se===void 0?void 0:se.type)=="inner"?(bt=Me.x+be*Math.cos(ge*Math.PI/180),Xe=Me.y+be*Math.sin(ge*Math.PI/180)):(bt=Me.x-be*Math.cos(ge*Math.PI/180),Xe=Me.y-be*Math.sin(ge*Math.PI/180));var lt=f.line(),cn;cn=[[Me.x,Me.y],[bt,Xe]],W.g.current.append("path").datum(cn).attr("class",u.default.tickLineClassname).attr("d",lt).attr("stroke",Ie).attr("stroke-width",ue).attr("fill","none")};e.addTickLine=b;var C=function(A,W){var k,N,P,L,q,Y,j,B,G,X,J,ie,oe,pe,le,_e,ne,se,ce,te,ge=W.props.labels,ye=W.props.arc,Me=ye.width,Ie=A==null?void 0:A.value,ue=(0,e.calculateAnchorAndAngleByValue)(Ie,W).tickAnchor,be=27-Me*10,bt=((k=ge==null?void 0:ge.tickLabels)===null||k===void 0?void 0:k.type)=="inner";bt?be-=10:be=Me*10-10;var Xe=((P=(N=ge==null?void 0:ge.tickLabels)===null||N===void 0?void 0:N.defaultTickLineConfig)===null||P===void 0?void 0:P.distanceFromArc)||((L=A.lineConfig)===null||L===void 0?void 0:L.distanceFromArc)||0,lt=((Y=(q=ge==null?void 0:ge.tickLabels)===null||q===void 0?void 0:q.defaultTickLineConfig)===null||Y===void 0?void 0:Y.length)||((j=A.lineConfig)===null||j===void 0?void 0:j.length)||0,cn=((G=(B=ge==null?void 0:ge.tickLabels)===null||B===void 0?void 0:B.defaultTickLineConfig)===null||G===void 0?void 0:G.hide)||((X=A.lineConfig)===null||X===void 0?void 0:X.hide);cn||(bt?(be+=Xe,be+=lt):(be-=Xe,be-=lt));var fn=(0,e.getLabelCoordsByValue)(Ie,W,be),Xr=((J=A.valueConfig)===null||J===void 0?void 0:J.style)||((oe=(ie=ge==null?void 0:ge.tickLabels)===null||ie===void 0?void 0:ie.defaultTickValueConfig)===null||oe===void 0?void 0:oe.style)||{};Xr=t({},Xr);var hn="",vo=(_e=(le=(pe=W.props.labels)===null||pe===void 0?void 0:pe.tickLabels)===null||le===void 0?void 0:le.defaultTickValueConfig)===null||_e===void 0?void 0:_e.maxDecimalDigits;!((ne=A.valueConfig)===null||ne===void 0)&&ne.formatTextValue?hn=A.valueConfig.formatTextValue(a.floatingNumber(Ie,vo)):!((ce=(se=ge==null?void 0:ge.tickLabels)===null||se===void 0?void 0:se.defaultTickValueConfig)===null||ce===void 0)&&ce.formatTextValue?hn=ge.tickLabels.defaultTickValueConfig.formatTextValue(a.floatingNumber(Ie,vo)):W.props.minValue===0&&W.props.maxValue===100?(hn=a.floatingNumber(Ie,vo).toString(),hn+="%"):hn=a.floatingNumber(Ie,vo).toString(),((te=ge==null?void 0:ge.tickLabels)===null||te===void 0?void 0:te.type)=="inner"?(ue==="end"&&(fn.x+=10),ue==="start"&&(fn.x-=10)):ue==="middle"&&(fn.y+=2),ue==="middle"?fn.y+=0:fn.y+=3,Xr.textAnchor=ue,(0,e.addText)(hn,fn.x,fn.y,W,Xr,u.default.tickValueClassname)};e.addTickValue=C;var T=function(A,W){var k,N,P,L,q=W.props;q.minValue,q.maxValue;var Y=q.labels;q.arc,!((N=(k=Y==null?void 0:Y.tickLabels)===null||k===void 0?void 0:k.defaultTickLineConfig)===null||N===void 0)&&N.hide||(0,e.addTickLine)(A,W),!u.default.debugTicksRadius&&!(!((L=(P=Y==null?void 0:Y.tickLabels)===null||P===void 0?void 0:P.defaultTickValueConfig)===null||L===void 0)&&L.hide)&&(0,e.addTickValue)(A,W)};e.addTick=T;var x=function(A,W,k){var N;k===void 0&&(k=0);var P=W.props.labels,L=W.props.minValue,q=W.props.maxValue,Y=(N=P.tickLabels)===null||N===void 0?void 0:N.type,j=(0,g.getCoordByValue)(A,W,Y,k,.93),B=j.x,G=j.y;return a.calculatePercentage(L,q,A),W.props.type==h.GaugeType.Radial&&(G+=3),{x:B,y:G}};e.getLabelCoordsByValue=x;var S=function(A,W,k,N,P,L,q){q===void 0&&(q=0);var Y=N.g.current.append("g").attr("class",L).attr("transform","translate(".concat(W,", ").concat(k,")")).append("text").text(A);R(Y,P),Y.attr("transform","rotate(".concat(q,")"))};e.addText=S;var R=function(A,W){Object.entries(W).forEach(function(k){var N=k[0],P=k[1];return A.style(a.camelCaseToKebabCase(N),P)}),W!=null&&Object.entries(W).forEach(function(k){var N=k[0],P=k[1];return A.style(a.camelCaseToKebabCase(N),P)})},D=function(A){var W,k,N,P,L,q=A.props.value,Y=(W=A.props.labels)===null||W===void 0?void 0:W.valueLabel,j=20,B="",G=(N=(k=A.props.labels)===null||k===void 0?void 0:k.valueLabel)===null||N===void 0?void 0:N.maxDecimalDigits,X=a.floatingNumber(q,G);Y.formatTextValue?B=Y.formatTextValue(X):A.props.minValue===0&&A.props.maxValue===100?(B=X.toString(),B+="%"):B=X.toString();var J=4,ie=(B==null?void 0:B.length)||0,oe=ie>J?J/ie*1.5:1,pe=(P=Y==null?void 0:Y.style)===null||P===void 0?void 0:P.fontSize,le=t({},Y.style),_e=A.dimensions.current.outerRadius,ne=0;le.textAnchor="middle",A.props.type==h.GaugeType.Semicircle?ne=A.dimensions.current.outerRadius/1.5+j:A.props.type==h.GaugeType.Radial?ne=A.dimensions.current.outerRadius*1.45+j:A.props.type==h.GaugeType.Grafana&&(ne=A.dimensions.current.outerRadius*1+j);var se=(A.props.type==h.GaugeType.Radial,.003);oe=A.dimensions.current.width*se*oe;var ce=parseInt(pe,10)*oe;le.fontSize=ce+"px",Y.matchColorWithArc&&(le.fill=((L=(0,g.getArcDataByValue)(q,A))===null||L===void 0?void 0:L.color)||"white"),(0,e.addText)(B,_e,ne,A,le,u.default.valueLabelClassname)};e.addValueText=D;var $=function(A){return A.g.current.selectAll(".".concat(u.default.valueLabelClassname)).remove()};e.clearValueLabel=$;var F=function(A){A.g.current.selectAll(".".concat(u.default.tickLineClassname)).remove(),A.g.current.selectAll(".".concat(u.default.tickValueClassname)).remove()};e.clearTicks=F;var U=function(A,W){var k,N,P,L=W.props.minValue,q=W.props.maxValue,Y=a.calculatePercentage(L,q,A),j=(k={},k[h.GaugeType.Grafana]={startAngle:-20,endAngle:220},k[h.GaugeType.Semicircle]={startAngle:0,endAngle:180},k[h.GaugeType.Radial]={startAngle:-42,endAngle:266},k),B=j[W.props.type],G=B.startAngle,X=B.endAngle,J=G+Y*100*X/100,ie=Y<.5,oe=Y>u.default.rangeBetweenCenteredTickValueLabel[0]&&Y<u.default.rangeBetweenCenteredTickValueLabel[1],pe="",le=((P=(N=W.props.labels)===null||N===void 0?void 0:N.tickLabels)===null||P===void 0?void 0:P.type)=="inner";return oe?pe="middle":ie?pe=le?"start":"end":pe=le?"end":"start",{tickAnchor:pe,angle:J}};e.calculateAnchorAndAngleByValue=U})(V3);var H3={};(function(e){var t=Ae&&Ae.__createBinding||(Object.create?function(S,R,D,$){$===void 0&&($=D);var F=Object.getOwnPropertyDescriptor(R,D);(!F||("get"in F?!R.__esModule:F.writable||F.configurable))&&(F={enumerable:!0,get:function(){return R[D]}}),Object.defineProperty(S,$,F)}:function(S,R,D,$){$===void 0&&($=D),S[$]=R[D]}),n=Ae&&Ae.__setModuleDefault||(Object.create?function(S,R){Object.defineProperty(S,"default",{enumerable:!0,value:R})}:function(S,R){S.default=R}),r=Ae&&Ae.__importStar||function(S){if(S&&S.__esModule)return S;var R={};if(S!=null)for(var D in S)D!=="default"&&Object.prototype.hasOwnProperty.call(S,D)&&t(R,S,D);return n(R,S),R};Object.defineProperty(e,"__esModule",{value:!0}),e.clearPointerElement=e.addPointerElement=e.translatePointer=e.drawPointer=void 0;var i=oh,o=sh,a=Ss(),u=r(Os),c=r(Ss()),f=Ds(),h=function(S,R){var D;R===void 0&&(R=!1),S.pointer.current.context=g(S);var $=S.pointer.current.context,F=$.prevPercent,U=$.currentPercent,A=$.prevProgress,W=S.props.pointer,k=((D=S.prevProps)===null||D===void 0?void 0:D.current.value)==null;(k||R)&&S.props.type!=f.GaugeType.Grafana&&d(S);var N=(!R||k)&&W.animate;N?S.doughnut.current.transition().delay(W.animationDelay).ease(W.elastic?i.easeElastic:i.easeExpOut).duration(W.animationDuration).tween("progress",function(){var P=(0,i.interpolateNumber)(F,U);return function(L){var q=P(L);w(q,A)&&(S.props.type==f.GaugeType.Grafana?(c.clearArcs(S),c.drawArc(S,q)):_(q,S)),S.pointer.current.context.prevProgress=q}}):_(U,S)};e.drawPointer=h;var g=function(S){var R,D=S.props.value,$=S.props.pointer,F=$.length,U=S.props.minValue,A=S.props.maxValue;S.pointer.current.context.pointerPath;var W=b(S),k=$.type==o.PointerType.Needle?F:.2,N=[o.PointerType.Needle,o.PointerType.Arrow],P={centerPoint:[0,-W/2],pointerRadius:b(S),pathLength:S.dimensions.current.outerRadius*k,currentPercent:u.calculatePercentage(U,A,D),prevPercent:u.calculatePercentage(U,A,((R=S.prevProps)===null||R===void 0?void 0:R.current.value)||U),prevProgress:0,pathStr:"",shouldDrawPath:N.includes($.type),prevColor:""};return P},d=function(S){var R=S.props.value,D=S.props.pointer,$=S.pointer.current.context,F=$.shouldDrawPath,U=$.centerPoint,A=$.pointerRadius;$.pathStr;var W=$.currentPercent,k=$.prevPercent;F&&(S.pointer.current.context.pathStr=m(S,k||W),S.pointer.current.path=S.pointer.current.element.append("path").attr("d",S.pointer.current.context.pathStr).attr("fill",D.color)),D.type==o.PointerType.Needle?S.pointer.current.element.append("circle").attr("cx",U[0]).attr("cy",U[1]).attr("r",A).attr("fill",D.color):D.type==o.PointerType.Blob&&S.pointer.current.element.append("circle").attr("cx",U[0]).attr("cy",U[1]).attr("r",A).attr("fill",D.baseColor).attr("stroke",D.color).attr("stroke-width",8*A/10),y(A,R,S)},_=function(S,R){var D,$=R.props.pointer,F=R.pointer.current.context,U=F.pointerRadius,A=F.shouldDrawPath,W=F.prevColor;if(y(U,S,R),A&&R.props.type!=f.GaugeType.Grafana&&R.pointer.current.path.attr("d",m(R,S)),$.type==o.PointerType.Blob){var k=(D=c.getArcDataByPercentage(S,R))===null||D===void 0?void 0:D.color,N=k!=W;N&&R.pointer.current.element.select("circle").attr("stroke",k),R.pointer.current.context.prevColor=k}},y=function(S,R,D){var $,F=D.props.pointer,U=F.type,A=D.dimensions,W=u.getCurrentGaugeValueByPercentage(R,D),k=($={},$[o.PointerType.Needle]=function(){(0,e.translatePointer)(A.current.outerRadius,A.current.outerRadius,D)},$[o.PointerType.Arrow]=function(){var N=(0,a.getCoordByValue)(W,D,"inner",0,.7),P=N.x,L=N.y;P-=1,L+=S-3,(0,e.translatePointer)(P,L,D)},$[o.PointerType.Blob]=function(){var N=(0,a.getCoordByValue)(W,D,"between",0,.75),P=N.x,L=N.y;P-=1,L+=S,(0,e.translatePointer)(P,L,D)},$);return k[U]()},w=function(S,R,D){var $=S>1||S<0,F=Math.abs(S-R)<1e-4,U=S==R;return!F&&!U&&!$},m=function(S,R){var D=S.pointer.current.context,$=D.centerPoint,F=D.pointerRadius,U=D.pathLength,A=u.degToRad(S.props.type==f.GaugeType.Semicircle?0:-42),W=u.degToRad(S.props.type==f.GaugeType.Semicircle?180:223),k=A+R*(W-A),N=[$[0]-U*Math.cos(k),$[1]-U*Math.sin(k)],P=k-Math.PI/2,L=[$[0]-F*Math.cos(P),$[1]-F*Math.sin(P)],q=k+Math.PI/2,Y=[$[0]-F*Math.cos(q),$[1]-F*Math.sin(q)],j="M ".concat(L[0]," ").concat(L[1]," L ").concat(N[0]," ").concat(N[1]," L ").concat(Y[0]," ").concat(Y[1]);return j},b=function(S){var R=S.props.pointer,D=R.width;return D*(S.dimensions.current.width/500)},C=function(S,R,D){return D.pointer.current.element.attr("transform","translate("+S+", "+R+")")};e.translatePointer=C;var T=function(S){return S.pointer.current.element=S.g.current.append("g").attr("class","pointer")};e.addPointerElement=T;var x=function(S){return S.pointer.current.element.selectAll("*").remove()};e.clearPointerElement=x})(H3);(function(e){var t=Ae&&Ae.__createBinding||(Object.create?function(m,b,C,T){T===void 0&&(T=C);var x=Object.getOwnPropertyDescriptor(b,C);(!x||("get"in x?!b.__esModule:x.writable||x.configurable))&&(x={enumerable:!0,get:function(){return b[C]}}),Object.defineProperty(m,T,x)}:function(m,b,C,T){T===void 0&&(T=C),m[T]=b[C]}),n=Ae&&Ae.__setModuleDefault||(Object.create?function(m,b){Object.defineProperty(m,"default",{enumerable:!0,value:b})}:function(m,b){m.default=b}),r=Ae&&Ae.__importStar||function(m){if(m&&m.__esModule)return m;var b={};if(m!=null)for(var C in m)C!=="default"&&Object.prototype.hasOwnProperty.call(m,C)&&t(b,m,C);return n(b,m),b};Object.defineProperty(e,"__esModule",{value:!0}),e.clearChart=e.centerGraph=e.calculateRadius=e.updateDimensions=e.renderChart=e.calculateAngles=e.initChart=void 0;var i=Ds(),o=r(Ss()),a=r(V3),u=r(H3),c=r(Os),f=function(m){var b=m.dimensions.current.angles,C=JSON.stringify(m.prevProps.current.value)!==JSON.stringify(m.props.value),T=c.isEmptyObject(m.svg.current);if(C&&!T){(0,e.renderChart)(m,!1);return}m.container.current.select("svg").remove(),m.svg.current=m.container.current.append("svg"),m.g.current=m.svg.current.append("g"),m.doughnut.current=m.g.current.append("g").attr("class","doughnut"),(0,e.calculateAngles)(m),m.pieChart.current.value(function(x){return x.value}).startAngle(b.startAngle).endAngle(b.endAngle).sort(null),u.addPointerElement(m),(0,e.renderChart)(m,!0)};e.initChart=f;var h=function(m){var b=m.dimensions.current.angles;m.props.type==i.GaugeType.Semicircle?(b.startAngle=-Math.PI/2+.02,b.endAngle=Math.PI/2-.02):m.props.type==i.GaugeType.Radial?(b.startAngle=-Math.PI/1.37,b.endAngle=Math.PI/1.37):m.props.type==i.GaugeType.Grafana&&(b.startAngle=-Math.PI/1.6,b.endAngle=Math.PI/1.6)};e.calculateAngles=h;var g=function(m,b){var C,T;b===void 0&&(b=!1);var x=m.dimensions,S=m.props.arc,R=m.props.labels;if(b){(0,e.updateDimensions)(m),m.g.current.attr("transform","translate("+x.current.margin.left+", 35)"),(0,e.calculateRadius)(m),m.doughnut.current.attr("transform","translate("+x.current.outerRadius+", "+x.current.outerRadius+")"),m.doughnut.current.on("mouseleave",function(){return o.hideTooltip(m)}).on("mouseout",function(){return o.hideTooltip(m)});var D=S.width;x.current.innerRadius=x.current.outerRadius*(1-D),(0,e.clearChart)(m),o.setArcData(m),o.setupArcs(m,b),a.setupLabels(m),u.drawPointer(m,b);var $=(C={},C[i.GaugeType.Semicircle]=50,C[i.GaugeType.Radial]=55,C[i.GaugeType.Grafana]=55,C),F=m.doughnut.current.node().getBoundingClientRect().height,U=m.container.current.node().getBoundingClientRect().width,A=m.props.type;m.svg.current.attr("width",U).attr("height",F+$[A])}else{var W=JSON.stringify(m.prevProps.current.arc)!==JSON.stringify(m.props.arc),k=JSON.stringify(m.prevProps.current.pointer)!==JSON.stringify(m.props.pointer),N=JSON.stringify(m.prevProps.current.value)!==JSON.stringify(m.props.value),P=JSON.stringify((T=m.prevProps.current.labels)===null||T===void 0?void 0:T.tickLabels)!==JSON.stringify(R.tickLabels),L=W;L&&(o.clearArcs(m),o.setArcData(m),o.setupArcs(m,b)),(k||N)&&u.drawPointer(m),(W||P)&&(a.clearTicks(m),a.setupTicks(m)),N&&(a.clearValueLabel(m),a.setupValueLabel(m))}};e.renderChart=g;var d=function(m){var b=m.props.marginInPercent,C=m.dimensions,T=m.container.current.node().getBoundingClientRect(),x=T.width,S=T.height;C.current.fixedHeight==0&&(C.current.fixedHeight=S+200);var R=typeof b=="number",D=R?b:b.left,$=R?b:b.right,F=R?b:b.top,U=R?b:b.bottom;C.current.margin.left=x*D,C.current.margin.right=x*$,C.current.width=x-C.current.margin.left-C.current.margin.right,C.current.margin.top=C.current.fixedHeight*F,C.current.margin.bottom=C.current.fixedHeight*U,C.current.height=C.current.width/2-C.current.margin.top-C.current.margin.bottom};e.updateDimensions=d;var _=function(m){var b=m.dimensions;b.current.width<2*b.current.height?b.current.outerRadius=(b.current.width-b.current.margin.left-b.current.margin.right)/2:b.current.outerRadius=b.current.height-b.current.margin.top-b.current.margin.bottom+35,(0,e.centerGraph)(m)};e.calculateRadius=_;var y=function(m){var b=m.dimensions;b.current.margin.left=b.current.width/2-b.current.outerRadius+b.current.margin.right,m.g.current.attr("transform","translate("+b.current.margin.left+", "+b.current.margin.top+")")};e.centerGraph=y;var w=function(m){a.clearTicks(m),a.clearValueLabel(m),u.clearPointerElement(m),o.clearArcs(m)};e.clearChart=w})(G3);var q3={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.defaultDimensions=e.defaultAngles=e.defaultMargins=void 0,e.defaultMargins={top:0,right:0,bottom:0,left:0},e.defaultAngles={startAngle:0,endAngle:0,startAngleDeg:0,endAngleDeg:0},e.defaultDimensions={width:0,height:0,margin:e.defaultMargins,outerRadius:0,innerRadius:0,angles:e.defaultAngles,fixedHeight:0}})(q3);var Da=Ae&&Ae.__assign||function(){return Da=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},Da.apply(this,arguments)},jq=Ae&&Ae.__createBinding||(Object.create?function(e,t,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]}),Qq=Ae&&Ae.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),G_=Ae&&Ae.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n in e)n!=="default"&&Object.prototype.hasOwnProperty.call(e,n)&&jq(t,e,n);return Qq(t,e),t};Object.defineProperty(xg,"__esModule",{value:!0});var Mt=G_(ca),D2=oh,Ul=Ds(),S0=G_(G3),Jq=G_(Ss()),O2=Os,Zq=q3,eY=sh,tY=W3(),nY=function(e){var t,n,r,i,o=(0,Mt.useRef)({}),a=(0,Mt.useRef)({}),u=(0,Mt.useRef)({}),c=(0,Mt.useRef)({}),f=(0,Mt.useRef)(!0),h=(0,Mt.useRef)(0),g=(0,Mt.useRef)(Da({},eY.defaultPointerRef)),d=(0,Mt.useRef)({}),_=(0,Mt.useRef)([]),y=(0,Mt.useRef)((0,D2.pie)()),w=(0,Mt.useRef)(Da({},Zq.defaultDimensions)),m=(0,Mt.useRef)(e),b=(0,Mt.useRef)({}),C=(0,Mt.useRef)(null),T={props:m.current,prevProps:b,svg:o,g:u,dimensions:w,doughnut:c,isFirstRun:f,currentProgress:h,pointer:g,container:d,arcData:_,pieChart:y,tooltip:a},x=function(){var F,U,A=Da({},Ul.defaultGaugeProps);if(T.props=m.current=(0,O2.mergeObjects)(A,e),((F=T.props.arc)===null||F===void 0?void 0:F.width)==((U=Ul.defaultGaugeProps.arc)===null||U===void 0?void 0:U.width)){var W=m.current.arc;W.width=(0,tY.getArcWidthByType)(T.props.type)}T.props.marginInPercent==Ul.defaultGaugeProps.marginInPercent&&(m.current.marginInPercent=(0,Ul.getGaugeMarginByType)(T.props.type)),Jq.validateArcs(T)},S=function(){var F=JSON.stringify(b.current.arc)!==JSON.stringify(m.current.arc),U=JSON.stringify(b.current.pointer)!==JSON.stringify(m.current.pointer),A=JSON.stringify(b.current.value)!==JSON.stringify(m.current.value),W=JSON.stringify(b.current.minValue)!==JSON.stringify(m.current.minValue),k=JSON.stringify(b.current.maxValue)!==JSON.stringify(m.current.maxValue);return F||U||A||W||k};(0,Mt.useLayoutEffect)(function(){x(),f.current=(0,O2.isEmptyObject)(d.current),f.current&&(d.current=(0,D2.select)(C.current)),S()&&S0.initChart(T),T.prevProps.current=m.current},[e]),(0,Mt.useEffect)(function(){var F,U=new MutationObserver(function(){var A;!((A=C.current)===null||A===void 0)&&A.offsetParent&&(S0.renderChart(T,!0),U.disconnect())});return U.observe((F=C.current)===null||F===void 0?void 0:F.parentNode,{attributes:!0,subtree:!1}),function(){return U.disconnect()}},[(n=(t=C.current)===null||t===void 0?void 0:t.parentNode)===null||n===void 0?void 0:n.offsetWidth,(i=(r=C.current)===null||r===void 0?void 0:r.parentNode)===null||i===void 0?void 0:i.offsetHeight]),(0,Mt.useEffect)(function(){var F=function(){return S0.renderChart(T,!0)};return window.addEventListener("resize",F),function(){return window.removeEventListener("resize",F)}},[e]);var R=e.id,D=e.style,$=e.className;return e.type,Mt.default.createElement("div",{id:R,className:"".concat(T.props.type,"-gauge").concat($?" "+$:""),style:D,ref:function(F){return C.current=F}})};xg.default=nY;var rY=Ae&&Ae.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(hx,"__esModule",{value:!0});var iY=rY(xg),oY=hx.default=iY.default;const sY=e=>e===0?"low":"high",aY=({value:e})=>Re.jsx(oY,{arc:{nbSubArcs:150,colorArray:["#5BE12C","#F5CD19","#EA4228"],width:.3,padding:.003},labels:{valueLabel:{fontSize:40,formatTextValue:t=>t+"%"},tickLabels:{type:"outer",defaultTickValueConfig:{formatTextValue:sY}}},value:e,maxValue:100}),uY=({value:e})=>Re.jsx("div",{className:"text-center text-xl font-bold my-2",children:e}),lY=({value:e})=>Re.jsxs("p",{className:"flex justify-center mt-2",children:["Ambang Batas ",e]}),cY=({value:e})=>Re.jsxs("p",{className:"flex justify-center mt-2",children:["Tanggal ",e]}),fY=({value:e})=>Re.jsx("div",{className:"flex justify-center mt-2",children:Re.jsx(NI,{href:route(e),className:"text-blue-600 underline cursor-pointer",children:"Graph"})}),hY=({groupedGauges:e})=>Re.jsx("div",{className:"flex flex-row justify-center flex-wrap",children:Object.keys(e).map((t,n)=>Re.jsx("div",{className:"flex flex-col items-center m-4",children:Re.jsxs("div",{className:"bg-gray-200 rounded-lg p-4 mb-4 w-full",children:[Re.jsx("h2",{className:"text-center text-2xl font-bold mb-2",children:t}),Re.jsx("div",{className:"flex flex-wrap justify-center",children:e[t].map((r,i)=>Re.jsxs("div",{className:"m-4",children:[Re.jsx(uY,{value:r.title}),Re.jsx("div",{className:"w-full sm:max-w-md mt-2 px-6 py-4 bg-white shadow-md overflow-hidden sm:rounded-lg",children:Re.jsx(aY,{value:r.value})}),Re.jsx(lY,{value:r.value}),Re.jsx(cY,{value:r.date}),Re.jsx(fY,{value:"login"})]},i))})]})},n))});var dY="firebase",pY="10.12.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Qo(dY,pY,"app");const gY=()=>Re.jsxs("div",{className:"flex flex-col items-center justify-center h-full",children:[Re.jsx("h1",{className:"text-2xl font-bold",children:"RSUP DR SARDJITO"}),Re.jsx("h1",{className:"text-2xl font-bold",children:"RUANG INDRAPRASTA"}),Re.jsx("p",{className:"text-lg text-center",children:"Monitoring Suhu dan Kelembapan Kulkas Ruang Obat IP2"})]}),_Y=()=>Re.jsx("thead",{className:"bg-gray-50",children:Re.jsxs("tr",{children:[Re.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"No"}),Re.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tanggal Jam"}),Re.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Suhu Ruang"}),Re.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Kelembaban Ruang"}),Re.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Suhu Kulkas"})]})});var Y3={exports:{}},mY="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",vY=mY,yY=vY;function K3(){}function X3(){}X3.resetWarningCache=K3;var bY=function(){function e(r,i,o,a,u,c){if(c!==yY){var f=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw f.name="Invariant Violation",f}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:X3,resetWarningCache:K3};return n.PropTypes=n,n};Y3.exports=bY();var wY=Y3.exports;const Ho=PI(wY),j3=({data:e,rowNum:t})=>Re.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:Re.jsxs("tr",{children:[Re.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t}),Re.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.tanggalJam}),Re.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.suhuRuang}),Re.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.kelembabanRuang}),Re.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.suhuKulkas})]})});j3.propTypes={data:Ho.shape({tanggalJam:Ho.string.isRequired,suhuRuang:Ho.string.isRequired,kelembabanRuang:Ho.string.isRequired,suhuKulkas:Ho.string.isRequired}).isRequired,rowNum:Ho.number.isRequired};const EY=()=>{const[e,t]=ca.useState([]),[n,r]=ca.useState([]),[i,o]=ca.useState(!1),a={apiKey:"AIzaSyCMQwwA1YzvhDLuNjCeyxfbVimjOg5qixY",authDomain:"testproject-ad4c1.firebaseapp.com",databaseURL:"https://testproject-ad4c1-default-rtdb.asia-southeast1.firebasedatabase.app",projectId:"testproject-ad4c1",storageBucket:"testproject-ad4c1.appspot.com",messagingSenderId:"591800987854",appId:"1:591800987854:web:ad84ef20538495f09fa09f",measurementId:"G-3ME60D5KDY"};ca.useEffect(()=>{const h=D0(a),g=py(h),d=hy(g,"gauge"),_=dy(d,y=>{if(y.exists()){const w=y.val(),m=u(w);console.log(m),t(m)}else t([])});return()=>{_()}},[]);const u=h=>Object.entries(h).reduce((g,[d,_])=>(g[d]=Object.entries(_).map(([y,w])=>({title:y,...w})),g),{}),c=h=>({no:n.length+1,tanggalJam:h.tanggalJam||"",suhuRuang:h.suhuRuang||"",kelembabanRuang:h.kelembabanRuang||"",suhuKulkas:h.suhuKulkas||""}),f=()=>{o(!0);const h=D0(a),g=py(h),d=hy(g,"table");dy(d,_=>{if(_.exists()){const y=_.val();console.log("Raw data from Firebase:",y);const w=c(y);console.log("Transformed data:",w),r(m=>[...m,w]),o(!1)}else o(!1)},{onlyOnce:!0})};return Re.jsxs(Re.Fragment,{children:[Re.jsx(gY,{}),Re.jsx("div",{className:"flex flex-col items-center pt-6 sm:pt-0 bg-gray-100",children:Re.jsx(hY,{groupedGauges:e})}),Re.jsx("div",{className:"flex justify-center mt-4",children:Re.jsx("button",{onClick:f,className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded",disabled:i,children:i?"Fetching...":"Fetch Data"})}),Re.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[Re.jsx(_Y,{}),n.map((h,g)=>Re.jsx(j3,{data:h,rowNum:g+1},g))]})]})};export{EY as default};
